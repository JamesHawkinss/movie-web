/*! For license information please see main.0af0fc8c.js.LICENSE.txt */
(function(){var __webpack_modules__={7228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},3646:function(e,t,r){var n=r(7228);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3913:function(e){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},6860:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8206:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},319:function(e,t,r){var n=r(3646),i=r(6860),a=r(379),o=r(8206);e.exports=function(e){return n(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},379:function(e,t,r){var n=r(7228);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},7757:function(e,t,r){e.exports=r(8937)},1538:function(e,t,r){"use strict";r.d(t,{$t:function(){return o},Fx:function(){return n},Hj:function(){return a},ft:function(){return i}});var n="https://proxy-1.movie-web.workers.dev/?destination=",i="aa0937c0",a="https://discord.gg/Jhqt4Xzpfb",o="https://github.com/JamesHawkinss/movie-web"},778:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{M:function(){return gDrivePlayerScraper}});var _home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1413),_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5861),_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7757),_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0__),providers_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3325),mw_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1538),unpacker__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4796),crypto_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2984),crypto_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(crypto_js__WEBPACK_IMPORTED_MODULE_3__),format={stringify:function(e){var t=e.ciphertext.toString(crypto_js__WEBPACK_IMPORTED_MODULE_3___default().enc.Base64),r=e.iv.toString()||"",n=e.salt.toString()||"";return JSON.stringify({ct:t,iv:r,salt:n})},parse:function(e){var t=JSON.parse(e),r=crypto_js__WEBPACK_IMPORTED_MODULE_3___default().enc.Base64.parse(t.ct),n=crypto_js__WEBPACK_IMPORTED_MODULE_3___default().enc.Hex.parse(t.iv)||"",i=crypto_js__WEBPACK_IMPORTED_MODULE_3___default().enc.Hex.parse(t.s)||"";return crypto_js__WEBPACK_IMPORTED_MODULE_3___default().lib.CipherParams.create({ciphertext:r,iv:n,salt:i})}},gDrivePlayerScraper={id:"gdriveplayer",enabled:!0,type:[providers_types__WEBPACK_IMPORTED_MODULE_1__._.MOVIE],displayName:"gdriveplayer",getMediaFromPortable:function(e){return(0,_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default().mark((function t(){var r;return _home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(mw_constants__WEBPACK_IMPORTED_MODULE_5__.Fx,"https://api.gdriveplayer.us/v1/imdb/").concat(e.mediaId)).then((function(e){return e.json()}));case 2:return r=t.sent,t.abrupt("return",(0,_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__.Z)((0,_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__.Z)({},e),{},{title:r.Title,year:r.Year}));case 4:case"end":return t.stop()}}),t)})))()},searchForMedia:function(e){return(0,_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default().mark((function t(){var r,n;return _home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(mw_constants__WEBPACK_IMPORTED_MODULE_5__.Fx,"https://api.gdriveplayer.us/v1/movie/search?title=").concat(e.searchQuery)).then((function(e){return e.json()}));case 2:return r=t.sent,n=(r||[]).map((function(e){return{title:e.title,year:e.year,mediaId:e.imdb}})),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))()},getStream:function getStream(media){return(0,_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default().mark((function _callee3(){var streamRes,page,script,data,decryptedData,sources,source;return _home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,fetch("".concat(mw_constants__WEBPACK_IMPORTED_MODULE_5__.Fx,"https://database.gdriveplayer.us/player.php?imdb=").concat(media.mediaId)).then((function(e){return e.text()}));case 2:if(streamRes=_context3.sent,page=(new DOMParser).parseFromString(streamRes,"text/html"),script=Array.from(page.querySelectorAll("script")).find((function(e){var t;return null===(t=e.textContent)||void 0===t?void 0:t.includes("eval")})),script&&script.textContent){_context3.next=7;break}throw new Error("Could not find stream");case 7:return data=(0,unpacker__WEBPACK_IMPORTED_MODULE_2__.Vv)(script.textContent).split("var data=\\'")[1].split("\\'")[0].replace(/\\/g,""),decryptedData=(0,unpacker__WEBPACK_IMPORTED_MODULE_2__.Vv)(crypto_js__WEBPACK_IMPORTED_MODULE_3___default().AES.decrypt(data,"alsfheafsjklNIWORNiolNIOWNKLNXakjsfwnBdwjbwfkjbJjkopfjweopjASoiwnrflakefneiofrt",{format:format}).toString(crypto_js__WEBPACK_IMPORTED_MODULE_3___default().enc.Utf8)),sources=JSON.parse(JSON.stringify(eval(decryptedData.split("sources:")[1].split(",image")[0].replace(/\\/g,"").replace(/document\.referrer/g,'""')))),source=sources[sources.length-1],_context3.abrupt("return",{url:"https:".concat(source.file),type:source.type,captions:[]});case 12:case"end":return _context3.stop()}}),_callee3)})))()}}},3897:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{L:function(){return xemovieScraper}});var _home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(885),_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7762),_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1413),_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5861),_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7757),_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0__),providers_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3325),mw_constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1538),xemovieScraper={id:"xemovie",enabled:!0,type:[providers_types__WEBPACK_IMPORTED_MODULE_1__._.MOVIE],displayName:"xemovie",getMediaFromPortable:function(e){return(0,_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.Z)(_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default().mark((function t(){var r,n,i,a,o,s;return _home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(mw_constants__WEBPACK_IMPORTED_MODULE_3__.Fx,"https://xemovie.co/movies/").concat(e.mediaId,"/watch")).then((function(e){return e.text()}));case 2:return i=t.sent,a=(new DOMParser).parseFromString(i,"text/html"),o=(null===(r=a.querySelector(".text-primary.text-lg.font-extrabold"))||void 0===r?void 0:r.textContent)||"",s=(null===(n=a.querySelector("div.justify-between:nth-child(3) > div:nth-child(2)"))||void 0===n?void 0:n.textContent)||"",t.abrupt("return",(0,_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)({},e),{},{title:o,year:s}));case 7:case"end":return t.stop()}}),t)})))()},searchForMedia:function(e){return(0,_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.Z)(_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default().mark((function t(){var r,n,i,a,o,s,u,l;return _home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.searchQuery.toLowerCase(),n="".concat(mw_constants__WEBPACK_IMPORTED_MODULE_3__.Fx,"https://xemovie.co/search?q=").concat(encodeURIComponent(r)),t.next=4,fetch(n).then((function(e){return e.text()}));case 4:if(i=t.sent,a=new DOMParser,o=a.parseFromString(i,"text/html"),s=o.querySelectorAll(".py-10")[0].querySelector(".grid")){t.next=10;break}return t.abrupt("return",[]);case 10:return u=Array.from(s.querySelectorAll("a")).filter((function(e){return!e.className})),l=u.map((function(e){var t,r,n=e.parentElement;if(n){var i=n.querySelector("a");if(i)return{title:null===(t=n.querySelector("div > div > a > h6"))||void 0===t?void 0:t.textContent,year:null===(r=n.querySelector("div.float-right"))||void 0===r?void 0:r.textContent,mediaId:i.href.split("/").pop()||""}}})).filter((function(e){return!!e})),t.abrupt("return",l);case 13:case"end":return t.stop()}}),t)})))()},getStream:function getStream(media){return(0,_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.Z)(_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default().mark((function _callee3(){var url,streamUrl,subtitles,res,scripts,_i,_scripts,script,data,_iterator,_step,_step$value,index,subtitleTrack,subtitleBlob,streamType;return _home_runner_work_movie_web_movie_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(media.mediaType===providers_types__WEBPACK_IMPORTED_MODULE_1__._.MOVIE){_context3.next=2;break}throw new Error("Incorrect type");case 2:return url="".concat(mw_constants__WEBPACK_IMPORTED_MODULE_3__.Fx,"https://xemovie.co/movies/").concat(media.mediaId,"/watch"),streamUrl="",subtitles=[],_context3.next=7,fetch(url).then((function(e){return e.text()}));case 7:res=_context3.sent,scripts=Array.from((new DOMParser).parseFromString(res,"text/html").querySelectorAll("script")),_i=0,_scripts=scripts;case 10:if(!(_i<_scripts.length)){_context3.next=41;break}if(script=_scripts[_i],script.textContent){_context3.next=14;break}return _context3.abrupt("continue",38);case 14:if(!script.textContent.match(/https:\/\/[a-z][0-9]\.xemovie\.com/)){_context3.next=38;break}data=JSON.parse(JSON.stringify(eval("(".concat(script.textContent.replace("const data = ","").split("};")[0],"})")))),streamUrl=data.playlist[0].file,_iterator=(0,_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_5__.Z)(data.playlist[0].tracks.entries()),_context3.prev=18,_iterator.s();case 20:if((_step=_iterator.n()).done){_context3.next=30;break}return _step$value=(0,_home_runner_work_movie_web_movie_web_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_step.value,2),index=_step$value[0],subtitleTrack=_step$value[1],_context3.t0=URL,_context3.next=25,fetch("".concat(mw_constants__WEBPACK_IMPORTED_MODULE_3__.Fx).concat(subtitleTrack.file)).then((function(e){return e.blob()}));case 25:_context3.t1=_context3.sent,subtitleBlob=_context3.t0.createObjectURL.call(_context3.t0,_context3.t1),subtitles.push({id:index,url:subtitleBlob,label:subtitleTrack.label});case 28:_context3.next=20;break;case 30:_context3.next=35;break;case 32:_context3.prev=32,_context3.t2=_context3.catch(18),_iterator.e(_context3.t2);case 35:return _context3.prev=35,_iterator.f(),_context3.finish(35);case 38:_i++,_context3.next=10;break;case 41:if(streamType=streamUrl.split(".").at(-1),"mp4"===streamType||"m3u8"===streamType){_context3.next=44;break}throw new Error("Unsupported stream type");case 44:return _context3.abrupt("return",{url:streamUrl,type:streamType,captions:subtitles});case 45:case"end":return _context3.stop()}}),_callee3,null,[[18,32,35,38]])})))()}}},3325:function(e,t,r){"use strict";var n;r.d(t,{_:function(){return n}}),function(e){e.MOVIE="movie",e.SERIES="series",e.ANIME="anime"}(n||(n={}))},5542:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(7492),r(6707),r(254),r(6018),function(){var e=a,t=e.lib.BlockCipher,r=e.algo,n=[],i=[],o=[],s=[],u=[],l=[],c=[],d=[],f=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,a=0;for(t=0;t<256;t++){var p=a^a<<1^a<<2^a<<3^a<<4;p=p>>>8^255&p^99,n[r]=p,i[p]=r;var v=e[r],g=e[v],m=e[g],y=257*e[p]^16843008*p;o[r]=y<<24|y>>>8,s[r]=y<<16|y>>>16,u[r]=y<<8|y>>>24,l[r]=y,y=16843009*m^65537*g^257*v^16843008*r,c[p]=y<<24|y>>>8,d[p]=y<<16|y>>>16,f[p]=y<<8|y>>>24,h[p]=y,r?(r=v^e[e[e[m^v]]],a^=e[e[a]]):r=a=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],v=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,i=4*((this._nRounds=r+6)+1),a=this._keySchedule=[],o=0;o<i;o++)o<r?a[o]=t[o]:(l=a[o-1],o%r?r>6&&o%r==4&&(l=n[l>>>24]<<24|n[l>>>16&255]<<16|n[l>>>8&255]<<8|n[255&l]):(l=n[(l=l<<8|l>>>24)>>>24]<<24|n[l>>>16&255]<<16|n[l>>>8&255]<<8|n[255&l],l^=p[o/r|0]<<24),a[o]=a[o-r]^l);for(var s=this._invKeySchedule=[],u=0;u<i;u++){if(o=i-u,u%4)var l=a[o];else l=a[o-4];s[u]=u<4||o<=4?l:c[n[l>>>24]]^d[n[l>>>16&255]]^f[n[l>>>8&255]]^h[n[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,u,l,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,c,d,f,h,i),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,a,o,s){for(var u=this._nRounds,l=e[t]^r[0],c=e[t+1]^r[1],d=e[t+2]^r[2],f=e[t+3]^r[3],h=4,p=1;p<u;p++){var v=n[l>>>24]^i[c>>>16&255]^a[d>>>8&255]^o[255&f]^r[h++],g=n[c>>>24]^i[d>>>16&255]^a[f>>>8&255]^o[255&l]^r[h++],m=n[d>>>24]^i[f>>>16&255]^a[l>>>8&255]^o[255&c]^r[h++],y=n[f>>>24]^i[l>>>16&255]^a[c>>>8&255]^o[255&d]^r[h++];l=v,c=g,d=m,f=y}v=(s[l>>>24]<<24|s[c>>>16&255]<<16|s[d>>>8&255]<<8|s[255&f])^r[h++],g=(s[c>>>24]<<24|s[d>>>16&255]<<16|s[f>>>8&255]<<8|s[255&l])^r[h++],m=(s[d>>>24]<<24|s[f>>>16&255]<<16|s[l>>>8&255]<<8|s[255&c])^r[h++],y=(s[f>>>24]<<24|s[l>>>16&255]<<16|s[c>>>8&255]<<8|s[255&d])^r[h++],e[t]=v,e[t+1]=g,e[t+2]=m,e[t+3]=y},keySize:8});e.AES=t._createHelper(v)}(),a.AES)}()},6018:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(254),void(a.lib.Cipher||function(e){var t=a,r=t.lib,n=r.Base,i=r.WordArray,o=r.BufferedBlockAlgorithm,s=t.enc,u=(s.Utf8,s.Base64),l=t.algo.EvpKDF,c=r.Cipher=o.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?E:m}return function(t){return{encrypt:function(r,n,i){return e(n).encrypt(t,r,n,i)},decrypt:function(r,n,i){return e(n).decrypt(t,r,n,i)}}}}()}),d=(r.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),f=r.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=d.CBC=function(){var t=f.extend();function r(t,r,n){var i,a=this._iv;a?(i=a,this._iv=e):i=this._prevBlock;for(var o=0;o<n;o++)t[r+o]^=i[o]}return t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;r.call(this,e,t,i),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,a=e.slice(t,t+i);n.decryptBlock(e,t),r.call(this,e,t,i),this._prevBlock=a}}),t}(),p=(t.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,a=n<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(a);var u=i.create(o,n);e.concat(u)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},v=(r.BlockCipher=c.extend({cfg:c.cfg.extend({mode:h,padding:p}),reset:function(){var e;c.reset.call(this);var t=this.cfg,r=t.iv,n=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,r&&r.words):(this._mode=e.call(n,this,r&&r.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),r.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),g=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;return(r?i.create([1398893684,1701076831]).concat(r).concat(t):t).toString(u)},parse:function(e){var t,r=u.parse(e),n=r.words;return 1398893684==n[0]&&1701076831==n[1]&&(t=i.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),v.create({ciphertext:r,salt:t})}},m=r.SerializableCipher=n.extend({cfg:n.extend({format:g}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n),a=i.finalize(t),o=i.cfg;return v.create({ciphertext:a,key:r,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(t.kdf={}).OpenSSL={execute:function(e,t,r,n){n||(n=i.random(8));var a=l.create({keySize:t+r}).compute(e,n),o=i.create(a.words.slice(t),4*r);return a.sigBytes=4*t,v.create({key:a,iv:o,salt:n})}},E=r.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:y}),encrypt:function(e,t,r,n){var i=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize);n.iv=i.iv;var a=m.encrypt.call(this,e,t,i.key,n);return a.mixIn(i),a},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=n.kdf.execute(r,e.keySize,e.ivSize,t.salt);return n.iv=i.iv,m.decrypt.call(this,e,t,i.key,n)}})}()))}()},8443:function(e,t,r){e.exports=function(){var e=e||function(e,t){var n;if("undefined"!==typeof window&&window.crypto&&(n=window.crypto),"undefined"!==typeof self&&self.crypto&&(n=self.crypto),"undefined"!==typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!==typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&"undefined"!==typeof r.g&&r.g.crypto&&(n=r.g.crypto),!n)try{n=r(2480)}catch(g){}var i=function(){if(n){if("function"===typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(g){}if("function"===typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(g){}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),o={},s=o.lib={},u=s.Base={extend:function(e){var t=a(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=s.WordArray=u.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var a=0;a<i;a++){var o=r[a>>>2]>>>24-a%4*8&255;t[n+a>>>2]|=o<<24-(n+a)%4*8}else for(var s=0;s<i;s+=4)t[n+s>>>2]=r[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(i());return new l.init(t,e)}}),c=o.enc={},d=c.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var a=t[i>>>2]>>>24-i%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l.init(r,t/2)}},f=c.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var a=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(a))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l.init(r,t)}},h=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},p=s.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,i=n.words,a=n.sigBytes,o=this.blockSize,s=a/(4*o),u=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*o,c=e.min(4*u,a);if(u){for(var d=0;d<u;d+=o)this._doProcessBlock(i,d);r=i.splice(0,u),n.sigBytes-=c}return new l.init(r,c)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),v=(s.Hasher=p.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new v.HMAC.init(e,r).finalize(t)}}}),o.algo={});return o}(Math);return e}()},7492:function(e,t,r){!function(t,n){var i;e.exports=(i=r(8443),function(){var e=i,t=e.lib.WordArray;function r(e,r,n){for(var i=[],a=0,o=0;o<r;o++)if(o%4){var s=n[e.charCodeAt(o-1)]<<o%4*2|n[e.charCodeAt(o)]>>>6-o%4*2;i[a>>>2]|=s<<24-a%4*8,a++}return t.create(i,a)}e.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],a=0;a<r;a+=3)for(var o=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<r;s++)i.push(n.charAt(o>>>6*(3-s)&63));var u=n.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var a=0;a<n.length;a++)i[n.charCodeAt(a)]=a}var o=n.charAt(64);if(o){var s=e.indexOf(o);-1!==s&&(t=s)}return r(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),i.enc.Base64)}()},3709:function(e,t,r){!function(t,n){var i;e.exports=(i=r(8443),function(){var e=i,t=e.lib.WordArray;function r(e,r,n){for(var i=[],a=0,o=0;o<r;o++)if(o%4){var s=n[e.charCodeAt(o-1)]<<o%4*2|n[e.charCodeAt(o)]>>>6-o%4*2;i[a>>>2]|=s<<24-a%4*8,a++}return t.create(i,a)}e.enc.Base64url={stringify:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.words,n=e.sigBytes,i=t?this._safe_map:this._map;e.clamp();for(var a=[],o=0;o<n;o+=3)for(var s=(r[o>>>2]>>>24-o%4*8&255)<<16|(r[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|r[o+2>>>2]>>>24-(o+2)%4*8&255,u=0;u<4&&o+.75*u<n;u++)a.push(i.charAt(s>>>6*(3-u)&63));var l=i.charAt(64);if(l)for(;a.length%4;)a.push(l);return a.join("")},parse:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.length,i=t?this._safe_map:this._map,a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var o=0;o<i.length;o++)a[i.charCodeAt(o)]=o}var s=i.charAt(64);if(s){var u=e.indexOf(s);-1!==u&&(n=u)}return r(e,n,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),i.enc.Base64url)}()},7519:function(e,t,r){!function(t,n){var i;e.exports=(i=r(8443),function(){var e=i,t=e.lib.WordArray,r=e.enc;function n(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i+=2){var a=t[i>>>2]>>>16-i%4*8&65535;n.push(String.fromCharCode(a))}return n.join("")},parse:function(e){for(var r=e.length,n=[],i=0;i<r;i++)n[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(n,2*r)}},r.Utf16LE={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],a=0;a<r;a+=2){var o=n(t[a>>>2]>>>16-a%4*8&65535);i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var r=e.length,i=[],a=0;a<r;a++)i[a>>>1]|=n(e.charCodeAt(a)<<16-a%2*16);return t.create(i,2*r)}}}(),i.enc.Utf16)}()},254:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(3181),r(8088),function(){var e=a,t=e.lib,r=t.Base,n=t.WordArray,i=e.algo,o=i.MD5,s=i.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,i=this.cfg,a=i.hasher.create(),o=n.create(),s=o.words,u=i.keySize,l=i.iterations;s.length<u;){r&&a.update(r),r=a.update(e).finalize(t),a.reset();for(var c=1;c<l;c++)r=a.finalize(r),a.reset();o.concat(r)}return o.sigBytes=4*u,o}});e.EvpKDF=function(e,t,r){return s.create(r).compute(e,t)}}(),a.EvpKDF)}()},9477:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(6018),function(e){var t=a,r=t.lib.CipherParams,n=t.enc.Hex;t.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){var t=n.parse(e);return r.create({ciphertext:t})}}}(),a.format.Hex)}()},8088:function(e,t,r){!function(t,n){var i;e.exports=(i=r(8443),void function(){var e=i,t=e.lib.Base,r=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),o=this._iKey=t.clone(),s=a.words,u=o.words,l=0;l<n;l++)s[l]^=1549556828,u[l]^=909522486;a.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})}())}()},2984:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(2771),r(5716),r(7519),r(7492),r(3709),r(6707),r(3181),r(5242),r(2038),r(1509),r(6579),r(5060),r(4058),r(8088),r(6657),r(254),r(6018),r(3251),r(8449),r(1637),r(7355),r(701),r(1903),r(8916),r(2360),r(8181),r(3751),r(9477),r(5542),r(8002),r(6056),r(957),r(8212),a)}()},5716:function(e,t,r){!function(t,n){var i;e.exports=(i=r(8443),function(){if("function"==typeof ArrayBuffer){var e=i.lib.WordArray,t=e.init,r=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var r=e.byteLength,n=[],i=0;i<r;i++)n[i>>>2]|=e[i]<<24-i%4*8;t.call(this,n,r)}else t.apply(this,arguments)};r.prototype=e}}(),i.lib.WordArray)}()},6707:function(e,t,r){!function(t,n){var i;e.exports=(i=r(8443),function(e){var t=i,r=t.lib,n=r.WordArray,a=r.Hasher,o=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var u=o.MD5=a.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var a=this._hash.words,o=e[t+0],u=e[t+1],h=e[t+2],p=e[t+3],v=e[t+4],g=e[t+5],m=e[t+6],y=e[t+7],E=e[t+8],b=e[t+9],_=e[t+10],D=e[t+11],S=e[t+12],w=e[t+13],T=e[t+14],C=e[t+15],A=a[0],x=a[1],k=a[2],L=a[3];A=l(A,x,k,L,o,7,s[0]),L=l(L,A,x,k,u,12,s[1]),k=l(k,L,A,x,h,17,s[2]),x=l(x,k,L,A,p,22,s[3]),A=l(A,x,k,L,v,7,s[4]),L=l(L,A,x,k,g,12,s[5]),k=l(k,L,A,x,m,17,s[6]),x=l(x,k,L,A,y,22,s[7]),A=l(A,x,k,L,E,7,s[8]),L=l(L,A,x,k,b,12,s[9]),k=l(k,L,A,x,_,17,s[10]),x=l(x,k,L,A,D,22,s[11]),A=l(A,x,k,L,S,7,s[12]),L=l(L,A,x,k,w,12,s[13]),k=l(k,L,A,x,T,17,s[14]),A=c(A,x=l(x,k,L,A,C,22,s[15]),k,L,u,5,s[16]),L=c(L,A,x,k,m,9,s[17]),k=c(k,L,A,x,D,14,s[18]),x=c(x,k,L,A,o,20,s[19]),A=c(A,x,k,L,g,5,s[20]),L=c(L,A,x,k,_,9,s[21]),k=c(k,L,A,x,C,14,s[22]),x=c(x,k,L,A,v,20,s[23]),A=c(A,x,k,L,b,5,s[24]),L=c(L,A,x,k,T,9,s[25]),k=c(k,L,A,x,p,14,s[26]),x=c(x,k,L,A,E,20,s[27]),A=c(A,x,k,L,w,5,s[28]),L=c(L,A,x,k,h,9,s[29]),k=c(k,L,A,x,y,14,s[30]),A=d(A,x=c(x,k,L,A,S,20,s[31]),k,L,g,4,s[32]),L=d(L,A,x,k,E,11,s[33]),k=d(k,L,A,x,D,16,s[34]),x=d(x,k,L,A,T,23,s[35]),A=d(A,x,k,L,u,4,s[36]),L=d(L,A,x,k,v,11,s[37]),k=d(k,L,A,x,y,16,s[38]),x=d(x,k,L,A,_,23,s[39]),A=d(A,x,k,L,w,4,s[40]),L=d(L,A,x,k,o,11,s[41]),k=d(k,L,A,x,p,16,s[42]),x=d(x,k,L,A,m,23,s[43]),A=d(A,x,k,L,b,4,s[44]),L=d(L,A,x,k,S,11,s[45]),k=d(k,L,A,x,C,16,s[46]),A=f(A,x=d(x,k,L,A,h,23,s[47]),k,L,o,6,s[48]),L=f(L,A,x,k,y,10,s[49]),k=f(k,L,A,x,T,15,s[50]),x=f(x,k,L,A,g,21,s[51]),A=f(A,x,k,L,S,6,s[52]),L=f(L,A,x,k,p,10,s[53]),k=f(k,L,A,x,_,15,s[54]),x=f(x,k,L,A,u,21,s[55]),A=f(A,x,k,L,E,6,s[56]),L=f(L,A,x,k,C,10,s[57]),k=f(k,L,A,x,m,15,s[58]),x=f(x,k,L,A,w,21,s[59]),A=f(A,x,k,L,v,6,s[60]),L=f(L,A,x,k,D,10,s[61]),k=f(k,L,A,x,h,15,s[62]),x=f(x,k,L,A,b,21,s[63]),a[0]=a[0]+A|0,a[1]=a[1]+x|0,a[2]=a[2]+k|0,a[3]=a[3]+L|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var a=e.floor(n/4294967296),o=n;r[15+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),r[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(r.length+1),this._process();for(var s=this._hash,u=s.words,l=0;l<4;l++){var c=u[l];u[l]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return s},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,r,n,i,a,o){var s=e+(t&r|~t&n)+i+o;return(s<<a|s>>>32-a)+t}function c(e,t,r,n,i,a,o){var s=e+(t&n|r&~n)+i+o;return(s<<a|s>>>32-a)+t}function d(e,t,r,n,i,a,o){var s=e+(t^r^n)+i+o;return(s<<a|s>>>32-a)+t}function f(e,t,r,n,i,a,o){var s=e+(r^(t|~n))+i+o;return(s<<a|s>>>32-a)+t}t.MD5=a._createHelper(u),t.HmacMD5=a._createHmacHelper(u)}(Math),i.MD5)}()},3251:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(6018),a.mode.CFB=function(){var e=a.lib.BlockCipherMode.extend();function t(e,t,r,n){var i,a=this._iv;a?(i=a.slice(0),this._iv=void 0):i=this._prevBlock,n.encryptBlock(i,0);for(var o=0;o<r;o++)e[t+o]^=i[o]}return e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize;t.call(this,e,r,i,n),this._prevBlock=e.slice(r,r+i)}}),e.Decryptor=e.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize,a=e.slice(r,r+i);t.call(this,e,r,i,n),this._prevBlock=a}}),e}(),a.mode.CFB)}()},1637:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(6018),a.mode.CTRGladman=function(){var e=a.lib.BlockCipherMode.extend();function t(e){if(255===(e>>24&255)){var t=e>>16&255,r=e>>8&255,n=255&e;255===t?(t=0,255===r?(r=0,255===n?n=0:++n):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=n}else e+=1<<24;return e}function r(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var n=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,a=this._iv,o=this._counter;a&&(o=this._counter=a.slice(0),this._iv=void 0),r(o);var s=o.slice(0);n.encryptBlock(s,0);for(var u=0;u<i;u++)e[t+u]^=s[u]}});return e.Decryptor=n,e}(),a.mode.CTRGladman)}()},8449:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(6018),a.mode.CTR=function(){var e=a.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,a=this._counter;i&&(a=this._counter=i.slice(0),this._iv=void 0);var o=a.slice(0);r.encryptBlock(o,0),a[n-1]=a[n-1]+1|0;for(var s=0;s<n;s++)e[t+s]^=o[s]}});return e.Decryptor=t,e}(),a.mode.CTR)}()},701:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(6018),a.mode.ECB=function(){var e=a.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),a.mode.ECB)}()},7355:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(6018),a.mode.OFB=function(){var e=a.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,a=this._keystream;i&&(a=this._keystream=i.slice(0),this._iv=void 0),r.encryptBlock(a,0);for(var o=0;o<n;o++)e[t+o]^=a[o]}});return e.Decryptor=t,e}(),a.mode.OFB)}()},1903:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(6018),a.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,n=4*t,i=n-r%n,a=r+i-1;e.clamp(),e.words[a>>>2]|=i<<24-a%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},a.pad.Ansix923)}()},8916:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(6018),a.pad.Iso10126={pad:function(e,t){var r=4*t,n=r-e.sigBytes%r;e.concat(a.lib.WordArray.random(n-1)).concat(a.lib.WordArray.create([n<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},a.pad.Iso10126)}()},2360:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(6018),a.pad.Iso97971={pad:function(e,t){e.concat(a.lib.WordArray.create([2147483648],1)),a.pad.ZeroPadding.pad(e,t)},unpad:function(e){a.pad.ZeroPadding.unpad(e),e.sigBytes--}},a.pad.Iso97971)}()},3751:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(6018),a.pad.NoPadding={pad:function(){},unpad:function(){}},a.pad.NoPadding)}()},8181:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(6018),a.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){var t=e.words,r=e.sigBytes-1;for(r=e.sigBytes-1;r>=0;r--)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},a.pad.ZeroPadding)}()},6657:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(3181),r(8088),function(){var e=a,t=e.lib,r=t.Base,n=t.WordArray,i=e.algo,o=i.SHA1,s=i.HMAC,u=i.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,i=s.create(r.hasher,e),a=n.create(),o=n.create([1]),u=a.words,l=o.words,c=r.keySize,d=r.iterations;u.length<c;){var f=i.update(t).finalize(o);i.reset();for(var h=f.words,p=h.length,v=f,g=1;g<d;g++){v=i.finalize(v),i.reset();for(var m=v.words,y=0;y<p;y++)h[y]^=m[y]}a.concat(f),l[0]++}return a.sigBytes=4*c,a}});e.PBKDF2=function(e,t,r){return u.create(r).compute(e,t)}}(),a.PBKDF2)}()},8212:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(7492),r(6707),r(254),r(6018),function(){var e=a,t=e.lib.StreamCipher,r=e.algo,n=[],i=[],o=[],s=r.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)u.call(this);for(i=0;i<8;i++)n[i]^=r[i+4&7];if(t){var a=t.words,o=a[0],s=a[1],l=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=l>>>16|4294901760&c,f=c<<16|65535&l;for(n[0]^=l,n[1]^=d,n[2]^=c,n[3]^=f,n[4]^=l,n[5]^=d,n[6]^=c,n[7]^=f,i=0;i<4;i++)u.call(this)}},_doProcessBlock:function(e,t){var r=this._X;u.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i]},blockSize:4,ivSize:2});function u(){for(var e=this._X,t=this._C,r=0;r<8;r++)i[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,r=0;r<8;r++){var n=e[r]+t[r],a=65535&n,s=n>>>16,u=((a*a>>>17)+a*s>>>15)+s*s,l=((4294901760&n)*n|0)+((65535&n)*n|0);o[r]=u^l}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.RabbitLegacy=t._createHelper(s)}(),a.RabbitLegacy)}()},957:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(7492),r(6707),r(254),r(6018),function(){var e=a,t=e.lib.StreamCipher,r=e.algo,n=[],i=[],o=[],s=r.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,r=0;r<4;r++)u.call(this);for(r=0;r<8;r++)i[r]^=n[r+4&7];if(t){var a=t.words,o=a[0],s=a[1],l=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=l>>>16|4294901760&c,f=c<<16|65535&l;for(i[0]^=l,i[1]^=d,i[2]^=c,i[3]^=f,i[4]^=l,i[5]^=d,i[6]^=c,i[7]^=f,r=0;r<4;r++)u.call(this)}},_doProcessBlock:function(e,t){var r=this._X;u.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i]},blockSize:4,ivSize:2});function u(){for(var e=this._X,t=this._C,r=0;r<8;r++)i[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,r=0;r<8;r++){var n=e[r]+t[r],a=65535&n,s=n>>>16,u=((a*a>>>17)+a*s>>>15)+s*s,l=((4294901760&n)*n|0)+((65535&n)*n|0);o[r]=u^l}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.Rabbit=t._createHelper(s)}(),a.Rabbit)}()},6056:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(7492),r(6707),r(254),r(6018),function(){var e=a,t=e.lib.StreamCipher,r=e.algo,n=r.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,n=this._S=[],i=0;i<256;i++)n[i]=i;i=0;for(var a=0;i<256;i++){var o=i%r,s=t[o>>>2]>>>24-o%4*8&255;a=(a+n[i]+s)%256;var u=n[i];n[i]=n[a],n[a]=u}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,r=this._j,n=0,i=0;i<4;i++){r=(r+e[t=(t+1)%256])%256;var a=e[t];e[t]=e[r],e[r]=a,n|=e[(e[t]+e[r])%256]<<24-8*i}return this._i=t,this._j=r,n}e.RC4=t._createHelper(n);var o=r.RC4Drop=n.extend({cfg:n.cfg.extend({drop:192}),_doReset:function(){n._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});e.RC4Drop=t._createHelper(o)}(),a.RC4)}()},4058:function(e,t,r){!function(t,n){var i;e.exports=(i=r(8443),function(e){var t=i,r=t.lib,n=r.WordArray,a=r.Hasher,o=t.algo,s=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),c=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=n.create([0,1518500249,1859775393,2400959708,2840853838]),f=n.create([1352829926,1548603684,1836072691,2053994217,0]),h=o.RIPEMD160=a.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var a,o,h,b,_,D,S,w,T,C,A,x=this._hash.words,k=d.words,L=f.words,F=s.words,R=u.words,I=l.words,O=c.words;for(D=a=x[0],S=o=x[1],w=h=x[2],T=b=x[3],C=_=x[4],r=0;r<80;r+=1)A=a+e[t+F[r]]|0,A+=r<16?p(o,h,b)+k[0]:r<32?v(o,h,b)+k[1]:r<48?g(o,h,b)+k[2]:r<64?m(o,h,b)+k[3]:y(o,h,b)+k[4],A=(A=E(A|=0,I[r]))+_|0,a=_,_=b,b=E(h,10),h=o,o=A,A=D+e[t+R[r]]|0,A+=r<16?y(S,w,T)+L[0]:r<32?m(S,w,T)+L[1]:r<48?g(S,w,T)+L[2]:r<64?v(S,w,T)+L[3]:p(S,w,T)+L[4],A=(A=E(A|=0,O[r]))+C|0,D=C,C=T,T=E(w,10),w=S,S=A;A=x[1]+h+T|0,x[1]=x[2]+b+C|0,x[2]=x[3]+_+D|0,x[3]=x[4]+a+S|0,x[4]=x[0]+o+w|0,x[0]=A},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,a=i.words,o=0;o<5;o++){var s=a[o];a[o]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,r){return e^t^r}function v(e,t,r){return e&t|~e&r}function g(e,t,r){return(e|~t)^r}function m(e,t,r){return e&r|t&~r}function y(e,t,r){return e^(t|~r)}function E(e,t){return e<<t|e>>>32-t}t.RIPEMD160=a._createHelper(h),t.HmacRIPEMD160=a._createHmacHelper(h)}(Math),i.RIPEMD160)}()},3181:function(e,t,r){!function(t,n){var i;e.exports=(i=r(8443),function(){var e=i,t=e.lib,r=t.WordArray,n=t.Hasher,a=e.algo,o=[],s=a.SHA1=n.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],a=r[2],s=r[3],u=r[4],l=0;l<80;l++){if(l<16)o[l]=0|e[t+l];else{var c=o[l-3]^o[l-8]^o[l-14]^o[l-16];o[l]=c<<1|c>>>31}var d=(n<<5|n>>>27)+u+o[l];d+=l<20?1518500249+(i&a|~i&s):l<40?1859775393+(i^a^s):l<60?(i&a|i&s|a&s)-1894007588:(i^a^s)-899497514,u=s,s=a,a=i<<30|i>>>2,i=n,n=d}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+a|0,r[3]=r[3]+s|0,r[4]=r[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=n._createHelper(s),e.HmacSHA1=n._createHmacHelper(s)}(),i.SHA1)}()},2038:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(5242),function(){var e=a,t=e.lib.WordArray,r=e.algo,n=r.SHA256,i=r.SHA224=n.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=n._createHelper(i),e.HmacSHA224=n._createHmacHelper(i)}(),a.SHA224)}()},5242:function(e,t,r){!function(t,n){var i;e.exports=(i=r(8443),function(e){var t=i,r=t.lib,n=r.WordArray,a=r.Hasher,o=t.algo,s=[],u=[];!function(){function t(t){for(var r=e.sqrt(t),n=2;n<=r;n++)if(!(t%n))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var n=2,i=0;i<64;)t(n)&&(i<8&&(s[i]=r(e.pow(n,.5))),u[i]=r(e.pow(n,1/3)),i++),n++}();var l=[],c=o.SHA256=a.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],c=r[5],d=r[6],f=r[7],h=0;h<64;h++){if(h<16)l[h]=0|e[t+h];else{var p=l[h-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=l[h-2],m=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[h]=v+l[h-7]+m+l[h-16]}var y=n&i^n&a^i&a,E=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),b=f+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&c^~s&d)+u[h]+l[h];f=d,d=c,c=s,s=o+b|0,o=a,a=i,i=n,n=b+(E+y)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+a|0,r[3]=r[3]+o|0,r[4]=r[4]+s|0,r[5]=r[5]+c|0,r[6]=r[6]+d|0,r[7]=r[7]+f|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=e.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=a._createHelper(c),t.HmacSHA256=a._createHmacHelper(c)}(Math),i.SHA256)}()},5060:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(2771),function(e){var t=a,r=t.lib,n=r.WordArray,i=r.Hasher,o=t.x64.Word,s=t.algo,u=[],l=[],c=[];!function(){for(var e=1,t=0,r=0;r<24;r++){u[e+5*t]=(r+1)*(r+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,a=0;a<24;a++){for(var s=0,d=0,f=0;f<7;f++){if(1&i){var h=(1<<f)-1;h<32?d^=1<<h:s^=1<<h-32}128&i?i=i<<1^113:i<<=1}c[a]=o.create(s,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=o.create()}();var f=s.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,n=this.blockSize/2,i=0;i<n;i++){var a=e[t+2*i],o=e[t+2*i+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(x=r[i]).high^=o,x.low^=a}for(var s=0;s<24;s++){for(var f=0;f<5;f++){for(var h=0,p=0,v=0;v<5;v++)h^=(x=r[f+5*v]).high,p^=x.low;var g=d[f];g.high=h,g.low=p}for(f=0;f<5;f++){var m=d[(f+4)%5],y=d[(f+1)%5],E=y.high,b=y.low;for(h=m.high^(E<<1|b>>>31),p=m.low^(b<<1|E>>>31),v=0;v<5;v++)(x=r[f+5*v]).high^=h,x.low^=p}for(var _=1;_<25;_++){var D=(x=r[_]).high,S=x.low,w=u[_];w<32?(h=D<<w|S>>>32-w,p=S<<w|D>>>32-w):(h=S<<w-32|D>>>64-w,p=D<<w-32|S>>>64-w);var T=d[l[_]];T.high=h,T.low=p}var C=d[0],A=r[0];for(C.high=A.high,C.low=A.low,f=0;f<5;f++)for(v=0;v<5;v++){var x=r[_=f+5*v],k=d[_],L=d[(f+1)%5+5*v],F=d[(f+2)%5+5*v];x.high=k.high^~L.high&F.high,x.low=k.low^~L.low&F.low}x=r[0];var R=c[s];x.high^=R.high,x.low^=R.low}},_doFinalize:function(){var t=this._data,r=t.words,i=(this._nDataBytes,8*t.sigBytes),a=32*this.blockSize;r[i>>>5]|=1<<24-i%32,r[(e.ceil((i+1)/a)*a>>>5)-1]|=128,t.sigBytes=4*r.length,this._process();for(var o=this._state,s=this.cfg.outputLength/8,u=s/8,l=[],c=0;c<u;c++){var d=o[c],f=d.high,h=d.low;f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),l.push(h),l.push(f)}return new n.init(l,s)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}});t.SHA3=i._createHelper(f),t.HmacSHA3=i._createHmacHelper(f)}(Math),a.SHA3)}()},6579:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(2771),r(1509),function(){var e=a,t=e.x64,r=t.Word,n=t.WordArray,i=e.algo,o=i.SHA512,s=i.SHA384=o.extend({_doReset:function(){this._hash=new n.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=o._createHelper(s),e.HmacSHA384=o._createHmacHelper(s)}(),a.SHA384)}()},1509:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(2771),function(){var e=a,t=e.lib.Hasher,r=e.x64,n=r.Word,i=r.WordArray,o=e.algo;function s(){return n.create.apply(n,arguments)}var u=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=s()}();var c=o.SHA512=t.extend({_doReset:function(){this._hash=new i.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],c=r[5],d=r[6],f=r[7],h=n.high,p=n.low,v=i.high,g=i.low,m=a.high,y=a.low,E=o.high,b=o.low,_=s.high,D=s.low,S=c.high,w=c.low,T=d.high,C=d.low,A=f.high,x=f.low,k=h,L=p,F=v,R=g,I=m,O=y,P=E,M=b,B=_,N=D,U=S,j=w,H=T,G=C,K=A,z=x,V=0;V<80;V++){var W,q,Z=l[V];if(V<16)q=Z.high=0|e[t+2*V],W=Z.low=0|e[t+2*V+1];else{var Y=l[V-15],$=Y.high,X=Y.low,Q=($>>>1|X<<31)^($>>>8|X<<24)^$>>>7,J=(X>>>1|$<<31)^(X>>>8|$<<24)^(X>>>7|$<<25),ee=l[V-2],te=ee.high,re=ee.low,ne=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,ie=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),ae=l[V-7],oe=ae.high,se=ae.low,ue=l[V-16],le=ue.high,ce=ue.low;q=(q=(q=Q+oe+((W=J+se)>>>0<J>>>0?1:0))+ne+((W+=ie)>>>0<ie>>>0?1:0))+le+((W+=ce)>>>0<ce>>>0?1:0),Z.high=q,Z.low=W}var de,fe=B&U^~B&H,he=N&j^~N&G,pe=k&F^k&I^F&I,ve=L&R^L&O^R&O,ge=(k>>>28|L<<4)^(k<<30|L>>>2)^(k<<25|L>>>7),me=(L>>>28|k<<4)^(L<<30|k>>>2)^(L<<25|k>>>7),ye=(B>>>14|N<<18)^(B>>>18|N<<14)^(B<<23|N>>>9),Ee=(N>>>14|B<<18)^(N>>>18|B<<14)^(N<<23|B>>>9),be=u[V],_e=be.high,De=be.low,Se=K+ye+((de=z+Ee)>>>0<z>>>0?1:0),we=me+ve;K=H,z=G,H=U,G=j,U=B,j=N,B=P+(Se=(Se=(Se=Se+fe+((de+=he)>>>0<he>>>0?1:0))+_e+((de+=De)>>>0<De>>>0?1:0))+q+((de+=W)>>>0<W>>>0?1:0))+((N=M+de|0)>>>0<M>>>0?1:0)|0,P=I,M=O,I=F,O=R,F=k,R=L,k=Se+(ge+pe+(we>>>0<me>>>0?1:0))+((L=de+we|0)>>>0<de>>>0?1:0)|0}p=n.low=p+L,n.high=h+k+(p>>>0<L>>>0?1:0),g=i.low=g+R,i.high=v+F+(g>>>0<R>>>0?1:0),y=a.low=y+O,a.high=m+I+(y>>>0<O>>>0?1:0),b=o.low=b+M,o.high=E+P+(b>>>0<M>>>0?1:0),D=s.low=D+N,s.high=_+B+(D>>>0<N>>>0?1:0),w=c.low=w+j,c.high=S+U+(w>>>0<j>>>0?1:0),C=d.low=C+G,d.high=T+H+(C>>>0<G>>>0?1:0),x=f.low=x+z,f.high=A+K+(x>>>0<z>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(n+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(c),e.HmacSHA512=t._createHmacHelper(c)}(),a.SHA512)}()},8002:function(e,t,r){!function(t,n,i){var a;e.exports=(a=r(8443),r(7492),r(6707),r(254),r(6018),function(){var e=a,t=e.lib,r=t.WordArray,n=t.BlockCipher,i=e.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=i.DES=n.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;r<56;r++){var n=o[r]-1;t[r]=e[n>>>5]>>>31-n%32&1}for(var i=this._subKeys=[],a=0;a<16;a++){var l=i[a]=[],c=u[a];for(r=0;r<24;r++)l[r/6|0]|=t[(s[r]-1+c)%28]<<31-r%6,l[4+(r/6|0)]|=t[28+(s[r+24]-1+c)%28]<<31-r%6;for(l[0]=l[0]<<1|l[0]>>>31,r=1;r<7;r++)l[r]=l[r]>>>4*(r-1)+3;l[7]=l[7]<<5|l[7]>>>27}var d=this._invSubKeys=[];for(r=0;r<16;r++)d[r]=i[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,r){this._lBlock=e[t],this._rBlock=e[t+1],f.call(this,4,252645135),f.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),f.call(this,1,1431655765);for(var n=0;n<16;n++){for(var i=r[n],a=this._lBlock,o=this._rBlock,s=0,u=0;u<8;u++)s|=l[u][((o^i[u])&c[u])>>>0];this._lBlock=o,this._rBlock=a^s}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,f.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),f.call(this,16,65535),f.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function f(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function h(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}e.DES=n._createHelper(d);var p=i.TripleDES=n.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),i=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(r.create(t)),this._des2=d.createEncryptor(r.create(n)),this._des3=d.createEncryptor(r.create(i))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=n._createHelper(p)}(),a.TripleDES)}()},2771:function(e,t,r){!function(t,n){var i;e.exports=(i=r(8443),function(e){var t=i,r=t.lib,n=r.Base,a=r.WordArray,o=t.x64={};o.Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),o.WordArray=n.extend({init:function(t,r){t=this.words=t||[],this.sigBytes=r!=e?r:8*t.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;n<t;n++){var i=e[n];r.push(i.high),r.push(i.low)}return a.create(r,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),r=t.length,i=0;i<r;i++)t[i]=t[i].clone();return e}})}(),i)}()},2342:function(e){var t;"undefined"!==typeof window&&(t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function a(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,n,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new o(r,n||e,a),u=i?i+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function u(e,t){0===--e._eventsCount?e._events=new a:delete e._events[t]}function l(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),l.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},l.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,a=r.length,o=new Array(a);n<a;n++)o[n]=r[n].fn;return o},l.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,n,a,o){var s=i?i+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,a),!0;case 6:return c.fn.call(c.context,t,r,n,a,o),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,n);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},l.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},l.prototype.removeListener=function(e,t,r,n){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return u(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||u(this,a);else{for(var s=0,l=[],c=o.length;s<c;s++)(o[s].fn!==t||n&&!o[s].once||r&&o[s].context!==r)&&l.push(o[s]);l.length?this._events[a]=1===l.length?l[0]:l:u(this,a)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&u(this,t)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,e.exports=l},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,r){!function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,n=/^([^\/?#]*)([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=n.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=o.normalizePath(d)}else l.path=s.path,a.params||(l.params=s.params,a.query||(l.query=s.query));return null===l.path&&(l.path=r.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(l)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o}()},"./node_modules/webworkify-webpack/index.js":function(e,t,r){function n(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var n=r(r.s=ENTRY_MODULE);return n.default||n}var i="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function o(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e,t,n){var s={};s[n]=[];var u=t.toString(),l=u.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return s;for(var c,d=l[1],f=new RegExp("(\\\\n|\\W)"+o(d)+a,"g");c=f.exec(u);)"dll-reference"!==c[3]&&s[n].push(c[3]);for(f=new RegExp("\\("+o(d)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+a,"g");c=f.exec(u);)e[c[2]]||(s[n].push(c[1]),e[c[2]]=r(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);for(var h,p=Object.keys(s),v=0;v<p.length;v++)for(var g=0;g<s[p[v]].length;g++)h=s[p[v]][g],isNaN(1*h)||(s[p[v]][g]=1*s[p[v]][g]);return s}function u(e){return Object.keys(e).reduce((function(t,r){return t||e[r].length>0}),!1)}e.exports=function(e,t){t=t||{};var i={main:r.m},a=t.all?{main:Object.keys(i.main)}:function(e,t){for(var r={main:[t]},n={main:[]},i={main:{}};u(r);)for(var a=Object.keys(r),o=0;o<a.length;o++){var l=a[o],c=r[l].pop();if(i[l]=i[l]||{},!i[l][c]&&e[l][c]){i[l][c]=!0,n[l]=n[l]||[],n[l].push(c);for(var d=s(e,e[l][c],l),f=Object.keys(d),h=0;h<f.length;h++)r[f[h]]=r[f[h]]||[],r[f[h]]=r[f[h]].concat(d[f[h]])}}return n}(i,e),o="";Object.keys(a).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;a[e][t];)t++;a[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a[e].map((function(t){return JSON.stringify(t)+": "+i[e][t].toString()})).join(",")+"});\n"})),o=o+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.main.map((function(e){return JSON.stringify(e)+": "+i.main[e].toString()})).join(",")+"}))(self);";var l=new window.Blob([o],{type:"text/javascript"});if(t.bare)return l;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),d=new window.Worker(c);return d.objectURL=c,d}},"./src/config.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"hlsDefaultConfig",(function(){return S})),r.d(t,"mergeConfig",(function(){return w})),r.d(t,"enableStreamingMode",(function(){return T}));var n=r("./src/controller/abr-controller.ts"),i=r("./src/controller/audio-stream-controller.ts"),a=r("./src/controller/audio-track-controller.ts"),o=r("./src/controller/subtitle-stream-controller.ts"),s=r("./src/controller/subtitle-track-controller.ts"),u=r("./src/controller/buffer-controller.ts"),l=r("./src/controller/timeline-controller.ts"),c=r("./src/controller/cap-level-controller.ts"),d=r("./src/controller/fps-controller.ts"),f=r("./src/controller/eme-controller.ts"),h=r("./src/controller/cmcd-controller.ts"),p=r("./src/utils/xhr-loader.ts"),v=r("./src/utils/fetch-loader.ts"),g=r("./src/utils/cues.ts"),m=r("./src/utils/mediakeys-helper.ts"),y=r("./src/utils/logger.ts");function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E.apply(this,arguments)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=_(_({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:p.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:n.default,bufferController:u.default,capLevelController:c.default,fpsController:d.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:m.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},{cueHandler:g.default,enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:o.SubtitleStreamController,subtitleTrackController:s.default,timelineController:l.TimelineController,audioStreamController:i.default,audioTrackController:a.default,emeController:f.default,cmcdController:h.default});function w(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return E({},e,t)}function T(e){var t=e.loader;t!==v.default&&t!==p.default?(y.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):Object(v.fetchSupported)()&&(e.loader=v.default,e.progressive=!0,e.enableSoftwareAES=!0,y.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/polyfills/number.ts"),i=r("./src/utils/ewma-bandwidth-estimator.ts"),a=r("./src/events.ts"),o=r("./src/utils/buffer-helper.ts"),s=r("./src/errors.ts"),u=r("./src/types/loader.ts"),l=r("./src/utils/logger.ts");function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d=function(){function e(e){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;var t=e.config;this.bwEstimator=new i.default(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}var t,r,d,f=e.prototype;return f.registerListeners=function(){var e=this.hls;e.on(a.Events.FRAG_LOADING,this.onFragLoading,this),e.on(a.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(a.Events.ERROR,this.onError,this)},f.unregisterListeners=function(){var e=this.hls;e.off(a.Events.FRAG_LOADING,this.onFragLoading,this),e.off(a.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(a.Events.ERROR,this.onError,this)},f.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},f.onFragLoading=function(e,t){var r,n=t.frag;n.type===u.PlaylistLevelType.MAIN&&(this.timer||(this.fragCurrent=n,this.partCurrent=null!=(r=t.part)?r:null,this.timer=self.setInterval(this.onCheck,100)))},f.onLevelLoaded=function(e,t){var r=this.hls.config;t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)},f._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,r=this.hls,i=r.autoLevelEnabled,s=r.config,u=r.media;if(e&&u){var c=t?t.stats:e.stats,d=t?t.duration:e.duration;if(c.aborted)return l.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(i&&!u.paused&&u.playbackRate&&u.readyState){var f=performance.now()-c.loading.start,h=Math.abs(u.playbackRate);if(!(f<=500*d/h)){var p=r.levels,v=r.minAutoLevel,g=p[e.level],m=c.total||Math.max(c.loaded,Math.round(d*g.maxBitrate/8)),y=Math.max(1,c.bwEstimate?c.bwEstimate/8:1e3*c.loaded/f),E=(m-c.loaded)/y,b=u.currentTime,_=(o.BufferHelper.bufferInfo(u,b,s.maxBufferHole).end-b)/h;if(!(_>=2*d/h||E<=_)){var D,S=Number.POSITIVE_INFINITY;for(D=e.level-1;D>v&&!((S=d*p[D].maxBitrate/(6.4*y))<_);D--);if(!(S>=E)){var w=this.bwEstimator.getEstimate();l.logger.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+D+"\n      Current BW estimate: "+(Object(n.isFiniteNumber)(w)?(w/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+E.toFixed(3)+" s\n      Estimated load time for the next fragment: "+S.toFixed(3)+" s\n      Time to underbuffer: "+_.toFixed(3)+" s"),r.nextLoadLevel=D,this.bwEstimator.sample(f,c.loaded),this.clearTimer(),e.loader&&(this.fragCurrent=this.partCurrent=null,e.loader.abort()),r.trigger(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:c})}}}}}},f.onFragLoaded=function(e,t){var r=t.frag,i=t.part;if(r.type===u.PlaylistLevelType.MAIN&&Object(n.isFiniteNumber)(r.sn)){var o=i?i.stats:r.stats,s=i?i.duration:r.duration;if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var l=this.hls.levels[r.level],c=(l.loaded?l.loaded.bytes:0)+o.loaded,d=(l.loaded?l.loaded.duration:0)+s;l.loaded={bytes:c,duration:d},l.realBitrate=Math.round(8*c/d)}if(r.bitrateTest){var f={stats:o,frag:r,part:i,id:r.type};this.onFragBuffered(a.Events.FRAG_BUFFERED,f),r.bitrateTest=!1}}},f.onFragBuffered=function(e,t){var r=t.frag,n=t.part,i=n?n.stats:r.stats;if(!i.aborted&&r.type===u.PlaylistLevelType.MAIN&&"initSegment"!==r.sn){var a=i.parsing.end-i.loading.start;this.bwEstimator.sample(a,i.loaded),i.bwEstimate=this.bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},f.onError=function(e,t){switch(t.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},f.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},f.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,r=this.hls,n=r.maxAutoLevel,i=r.config,a=r.minAutoLevel,s=r.media,u=t?t.duration:e?e.duration:0,c=s?s.currentTime:0,d=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,f=this.bwEstimator?this.bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,h=(o.BufferHelper.bufferInfo(s,c,i.maxBufferHole).end-c)/d,p=this.findBestLevel(f,a,n,h,i.abrBandWidthFactor,i.abrBandWidthUpFactor);if(p>=0)return p;l.logger.trace((h?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var v=u?Math.min(u,i.maxStarvationDelay):i.maxStarvationDelay,g=i.abrBandWidthFactor,m=i.abrBandWidthUpFactor;if(!h){var y=this.bitrateTestDelay;y&&(v=(u?Math.min(u,i.maxLoadingDelay):i.maxLoadingDelay)-y,l.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*v)+" ms"),g=m=1)}return p=this.findBestLevel(f,a,n,h+v,g,m),Math.max(p,0)},f.findBestLevel=function(e,t,r,n,i,a){for(var o,s=this.fragCurrent,u=this.partCurrent,c=this.lastLoadedFragLevel,d=this.hls.levels,f=d[c],h=!(null===f||void 0===f||null===(o=f.details)||void 0===o||!o.live),p=null===f||void 0===f?void 0:f.codecSet,v=u?u.duration:s?s.duration:0,g=r;g>=t;g--){var m=d[g];if(m&&(!p||m.codecSet===p)){var y=m.details,E=(u?null===y||void 0===y?void 0:y.partTarget:null===y||void 0===y?void 0:y.averagetargetduration)||v,b=void 0;b=g<=c?i*e:a*e;var _=d[g].maxBitrate,D=_*E/b;if(l.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+g+"/"+Math.round(b)+"/"+_+"/"+E+"/"+n+"/"+D),b>_&&(!D||h&&!this.bitrateTestDelay||D<n))return g}}return-1},t=e,(r=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(-1!==e&&(!t||!t.canEstimate()))return e;var r=this.getNextABRAutoLevel();return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}}])&&c(t.prototype,r),d&&c(t,d),e}();t.default=d},"./src/controller/audio-stream-controller.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/polyfills/number.ts"),i=r("./src/controller/base-stream-controller.ts"),a=r("./src/events.ts"),o=r("./src/utils/buffer-helper.ts"),s=r("./src/controller/fragment-tracker.ts"),u=r("./src/types/level.ts"),l=r("./src/types/loader.ts"),c=r("./src/loader/fragment.ts"),d=r("./src/demux/chunk-cache.ts"),f=r("./src/demux/transmuxer-interface.ts"),h=r("./src/types/transmuxer.ts"),p=r("./src/controller/fragment-finders.ts"),v=r("./src/utils/discontinuities.ts"),g=r("./src/errors.ts"),m=r("./src/utils/logger.ts");function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}var b=function(e){var t,r;function b(t,r){var n;return(n=e.call(this,t,r,"[audio-stream-controller]")||this).videoBuffer=null,n.videoTrackCC=-1,n.waitingVideoCC=-1,n.audioSwitch=!1,n.trackId=-1,n.waitingData=null,n.mainDetails=null,n.bufferFlushed=!1,n._registerListeners(),n}r=e,(t=b).prototype=Object.create(r.prototype),t.prototype.constructor=t,E(t,r);var _=b.prototype;return _.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},_._registerListeners=function(){var e=this.hls;e.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(a.Events.ERROR,this.onError,this),e.on(a.Events.BUFFER_RESET,this.onBufferReset,this),e.on(a.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},_._unregisterListeners=function(){var e=this.hls;e.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(a.Events.ERROR,this.onError,this),e.off(a.Events.BUFFER_RESET,this.onBufferReset,this),e.off(a.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},_.onInitPtsFound=function(e,t){var r=t.frag,n=t.id,a=t.initPTS;if("main"===n){var o=r.cc;this.initPTS[r.cc]=a,this.log("InitPTS for cc: "+o+" found from main: "+a),this.videoTrackCC=o,this.state===i.State.WAITING_INIT_PTS&&this.tick()}},_.startLoad=function(e){if(!this.levels)return this.startPosition=e,void(this.state=i.State.STOPPED);var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=i.State.IDLE):(this.loadedmetadata=!1,this.state=i.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},_.doTick=function(){switch(this.state){case i.State.IDLE:this.doTickIdle();break;case i.State.WAITING_TRACK:var t,r=this.levels,n=this.trackId,a=null===r||void 0===r||null===(t=r[n])||void 0===t?void 0:t.details;if(a){if(this.waitForCdnTuneIn(a))break;this.state=i.State.WAITING_INIT_PTS}break;case i.State.FRAG_LOADING_WAITING_RETRY:var s,u=performance.now(),l=this.retryDate;(!l||u>=l||null!==(s=this.media)&&void 0!==s&&s.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=i.State.IDLE);break;case i.State.WAITING_INIT_PTS:var c=this.waitingData;if(c){var d=c.frag,f=c.part,h=c.cache,v=c.complete;if(void 0!==this.initPTS[d.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=i.State.FRAG_LOADING;var g={frag:d,part:f,payload:h.flush(),networkDetails:null};this._handleFragmentLoadProgress(g),v&&e.prototype._handleFragmentLoadComplete.call(this,g)}else if(this.videoTrackCC!==this.waitingVideoCC)m.logger.log("Waiting fragment cc ("+d.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var y=this.getLoadPosition(),E=o.BufferHelper.bufferInfo(this.mediaBuffer,y,this.config.maxBufferHole);Object(p.fragmentWithinToleranceTest)(E.end,this.config.maxFragLookUpTolerance,d)<0&&(m.logger.log("Waiting fragment cc ("+d.cc+") @ "+d.start+" cancelled because another fragment at "+E.end+" is needed"),this.clearWaitingFragment())}}else this.state=i.State.IDLE}this.onTickEnd()},_.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=i.State.IDLE)},_.onTickEnd=function(){var e=this.media;if(e&&e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length&&(this.loadedmetadata=!0),this.lastCurrentTime=e.currentTime}},_.doTickIdle=function(){var e,t,r=this.hls,n=this.levels,o=this.media,s=this.trackId,u=r.config;if(n&&n[s]&&(o||!this.startFragRequested&&u.startFragPrefetch)){var d=n[s].details;if(!d||d.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(d))this.state=i.State.WAITING_TRACK;else{this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,c.ElementaryStreamTypes.AUDIO,l.PlaylistLevelType.AUDIO));var f=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,l.PlaylistLevelType.AUDIO);if(null!==f){var h=f.len,p=this.getMaxBufferLength(),v=this.audioSwitch;if(!(h>=p)||v){if(!v&&this._streamEnded(f,d))return r.trigger(a.Events.BUFFER_EOS,{type:"audio"}),void(this.state=i.State.ENDED);var g=d.fragments[0].start,m=f.end;if(v){var y=this.getLoadPosition();m=y,d.PTSKnown&&y<g&&(f.end>g||f.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),o.currentTime=g+.05)}var E=this.getNextFragment(m,d);E?"identity"!==(null===(e=E.decryptdata)||void 0===e?void 0:e.keyFormat)||null!==(t=E.decryptdata)&&void 0!==t&&t.key?this.loadFragment(E,d,m):this.loadKey(E,d):this.bufferFlushed=!0}}}}},_.getMaxBufferLength=function(){var t=e.prototype.getMaxBufferLength.call(this),r=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,l.PlaylistLevelType.MAIN);return null===r?t:Math.max(t,r.len)},_.onMediaDetaching=function(){this.videoBuffer=null,e.prototype.onMediaDetaching.call(this)},_.onAudioTracksUpdated=function(e,t){var r=t.audioTracks;this.resetTransmuxer(),this.levels=r.map((function(e){return new u.Level(e)}))},_.onAudioTrackSwitching=function(e,t){var r=!!t.url;this.trackId=t.id;var n=this.fragCurrent;null!==n&&void 0!==n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),r?this.setInterval(100):this.resetTransmuxer(),r?(this.audioSwitch=!0,this.state=i.State.IDLE):this.state=i.State.STOPPED,this.tick()},_.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},_.onLevelLoaded=function(e,t){this.mainDetails=t.details},_.onAudioTrackLoaded=function(e,t){var r,n=this.levels,a=t.details,o=t.id;if(n){this.log("Track "+o+" loaded ["+a.startSN+","+a.endSN+"],duration:"+a.totalduration);var s=n[o],u=0;if(a.live||null!==(r=s.details)&&void 0!==r&&r.live){var l=this.mainDetails;if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed||!l)return;!s.details&&a.hasProgramDateTime&&l.hasProgramDateTime?(Object(v.alignMediaPlaylistByPDT)(a,l),u=a.fragments[0].start):u=this.alignPlaylists(a,s.details)}s.details=a,this.levelLastLoaded=o,this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(s.details,u),this.state!==i.State.WAITING_TRACK||this.waitForCdnTuneIn(a)||(this.state=i.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+o)},_._handleFragmentLoadProgress=function(e){var t,r=e.frag,n=e.part,a=e.payload,o=this.config,s=this.trackId,u=this.levels;if(u){var c=u[s];console.assert(c,"Audio track is defined on fragment load progress");var p=c.details;console.assert(p,"Audio track details are defined on fragment load progress");var v=o.defaultAudioCodec||c.audioCodec||"mp4a.40.2",g=this.transmuxer;g||(g=this.transmuxer=new f.default(this.hls,l.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var y=this.initPTS[r.cc],E=null===(t=r.initSegment)||void 0===t?void 0:t.data;if(void 0!==y){var b=n?n.index:-1,_=-1!==b,D=new h.ChunkMetadata(r.level,r.sn,r.stats.chunkCount,a.byteLength,b,_);g.push(a,E,v,"",r,n,p.totalduration,!1,D,y)}else m.logger.log("Unknown video PTS for cc "+r.cc+", waiting for video PTS before demuxing audio frag "+r.sn+" of ["+p.startSN+" ,"+p.endSN+"],track "+s),(this.waitingData=this.waitingData||{frag:r,part:n,cache:new d.default,complete:!1}).cache.push(new Uint8Array(a)),this.waitingVideoCC=this.videoTrackCC,this.state=i.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},_._handleFragmentLoadComplete=function(t){this.waitingData?this.waitingData.complete=!0:e.prototype._handleFragmentLoadComplete.call(this,t)},_.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},_.onBufferCreated=function(e,t){var r=t.tracks.audio;r&&(this.mediaBuffer=r.buffer),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},_.onFragBuffered=function(e,t){var r=t.frag,n=t.part;r.type===l.PlaylistLevelType.AUDIO&&(this.fragContextChanged(r)?this.warn("Fragment "+r.sn+(n?" p: "+n.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==r.sn&&(this.fragPrevious=r,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(r,n)))},_.onError=function(t,r){switch(r.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:case g.ErrorDetails.KEY_LOAD_ERROR:case g.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(l.PlaylistLevelType.AUDIO,r);break;case g.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case g.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==i.State.ERROR&&this.state!==i.State.STOPPED&&(this.state=r.fatal?i.State.ERROR:i.State.IDLE,this.warn(r.details+" while loading frag, switching to "+this.state+" state"));break;case g.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===r.parent&&(this.state===i.State.PARSING||this.state===i.State.PARSED)){var n=!0,a=this.getFwdBufferInfo(this.mediaBuffer,l.PlaylistLevelType.AUDIO);a&&a.len>.5&&(n=!this.reduceMaxBufferLength(a.len)),n&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},_.onBufferFlushed=function(e,t){t.type===c.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},_._handleTransmuxComplete=function(e){var t,r="audio",n=this.hls,o=e.remuxResult,s=e.chunkMeta,u=this.getCurrentContext(s);if(!u)return this.warn("The loading context changed while buffering fragment "+s.sn+" of level "+s.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(s.level);var l=u.frag,d=u.part,f=o.audio,h=o.text,p=o.id3,v=o.initSegment;if(!this.fragContextChanged(l)){if(this.state=i.State.PARSING,this.audioSwitch&&f&&this.completeAudioSwitch(),null!==v&&void 0!==v&&v.tracks&&(this._bufferInitSegment(v.tracks,l,s),n.trigger(a.Events.FRAG_PARSING_INIT_SEGMENT,{frag:l,id:r,tracks:v.tracks})),f){var g=f.startPTS,m=f.endPTS,E=f.startDTS,b=f.endDTS;d&&(d.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:g,endPTS:m,startDTS:E,endDTS:b}),l.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,g,m,E,b),this.bufferFragmentData(f,l,d,s)}if(null!==p&&void 0!==p&&null!==(t=p.samples)&&void 0!==t&&t.length){var _=y({frag:l,id:r},p);n.trigger(a.Events.FRAG_PARSING_METADATA,_)}if(h){var D=y({frag:l,id:r},h);n.trigger(a.Events.FRAG_PARSING_USERDATA,D)}}},_._bufferInitSegment=function(e,t,r){if(this.state===i.State.PARSING){e.video&&delete e.video;var n=e.audio;if(n){n.levelCodec=n.codec,n.id="audio",this.log("Init audio buffer, container:"+n.container+", codecs[parsed]=["+n.codec+"]"),this.hls.trigger(a.Events.BUFFER_CODECS,e);var o=n.initSegment;if(null!==o&&void 0!==o&&o.byteLength){var s={type:"audio",frag:t,part:null,chunkMeta:r,parent:t.type,data:o};this.hls.trigger(a.Events.BUFFER_APPENDING,s)}this.tick()}}},_.loadFragment=function(t,r,a){var o=this.fragmentTracker.getState(t);this.fragCurrent=t,(this.audioSwitch||o===s.FragmentState.NOT_LOADED||o===s.FragmentState.PARTIAL)&&("initSegment"===t.sn?this._loadInitSegment(t):r.live&&!Object(n.isFiniteNumber)(this.initPTS[t.cc])?(this.log("Waiting for video PTS in continuity counter "+t.cc+" of live stream before loading audio fragment "+t.sn+" of level "+this.trackId),this.state=i.State.WAITING_INIT_PTS):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,r,a)))},_.completeAudioSwitch=function(){var t=this.hls,r=this.media,n=this.trackId;r&&(this.log("Switching audio track : flushing all audio"),e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,t.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:n})},b}(i.default);t.default=b},"./src/controller/audio-track-controller.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/events.ts"),i=r("./src/errors.ts"),a=r("./src/controller/base-playlist-controller.ts"),o=r("./src/types/loader.ts");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}var l=function(e){var t,r;function a(t){var r;return(r=e.call(this,t,"[audio-track-controller]")||this).tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.trackName="",r.selectDefaultTrack=!0,r.registerListeners(),r}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,u(t,r);var l,c,d,f=a.prototype;return f.registerListeners=function(){var e=this.hls;e.on(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(n.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(n.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(n.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(n.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(n.Events.ERROR,this.onError,this)},f.unregisterListeners=function(){var e=this.hls;e.off(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(n.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(n.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(n.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(n.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(n.Events.ERROR,this.onError,this)},f.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,e.prototype.destroy.call(this)},f.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},f.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},f.onAudioTrackLoaded=function(e,t){var r=t.id,n=t.details,i=this.tracksInGroup[r];if(i){var a=i.details;i.details=t.details,this.log("audioTrack "+r+" loaded ["+n.startSN+"-"+n.endSN+"]"),r===this.trackId&&(this.retryCount=0,this.playlistLoaded(r,t,a))}else this.warn("Invalid audio track id "+r)},f.onLevelLoading=function(e,t){this.switchLevel(t.level)},f.onLevelSwitching=function(e,t){this.switchLevel(t.level)},f.switchLevel=function(e){var t=this.hls.levels[e];if(null!==t&&void 0!==t&&t.audioGroupIds){var r=t.audioGroupIds[t.urlId];if(this.groupId!==r){this.groupId=r;var i=this.tracks.filter((function(e){return!r||e.groupId===r}));this.selectDefaultTrack&&!i.some((function(e){return e.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=i;var a={audioTracks:i};this.log("Updating audio tracks, "+i.length+' track(s) found in "'+r+'" group-id'),this.hls.trigger(n.Events.AUDIO_TRACKS_UPDATED,a),this.selectInitialTrack()}}},f.onError=function(t,r){e.prototype.onError.call(this,t,r),!r.fatal&&r.context&&r.context.type===o.PlaylistContextType.AUDIO_TRACK&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&this.retryLoadingOrFail(r)},f.setAudioTrack=function(e){var t=this.tracksInGroup;if(e<0||e>=t.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var r=t[this.trackId];this.log("Now switching to audio-track index "+e);var i=t[e],a=i.id,o=i.groupId,s=void 0===o?"":o,u=i.name,l=i.type,c=i.url;if(this.trackId=e,this.trackName=u,this.selectDefaultTrack=!1,this.hls.trigger(n.Events.AUDIO_TRACK_SWITCHING,{id:a,groupId:s,name:u,type:l,url:c}),!i.details||i.details.live){var d=this.switchParams(i.url,null===r||void 0===r?void 0:r.details);this.loadPlaylist(d)}}},f.selectInitialTrack=function(){var e=this.tracksInGroup;console.assert(e.length,"Initial audio track should be selected when tracks are known");var t=this.trackName,r=this.findTrackId(t)||this.findTrackId();-1!==r?this.setAudioTrack(r):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},f.findTrackId=function(e){for(var t=this.tracksInGroup,r=0;r<t.length;r++){var n=t[r];if((!this.selectDefaultTrack||n.default)&&(!e||e===n.name))return n.id}return-1},f.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var r=t.id,i=t.groupId,a=t.url;if(e)try{a=e.addDirectives(a)}catch(o){this.warn("Could not construct new URL with HLS Delivery Directives: "+o)}this.log("loading audio-track playlist for id: "+r),this.clearTimer(),this.hls.trigger(n.Events.AUDIO_TRACK_LOADING,{url:a,id:r,groupId:i,deliveryDirectives:e||null})}},l=a,(c=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}])&&s(l.prototype,c),d&&s(l,d),a}(a.default);t.default=l},"./src/controller/base-playlist-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r("./src/polyfills/number.ts"),i=r("./src/types/level.ts"),a=r("./src/controller/level-helper.ts"),o=r("./src/utils/logger.ts"),s=r("./src/errors.ts"),u=function(){function e(e,t){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=o.logger.log.bind(o.logger,t+":"),this.warn=o.logger.warn.bind(o.logger,t+":"),this.hls=e}var t=e.prototype;return t.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},t.onError=function(e,t){t.fatal&&t.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},t.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},t.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},t.stopLoad=function(){this.canLoad=!1,this.clearTimer()},t.switchParams=function(e,t){var r=null===t||void 0===t?void 0:t.renditionReports;if(r)for(var a=0;a<r.length;a++){var o=r[a],s=""+o.URI;if(s===e.substr(-s.length)){var u=parseInt(o["LAST-MSN"]),l=parseInt(o["LAST-PART"]);if(t&&this.hls.config.lowLatencyMode){var c=Math.min(t.age-t.partTarget,t.targetduration);void 0!==l&&c>t.partTarget&&(l+=1)}if(Object(n.isFiniteNumber)(u))return new i.HlsUrlParameters(u,Object(n.isFiniteNumber)(l)?l:void 0,i.HlsSkip.No)}}},t.loadPlaylist=function(e){},t.shouldLoadTrack=function(e){return this.canLoad&&e&&!!e.url&&(!e.details||e.details.live)},t.playlistLoaded=function(e,t,r){var n=this,i=t.details,o=t.stats,s=o.loading.end?Math.max(0,self.performance.now()-o.loading.end):0;if(i.advancedDateTime=Date.now()-s,i.live||null!==r&&void 0!==r&&r.live){if(i.reloaded(r),r&&this.log("live playlist "+e+" "+(i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:"MISSED")),r&&i.fragments.length>0&&Object(a.mergeDetails)(r,i),!this.canLoad||!i.live)return;var u,l=void 0,c=void 0;if(i.canBlockReload&&i.endSN&&i.advanced){var d=this.hls.config.lowLatencyMode,f=i.lastPartSn,h=i.endSN,p=i.lastPartIndex,v=f===h;-1!==p?(l=v?h+1:f,c=v?d?0:p:p+1):l=h+1;var g=i.age,m=g+i.ageHeader,y=Math.min(m-i.partTarget,1.5*i.targetduration);if(y>0){if(r&&y>r.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+r.tuneInGoal+" to: "+y+" with playlist age: "+i.age),y=0;else{var E=Math.floor(y/i.targetduration);l+=E,void 0!==c&&(c+=Math.round(y%i.targetduration/i.partTarget)),this.log("CDN Tune-in age: "+i.ageHeader+"s last advanced "+g.toFixed(2)+"s goal: "+y+" skip sn "+E+" to part "+c)}i.tuneInGoal=y}if(u=this.getDeliveryDirectives(i,t.deliveryDirectives,l,c),d||!v)return void this.loadPlaylist(u)}else u=this.getDeliveryDirectives(i,t.deliveryDirectives,l,c);var b=Object(a.computeReloadInterval)(i,o);void 0!==l&&i.canBlockReload&&(b-=i.partTarget||1),this.log("reload live playlist "+e+" in "+Math.round(b)+" ms"),this.timer=self.setTimeout((function(){return n.loadPlaylist(u)}),b)}else this.clearTimer()},t.getDeliveryDirectives=function(e,t,r,n){var a=Object(i.getSkipValue)(e,r);return null!==t&&void 0!==t&&t.skip&&e.deltaUpdateFailed&&(r=t.msn,n=t.part,a=i.HlsSkip.No),new i.HlsUrlParameters(r,n,a)},t.retryLoadingOrFail=function(e){var t,r=this,n=this.hls.config,i=this.retryCount<n.levelLoadingMaxRetry;if(i)if(this.retryCount++,e.details.indexOf("LoadTimeOut")>-1&&null!==(t=e.context)&&void 0!==t&&t.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+e.details+'"'),this.loadPlaylist();else{var a=Math.min(Math.pow(2,this.retryCount)*n.levelLoadingRetryDelay,n.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout((function(){return r.loadPlaylist()}),a),this.warn("retry playlist loading #"+this.retryCount+" in "+a+' ms after "'+e.details+'"')}else this.warn('cannot recover from error "'+e.details+'"'),this.clearTimer(),e.fatal=!0;return i},e}()},"./src/controller/base-stream-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"State",(function(){return _})),r.d(t,"default",(function(){return D}));var n=r("./src/polyfills/number.ts"),i=r("./src/task-loop.ts"),a=r("./src/controller/fragment-tracker.ts"),o=r("./src/utils/buffer-helper.ts"),s=r("./src/utils/logger.ts"),u=r("./src/events.ts"),l=r("./src/errors.ts"),c=r("./src/types/transmuxer.ts"),d=r("./src/utils/mp4-tools.ts"),f=r("./src/utils/discontinuities.ts"),h=r("./src/controller/fragment-finders.ts"),p=r("./src/controller/level-helper.ts"),v=r("./src/loader/fragment-loader.ts"),g=r("./src/crypt/decrypter.ts"),m=r("./src/utils/time-ranges.ts"),y=r("./src/types/loader.ts");function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}var _={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BACKTRACKING:"BACKTRACKING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},D=function(e){var t,r;function i(t,r,n){var i;return(i=e.call(this)||this).hls=void 0,i.fragPrevious=null,i.fragCurrent=null,i.fragmentTracker=void 0,i.transmuxer=null,i._state=_.STOPPED,i.media=void 0,i.mediaBuffer=void 0,i.config=void 0,i.bitrateTest=!1,i.lastCurrentTime=0,i.nextLoadPosition=0,i.startPosition=0,i.loadedmetadata=!1,i.fragLoadError=0,i.retryDate=0,i.levels=null,i.fragmentLoader=void 0,i.levelLastLoaded=null,i.startFragRequested=!1,i.decrypter=void 0,i.initPTS=[],i.onvseeking=null,i.onvended=null,i.logPrefix="",i.log=void 0,i.warn=void 0,i.logPrefix=n,i.log=s.logger.log.bind(s.logger,n+":"),i.warn=s.logger.warn.bind(s.logger,n+":"),i.hls=t,i.fragmentLoader=new v.default(t.config),i.fragmentTracker=r,i.config=t.config,i.decrypter=new g.default(t,t.config),t.on(u.Events.KEY_LOADED,i.onKeyLoaded,function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i)),i}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,b(t,r);var D,S,w,T=i.prototype;return T.doTick=function(){this.onTickEnd()},T.onTickEnd=function(){},T.startLoad=function(e){},T.stopLoad=function(){this.fragmentLoader.abort();var e=this.fragCurrent;e&&this.fragmentTracker.removeFragment(e),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=_.STOPPED},T._streamEnded=function(e,t){var r=this.fragCurrent,n=this.fragmentTracker;if(!t.live&&r&&r.sn>=t.endSN&&!e.nextStart){var i=t.partList;if(null!==i&&void 0!==i&&i.length){var s=i[i.length-1];return o.BufferHelper.isBuffered(this.media,s.start+s.duration/2)}var u=n.getState(r);return u===a.FragmentState.PARTIAL||u===a.FragmentState.OK}return!1},T.onMediaAttached=function(e,t){var r=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.state===_.STOPPED&&this.startLoad(n.startPosition)},T.onMediaDetaching=function(){var e=this.media;null!==e&&void 0!==e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},T.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,r=this.media,i=this.mediaBuffer,a=this.state,s=r?r.currentTime:0,u=o.BufferHelper.bufferInfo(i||r,s,e.maxBufferHole);if(this.log("media seeking to "+(Object(n.isFiniteNumber)(s)?s.toFixed(3):s)+", state: "+a),a===_.ENDED)this.resetLoadingState();else if(t&&!u.len){var l=e.maxFragLookUpTolerance,c=t.start-l,d=s>t.start+t.duration+l;(s<c||d)&&(d&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.loader.abort()),this.resetLoadingState())}r&&(this.lastCurrentTime=s),this.loadedmetadata||u.len||(this.nextLoadPosition=this.startPosition=s),this.tickImmediate()},T.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},T.onKeyLoaded=function(e,t){if(this.state===_.KEY_LOADING&&t.frag===this.fragCurrent&&this.levels){this.state=_.IDLE;var r=this.levels[t.frag.level].details;r&&this.loadFragment(t.frag,r,t.frag.start)}},T.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},T.onHandlerDestroyed=function(){this.state=_.STOPPED,this.hls.off(u.Events.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,e.prototype.onHandlerDestroyed.call(this)},T.loadKey=function(e,t){this.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level),this.state=_.KEY_LOADING,this.fragCurrent=e,this.hls.trigger(u.Events.KEY_LOADING,{frag:e})},T.loadFragment=function(e,t,r){this._loadFragForPlayback(e,t,r)},T._loadFragForPlayback=function(e,t,r){var n=this;this._doFragLoad(e,t,r,(function(t){if(n.fragContextChanged(e))return n.warn("Fragment "+e.sn+(t.part?" p: "+t.part.index:"")+" of level "+e.level+" was dropped during download."),void n.fragmentTracker.removeFragment(e);e.stats.chunkCount++,n._handleFragmentLoadProgress(t)})).then((function(t){if(t){n.fragLoadError=0;var r=n.state;if(!n.fragContextChanged(e))return"payload"in t&&(n.log("Loaded fragment "+e.sn+" of level "+e.level),n.hls.trigger(u.Events.FRAG_LOADED,t),n.state===_.BACKTRACKING)?(n.fragmentTracker.backtrack(e,t),void n.resetFragmentLoading(e)):void n._handleFragmentLoadComplete(t);(r===_.FRAG_LOADING||r===_.BACKTRACKING||!n.fragCurrent&&r===_.PARSING)&&(n.fragmentTracker.removeFragment(e),n.state=_.IDLE)}})).catch((function(t){n.warn(t),n.resetFragmentLoading(e)}))},T.flushMainBuffer=function(e,t,r){if(void 0===r&&(r=null),e-t){var n={startOffset:e,endOffset:t,type:r};this.fragLoadError=0,this.hls.trigger(u.Events.BUFFER_FLUSHING,n)}},T._loadInitSegment=function(e){var t=this;this._doFragLoad(e).then((function(r){if(!r||t.fragContextChanged(e)||!t.levels)throw new Error("init load aborted");return r})).then((function(r){var n=t.hls,i=r.payload,a=e.decryptdata;if(i&&i.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var o=self.performance.now();return t.decrypter.webCryptoDecrypt(new Uint8Array(i),a.key.buffer,a.iv.buffer).then((function(t){var i=self.performance.now();return n.trigger(u.Events.FRAG_DECRYPTED,{frag:e,payload:t,stats:{tstart:o,tdecrypt:i}}),r.payload=t,r}))}return r})).then((function(r){var n=t.fragCurrent,i=t.hls,a=t.levels;if(!a)throw new Error("init load aborted, missing levels");var o=a[e.level].details;console.assert(o,"Level details are defined when init segment is loaded");var s=e.stats;t.state=_.IDLE,t.fragLoadError=0,e.data=new Uint8Array(r.payload),s.parsing.start=s.buffering.start=self.performance.now(),s.parsing.end=s.buffering.end=self.performance.now(),r.frag===n&&i.trigger(u.Events.FRAG_BUFFERED,{stats:s,frag:n,part:null,id:e.type}),t.tick()})).catch((function(r){t.warn(r),t.resetFragmentLoading(e)}))},T.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId},T.fragBufferedComplete=function(e,t){var r=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level+" "+m.default.toString(o.BufferHelper.getBuffered(r))),this.state=_.IDLE,this.tick()},T._handleFragmentLoadComplete=function(e){var t=this.transmuxer;if(t){var r=e.frag,n=e.part,i=e.partsLoaded,a=!i||0===i.length||i.some((function(e){return!e})),o=new c.ChunkMetadata(r.level,r.sn,r.stats.chunkCount+1,0,n?n.index:-1,!a);t.flush(o)}},T._handleFragmentLoadProgress=function(e){},T._doFragLoad=function(e,t,r,i){var a=this;if(void 0===r&&(r=null),!this.levels)throw new Error("frag load aborted, missing levels");if(r=Math.max(e.start,r||0),this.config.lowLatencyMode&&t){var o=t.partList;if(o&&i){r>e.end&&t.fragmentHint&&(e=t.fragmentHint);var s=this.getNextPart(o,e,r);if(s>-1){var l=o[s];return this.log("Loading part sn: "+e.sn+" p: "+l.index+" cc: "+e.cc+" of playlist ["+t.startSN+"-"+t.endSN+"] parts [0-"+s+"-"+(o.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(r.toFixed(3))),this.nextLoadPosition=l.start+l.duration,this.state=_.FRAG_LOADING,this.hls.trigger(u.Events.FRAG_LOADING,{frag:e,part:o[s],targetBufferTime:r}),this.doFragPartsLoad(e,o,s,i).catch((function(e){return a.handleFragLoadError(e)}))}if(!e.url||this.loadedEndOfParts(o,r))return Promise.resolve(null)}}return this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(t?"of ["+t.startSN+"-"+t.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(r.toFixed(3))),Object(n.isFiniteNumber)(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=_.FRAG_LOADING,this.hls.trigger(u.Events.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragmentLoader.load(e,i).catch((function(e){return a.handleFragLoadError(e)}))},T.doFragPartsLoad=function(e,t,r,n){var i=this;return new Promise((function(a,o){var s=[];!function r(l){var c=t[l];i.fragmentLoader.loadPart(e,c,n).then((function(n){s[c.index]=n;var o=n.part;i.hls.trigger(u.Events.FRAG_LOADED,n);var d=t[l+1];if(!d||d.fragment!==e)return a({frag:e,part:o,partsLoaded:s});r(l+1)})).catch(o)}(r)}))},T.handleFragLoadError=function(e){var t=e.data;return t&&t.details===l.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(u.Events.ERROR,t),null},T._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(t&&this.state===_.PARSING){var r=t.frag,n=t.part,i=t.level,a=self.performance.now();r.stats.parsing.end=a,n&&(n.stats.parsing.end=a),this.updateLevelTiming(r,n,i,e.partial)}else this.fragCurrent||(this.state=_.IDLE)},T.getCurrentContext=function(e){var t=this.levels,r=e.level,n=e.sn,i=e.part;if(!t||!t[r])return this.warn("Levels object was unset while buffering fragment "+n+" of level "+r+". The current chunk will not be buffered."),null;var a=t[r],o=i>-1?Object(p.getPartWith)(a,n,i):null,s=o?o.fragment:Object(p.getFragmentWithSN)(a,n,this.fragCurrent);return s?{frag:s,part:o,level:a}:null},T.bufferFragmentData=function(e,t,r,n){if(e&&this.state===_.PARSING){var i=e.data1,a=e.data2,o=i;if(i&&a&&(o=Object(d.appendUint8Array)(i,a)),o&&o.length){var s={type:e.type,frag:t,part:r,chunkMeta:n,parent:t.type,data:o};this.hls.trigger(u.Events.BUFFER_APPENDING,s),e.dropped&&e.independent&&!r&&this.flushBufferGap(t)}}},T.flushBufferGap=function(e){var t=this.media;if(t)if(o.BufferHelper.isBuffered(t,t.currentTime)){var r=t.currentTime,n=o.BufferHelper.bufferInfo(t,r,0),i=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),s=Math.max(Math.min(e.start-a,n.end-a),r+a);e.start-s>a&&this.flushMainBuffer(s,e.start)}else this.flushMainBuffer(0,e.start)},T.getFwdBufferInfo=function(e,t){var r=this.config,i=this.getLoadPosition();if(!Object(n.isFiniteNumber)(i))return null;var a=o.BufferHelper.bufferInfo(e,i,r.maxBufferHole);if(0===a.len&&void 0!==a.nextStart){var s=this.fragmentTracker.getBufferedFrag(i,t);if(s&&a.nextStart<s.end)return o.BufferHelper.bufferInfo(e,i,Math.max(a.nextStart,r.maxBufferHole))}return a},T.getMaxBufferLength=function(e){var t,r=this.config;return t=e?Math.max(8*r.maxBufferSize/e,r.maxBufferLength):r.maxBufferLength,Math.min(t,r.maxMaxBufferLength)},T.reduceMaxBufferLength=function(e){var t=this.config,r=e||t.maxBufferLength;return t.maxMaxBufferLength>=r&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},T.getNextFragment=function(e,t){var r,n,i=t.fragments,a=i.length;if(!a)return null;var o,s=this.config,u=i[0].start;if(t.live){var l=s.initialLiveManifestSize;if(a<l)return this.warn("Not enough fragments to start playback (have: "+a+", need: "+l+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(o=this.getInitialLiveFragment(t,i),this.startPosition=o?this.hls.liveSyncPosition||o.start:e)}else e<=u&&(o=i[0]);if(!o){var c=s.lowLatencyMode?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,c,t)}return null===(r=o)||void 0===r||!r.initSegment||null!==(n=o)&&void 0!==n&&n.initSegment.data||this.bitrateTest||(o=o.initSegment),o},T.getNextPart=function(e,t,r){for(var n=-1,i=!1,a=!0,o=0,s=e.length;o<s;o++){var u=e[o];if(a=a&&!u.independent,n>-1&&r<u.start)break;var l=u.loaded;!l&&(i||u.independent||a)&&u.fragment===t&&(n=o),i=l}return n},T.loadedEndOfParts=function(e,t){var r=e[e.length-1];return r&&t>r.start&&r.loaded},T.getInitialLiveFragment=function(e,t){var r=this.fragPrevious,n=null;if(r){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),n=Object(h.findFragmentByPDT)(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!n){var i=r.sn+1;if(i>=e.startSN&&i<=e.endSN){var a=t[i-e.startSN];r.cc===a.cc&&(n=a,this.log("Live playlist, switching playlist, load frag with next SN: "+n.sn))}n||(n=Object(h.findFragWithCC)(t,r.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+n.sn)}}else{var o=this.hls.liveSyncPosition;null!==o&&(n=this.getFragmentAtPosition(o,this.bitrateTest?e.fragmentEnd:e.edge,e))}return n},T.getFragmentAtPosition=function(e,t,r){var n,i=this.config,o=this.fragPrevious,s=r.fragments,u=r.endSN,l=r.fragmentHint,c=i.maxFragLookUpTolerance,d=!!(i.lowLatencyMode&&r.partList&&l);if(d&&l&&!this.bitrateTest&&(s=s.concat(l),u=l.sn),e<t){var f=e>t-c?0:c;n=Object(h.findFragmentByPTS)(o,s,e,f)}else n=s[s.length-1];if(n){var p=n.sn-r.startSN,v=o&&n.level===o.level,g=s[p+1];if(this.fragmentTracker.getState(n)===a.FragmentState.BACKTRACKED){n=null;for(var m=p;s[m]&&this.fragmentTracker.getState(s[m])===a.FragmentState.BACKTRACKED;)n=o?s[m--]:s[--m];n||(n=g)}else o&&n.sn===o.sn&&!d&&v&&(n.sn<u&&this.fragmentTracker.getState(g)!==a.FragmentState.OK?(this.log("SN "+n.sn+" just loaded, load next one: "+g.sn),n=g):n=null)}return n},T.synchronizeToLiveEdge=function(e){var t=this.config,r=this.media;if(r){var n=this.hls.liveSyncPosition,i=r.currentTime,a=e.fragments[0].start,o=e.edge,s=i>=a-t.maxFragLookUpTolerance&&i<=o;if(null!==n&&r.duration>n&&(i<n||!s)){var u=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!s&&r.readyState<4||i<o-u)&&(this.loadedmetadata||(this.nextLoadPosition=n),r.readyState&&(this.warn("Playback: "+i.toFixed(3)+" is located too far from the end of live sliding playlist: "+o+", reset currentTime to : "+n.toFixed(3)),r.currentTime=n))}}},T.alignPlaylists=function(e,t){var r=this.levels,i=this.levelLastLoaded,a=this.fragPrevious,o=null!==i?r[i]:null,s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;var u=e.fragments[0].start,l=!t,c=e.alignedSliding&&Object(n.isFiniteNumber)(u);if(l||!c&&!u){Object(f.alignStream)(a,o,e);var d=e.fragments[0].start;return this.log("Live playlist sliding: "+d.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(a?a.sn:"na")+" fragments: "+s),d}return u},T.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},T.setStartPosition=function(e,t){var r=this.startPosition;if(r<t&&(r=-1),-1===r||-1===this.lastCurrentTime){var i=e.startTimeOffset;Object(n.isFiniteNumber)(i)?(r=t+i,i<0&&(r+=e.totalduration),r=Math.min(Math.max(t,r),t+e.totalduration),this.log("Start time offset "+i+" found in playlist, adjust startPosition to "+r),this.startPosition=r):e.live?r=this.hls.liveSyncPosition||t:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r},T.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},T.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part"+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},T.resetFragmentLoading=function(e){this.fragCurrent&&this.fragContextChanged(e)||(this.state=_.IDLE)},T.onFragmentOrKeyLoadError=function(e,t){if(!t.fatal){var r=t.frag;if(r&&r.type===e){var n=this.fragCurrent;console.assert(n&&r.sn===n.sn&&r.level===n.level&&r.urlId===n.urlId,"Frag load error must match current frag to retry");var i=this.config;if(this.fragLoadError+1<=i.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(r.level))return;var a=Math.min(Math.pow(2,this.fragLoadError)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);this.warn("Fragment "+r.sn+" of "+e+" "+r.level+" failed to load, retrying in "+a+"ms"),this.retryDate=self.performance.now()+a,this.fragLoadError++,this.state=_.FRAG_LOADING_WAITING_RETRY}else t.levelRetry?(e===y.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=_.IDLE):(s.logger.error(t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.stopLoad(),this.state=_.ERROR)}}},T.afterBufferFlushed=function(e,t,r){if(e){var n=o.BufferHelper.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,n,r),this.state===_.ENDED&&this.resetLoadingState()}},T.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=_.IDLE},T.resetLiveStartWhenNotLoaded=function(e){if(!this.loadedmetadata){this.startFragRequested=!1;var t=this.levels?this.levels[e].details:null;if(null!==t&&void 0!==t&&t.live)return this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},T.updateLevelTiming=function(e,t,r,n){var i=this,a=r.details;console.assert(!!a,"level.details must be defined"),Object.keys(e.elementaryStreams).reduce((function(t,o){var s=e.elementaryStreams[o];if(s){var l=s.endPTS-s.startPTS;if(l<=0)return i.warn("Could not parse fragment "+e.sn+" "+o+" duration reliably ("+l+") resetting transmuxer to fallback to playlist timing"),i.resetTransmuxer(),t||!1;var c=n?0:Object(p.updateFragPTSDTS)(a,e,s.startPTS,s.endPTS,s.startDTS,s.endDTS);return i.hls.trigger(u.Events.LEVEL_PTS_UPDATED,{details:a,level:r,drift:c,type:o,frag:e,start:s.startPTS,end:s.endPTS}),!0}return t}),!1)?(this.state=_.PARSED,this.hls.trigger(u.Events.FRAG_PARSED,{frag:e,part:t})):this.resetLoadingState()},T.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},D=i,(S=[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}])&&E(D.prototype,S),w&&E(D,w),i}(i.default)},"./src/controller/buffer-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return h}));var n=r("./src/polyfills/number.ts"),i=r("./src/events.ts"),a=r("./src/utils/logger.ts"),o=r("./src/errors.ts"),s=r("./src/utils/buffer-helper.ts"),u=r("./src/utils/mediasource-helper.ts"),l=r("./src/loader/fragment.ts"),c=r("./src/controller/buffer-operation-queue.ts"),d=Object(u.getMediaSource)(),f=/([ha]vc.)(?:\.[^.,]+)+/,h=function(){function e(e){var t=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var e=t.hls,r=t.media,n=t.mediaSource;a.logger.log("[buffer-controller]: Media source opened"),r&&(t.updateMediaElementDuration(),e.trigger(i.Events.MEDIA_ATTACHED,{media:r})),n&&n.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},this._onMediaSourceClose=function(){a.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){a.logger.log("[buffer-controller]: Media source ended")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}var t=e.prototype;return t.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},t.destroy=function(){this.unregisterListeners(),this.details=null},t.registerListeners=function(){var e=this.hls;e.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(i.Events.BUFFER_RESET,this.onBufferReset,this),e.on(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.on(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(i.Events.BUFFER_EOS,this.onBufferEos,this),e.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(i.Events.FRAG_PARSED,this.onFragParsed,this),e.on(i.Events.FRAG_CHANGED,this.onFragChanged,this)},t.unregisterListeners=function(){var e=this.hls;e.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(i.Events.BUFFER_RESET,this.onBufferReset,this),e.off(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.off(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(i.Events.BUFFER_EOS,this.onBufferEos,this),e.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(i.Events.FRAG_PARSED,this.onFragParsed,this),e.off(i.Events.FRAG_CHANGED,this.onFragChanged,this)},t._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new c.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},t.onManifestParsed=function(e,t){var r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.details=null,a.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},t.onMediaAttaching=function(e,t){var r=this.media=t.media;if(r&&d){var n=this.mediaSource=new d;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),r.src=self.URL.createObjectURL(n),this._objectUrl=r.src}},t.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,r=this._objectUrl;if(t){if(a.logger.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(n){a.logger.warn("[buffer-controller]: onMediaDetaching: "+n.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(r&&self.URL.revokeObjectURL(r),e.src===r?(e.removeAttribute("src"),e.load()):a.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(i.Events.MEDIA_DETACHED,void 0)},t.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach((function(t){var r=e.sourceBuffer[t];try{r&&(e.removeBufferListeners(t),e.mediaSource&&e.mediaSource.removeSourceBuffer(r),e.sourceBuffer[t]=void 0)}catch(n){a.logger.warn("[buffer-controller]: Failed to reset the "+t+" buffer",n)}})),this._initSourceBuffer()},t.onBufferCodecs=function(e,t){var r=this,n=this.getSourceBufferTypes().length;Object.keys(t).forEach((function(e){if(n){var i=r.tracks[e];if(i&&"function"===typeof i.buffer.changeType){var a=t[e],o=a.codec,s=a.levelCodec,u=a.container;if((i.levelCodec||i.codec).replace(f,"$1")!==(s||o).replace(f,"$1")){var l=u+";codecs="+(s||o);r.appendChangeType(e,l)}}}else r.pendingTracks[e]=t[e]})),n||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},t.appendChangeType=function(e,t){var r=this,n=this.operationQueue,i={execute:function(){var i=r.sourceBuffer[e];i&&(a.logger.log("[buffer-controller]: changing "+e+" sourceBuffer type to "+t),i.changeType(t)),n.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(t){a.logger.warn("[buffer-controller]: Failed to change "+e+" SourceBuffer type",t)}};n.append(i,e)},t.onBufferAppending=function(e,t){var r=this,n=this.hls,u=this.operationQueue,l=this.tracks,c=t.data,d=t.type,f=t.frag,h=t.part,p=t.chunkMeta,v=p.buffering[d],g=self.performance.now();v.start=g;var m=f.stats.buffering,y=h?h.stats.buffering:null;0===m.start&&(m.start=g),y&&0===y.start&&(y.start=g);var E=l.audio,b="audio"===d&&1===p.id&&"audio/mpeg"===(null===E||void 0===E?void 0:E.container),_={execute:function(){if(v.executeStart=self.performance.now(),b){var e=r.sourceBuffer[d];if(e){var t=f.start-e.timestampOffset;Math.abs(t)>=.1&&(a.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+f.start+" (delta: "+t+") sn: "+f.sn+")"),e.timestampOffset=f.start)}}r.appendExecutor(c,d)},onStart:function(){},onComplete:function(){var e=self.performance.now();v.executeEnd=v.end=e,0===m.first&&(m.first=e),y&&0===y.first&&(y.first=e);var t=r.sourceBuffer,n={};for(var a in t)n[a]=s.BufferHelper.getBuffered(t[a]);r.appendError=0,r.hls.trigger(i.Events.BUFFER_APPENDED,{type:d,frag:f,part:h,chunkMeta:p,parent:f.type,timeRanges:n})},onError:function(e){a.logger.error("[buffer-controller]: Error encountered while trying to append to the "+d+" SourceBuffer",e);var t={type:o.ErrorTypes.MEDIA_ERROR,parent:f.type,details:o.ErrorDetails.BUFFER_APPEND_ERROR,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=o.ErrorDetails.BUFFER_FULL_ERROR:(r.appendError++,t.details=o.ErrorDetails.BUFFER_APPEND_ERROR,r.appendError>n.config.appendErrorMaxRetry&&(a.logger.error("[buffer-controller]: Failed "+n.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),t.fatal=!0)),n.trigger(i.Events.ERROR,t)}};u.append(_,d)},t.onBufferFlushing=function(e,t){var r=this,n=this.operationQueue,o=function(e){return{execute:r.removeExecutor.bind(r,e,t.startOffset,t.endOffset),onStart:function(){},onComplete:function(){r.hls.trigger(i.Events.BUFFER_FLUSHED,{type:e})},onError:function(t){a.logger.warn("[buffer-controller]: Failed to remove from "+e+" SourceBuffer",t)}}};t.type?n.append(o(t.type),t.type):this.getSourceBufferTypes().forEach((function(e){n.append(o(e),e)}))},t.onFragParsed=function(e,t){var r=this,n=t.frag,o=t.part,s=[],u=o?o.elementaryStreams:n.elementaryStreams;u[l.ElementaryStreamTypes.AUDIOVIDEO]?s.push("audiovideo"):(u[l.ElementaryStreamTypes.AUDIO]&&s.push("audio"),u[l.ElementaryStreamTypes.VIDEO]&&s.push("video")),0===s.length&&a.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+n.type+" level: "+n.level+" sn: "+n.sn),this.blockBuffers((function(){var e=self.performance.now();n.stats.buffering.end=e,o&&(o.stats.buffering.end=e);var t=o?o.stats:n.stats;r.hls.trigger(i.Events.FRAG_BUFFERED,{frag:n,part:o,stats:t,id:n.type})}),s)},t.onFragChanged=function(e,t){this.flushBackBuffer()},t.onBufferEos=function(e,t){var r=this;this.getSourceBufferTypes().reduce((function(e,n){var i=r.sourceBuffer[n];return t.type&&t.type!==n||i&&!i.ended&&(i.ended=!0,a.logger.log("[buffer-controller]: "+n+" sourceBuffer now EOS")),e&&!(i&&!i.ended)}),!0)&&this.blockBuffers((function(){var e=r.mediaSource;e&&"open"===e.readyState&&e.endOfStream()}))},t.onLevelUpdated=function(e,t){var r=t.details;r.fragments.length&&(this.details=r,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},t.flushBackBuffer=function(){var e=this.hls,t=this.details,r=this.media,a=this.sourceBuffer;if(r&&null!==t){var o=this.getSourceBufferTypes();if(o.length){var u=t.live&&null!==e.config.liveBackBufferLength?e.config.liveBackBufferLength:e.config.backBufferLength;if(Object(n.isFiniteNumber)(u)&&!(u<0)){var l=r.currentTime,c=t.levelTargetDuration,d=Math.max(u,c),f=Math.floor(l/c)*c-d;o.forEach((function(r){var n=a[r];if(n){var o=s.BufferHelper.getBuffered(n);o.length>0&&f>o.start(0)&&(e.trigger(i.Events.BACK_BUFFER_REACHED,{bufferEnd:f}),t.live&&e.trigger(i.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:f}),e.trigger(i.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:f,type:r}))}}))}}}},t.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var e=this.details,t=this.hls,r=this.media,i=this.mediaSource,o=e.fragments[0].start+e.totalduration,s=r.duration,u=Object(n.isFiniteNumber)(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(a.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(e)):(o>u&&o>s||!Object(n.isFiniteNumber)(s))&&(a.logger.log("[buffer-controller]: Updating Media Source duration to "+o.toFixed(3)),i.duration=o)}},t.updateSeekableRange=function(e){var t=this.mediaSource,r=e.fragments;if(r.length&&e.live&&null!==t&&void 0!==t&&t.setLiveSeekableRange){var n=Math.max(0,r[0].start),i=Math.max(n,n+e.totalduration);t.setLiveSeekableRange(n,i)}},t.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,r=this.pendingTracks,n=Object.keys(r).length;if(n&&!e||2===n){this.createSourceBuffers(r),this.pendingTracks={};var a=this.getSourceBufferTypes();if(0===a.length)return void this.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});a.forEach((function(e){t.executeNext(e)}))}},t.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");var n=0;for(var s in e)if(!t[s]){var u=e[s];if(!u)throw Error("source buffer exists for track "+s+", however track does not");var l=u.levelCodec||u.codec,c=u.container+";codecs="+l;a.logger.log("[buffer-controller]: creating sourceBuffer("+c+")");try{var d=t[s]=r.addSourceBuffer(c),f=s;this.addBufferListener(f,"updatestart",this._onSBUpdateStart),this.addBufferListener(f,"updateend",this._onSBUpdateEnd),this.addBufferListener(f,"error",this._onSBUpdateError),this.tracks[s]={buffer:d,codec:l,container:u.container,levelCodec:u.levelCodec,id:u.id},n++}catch(h){a.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+h.message),this.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:h,mimeType:c})}}n&&this.hls.trigger(i.Events.BUFFER_CREATED,{tracks:this.tracks})},t._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},t._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},t._onSBUpdateError=function(e,t){a.logger.error("[buffer-controller]: "+e+" SourceBuffer error",t),this.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var r=this.operationQueue.current(e);r&&r.onError(t)},t.removeExecutor=function(e,t,r){var i=this.media,o=this.mediaSource,s=this.operationQueue,u=this.sourceBuffer[e];if(!i||!o||!u)return a.logger.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void s.shiftAndExecuteNext(e);var l=Object(n.isFiniteNumber)(i.duration)?i.duration:1/0,c=Object(n.isFiniteNumber)(o.duration)?o.duration:1/0,d=Math.max(0,t),f=Math.min(r,l,c);f>d?(a.logger.log("[buffer-controller]: Removing ["+d+","+f+"] from the "+e+" SourceBuffer"),console.assert(!u.updating,e+" sourceBuffer must not be updating"),u.remove(d,f)):s.shiftAndExecuteNext(e)},t.appendExecutor=function(e,t){var r=this.operationQueue,n=this.sourceBuffer[t];if(!n)return a.logger.warn("[buffer-controller]: Attempting to append to the "+t+" SourceBuffer, but it does not exist"),void r.shiftAndExecuteNext(t);n.ended=!1,console.assert(!n.updating,t+" sourceBuffer must not be updating"),n.appendBuffer(e)},t.blockBuffers=function(e,t){var r=this;if(void 0===t&&(t=this.getSourceBufferTypes()),!t.length)return a.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(e);var n=this.operationQueue,i=t.map((function(e){return n.appendBlocker(e)}));Promise.all(i).then((function(){e(),t.forEach((function(e){var t=r.sourceBuffer[e];t&&t.updating||n.shiftAndExecuteNext(e)}))}))},t.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},t.addBufferListener=function(e,t,r){var n=this.sourceBuffer[e];if(n){var i=r.bind(this,e);this.listeners[e].push({event:t,listener:i}),n.addEventListener(t,i)}},t.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach((function(e){t.removeEventListener(e.event,e.listener)}))},e}()},"./src/controller/buffer-operation-queue.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r("./src/utils/logger.ts"),i=function(){function e(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}var t=e.prototype;return t.append=function(e,t){var r=this.queues[t];r.push(e),1===r.length&&this.buffers[t]&&this.executeNext(t)},t.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},t.appendBlocker=function(e){var t,r=new Promise((function(e){t=e})),n={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(n,e),r},t.executeNext=function(e){var t=this.buffers,r=this.queues,i=t[e],a=r[e];if(a.length){var o=a[0];try{o.execute()}catch(s){n.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),o.onError(s),i&&i.updating||(a.shift(),this.executeNext(e))}}},t.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},t.current=function(e){return this.queues[e][0]},e}()},"./src/controller/cap-level-controller.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/events.ts");function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(e){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var t,r,a,o=e.prototype;return o.setStreamController=function(e){this.streamController=e},o.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},o.registerListeners=function(){var e=this.hls;e.on(n.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(n.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(n.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(n.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},o.unregisterListener=function(){var e=this.hls;e.off(n.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(n.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(n.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(n.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},o.onFpsDropLevelCapping=function(t,r){e.isLevelAllowed(r.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(r.droppedLevel)},o.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null},o.onManifestParsed=function(e,t){var r=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping()},o.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},o.onMediaDetaching=function(){this.stopCapping()},o.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var e=this.hls.levels;if(e.length){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},o.getMaxLevel=function(t){var r=this,n=this.hls.levels;if(!n.length)return-1;var i=n.filter((function(n,i){return e.isLevelAllowed(i,r.restrictedLevels)&&i<=t}));return this.clientRect=null,e.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},o.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},o.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},o.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.width||t.height||(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t},e.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},e.getMaxLevelByMediaSize=function(e,t,r){if(!e||!e.length)return-1;for(var n,i,a=e.length-1,o=0;o<e.length;o+=1){var s=e[o];if((s.width>=t||s.height>=r)&&(n=s,!(i=e[o+1])||n.width!==i.width||n.height!==i.height)){a=o;break}}return a},t=e,a=[{key:"contentScaleFactor",get:function(){var e=1;try{e=self.devicePixelRatio}catch(t){}return e}}],(r=[{key:"mediaWidth",get:function(){return this.getDimensions().width*e.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*e.contentScaleFactor}}])&&i(t.prototype,r),a&&i(t,a),e}();t.default=a},"./src/controller/cmcd-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return f}));var n=r("./src/events.ts"),i=r("./src/types/cmcd.ts"),a=r("./src/utils/buffer-helper.ts"),o=r("./src/utils/logger.ts");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function l(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}var f=function(){function e(t){var r=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){r.initialized&&(r.starved=!0),r.buffering=!0},this.onPlaying=function(){r.initialized||(r.initialized=!0),r.buffering=!1},this.applyPlaylistData=function(e){try{r.apply(e,{ot:i.CMCDObjectType.MANIFEST,su:!r.initialized})}catch(t){o.logger.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=function(e){try{var t=e.frag,n=r.hls.levels[t.level],a=r.getObjectType(t),s={d:1e3*t.duration,ot:a};a!==i.CMCDObjectType.VIDEO&&a!==i.CMCDObjectType.AUDIO&&a!=i.CMCDObjectType.MUXED||(s.br=n.bitrate/1e3,s.tb=r.getTopBandwidth(a)/1e3,s.bl=r.getBufferLength(a)),r.apply(e,s)}catch(u){o.logger.warn("Could not generate segment CMCD data.",u)}},this.hls=t;var n=this.config=t.config,a=n.cmcd;null!=a&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=a.sessionId||e.uuid(),this.cid=a.contentId,this.useHeaders=!0===a.useHeaders,this.registerListeners())}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(n.Events.MEDIA_DETACHED,this.onMediaDetached,this),e.on(n.Events.BUFFER_CREATED,this.onBufferCreated,this)},t.unregisterListeners=function(){var e=this.hls;e.off(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(n.Events.MEDIA_DETACHED,this.onMediaDetached,this),e.off(n.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},t.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},t.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},t.onBufferCreated=function(e,t){var r,n;this.audioBuffer=null===(r=t.tracks.audio)||void 0===r?void 0:r.buffer,this.videoBuffer=null===(n=t.tracks.video)||void 0===n?void 0:n.buffer},t.createData=function(){var e;return{v:i.CMCDVersion,sf:i.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:null===(e=this.media)||void 0===e?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},t.apply=function(t,r){void 0===r&&(r={}),d(r,this.createData());var n=r.ot===i.CMCDObjectType.INIT||r.ot===i.CMCDObjectType.VIDEO||r.ot===i.CMCDObjectType.MUXED;if(this.starved&&n&&(r.bs=!0,r.su=!0,this.starved=!1),null==r.su&&(r.su=this.buffering),this.useHeaders){var a=e.toHeaders(r);if(!Object.keys(a).length)return;t.headers||(t.headers={}),d(t.headers,a)}else{var o=e.toQuery(r);if(!o)return;t.url=e.appendQueryToUri(t.url,o)}},t.getObjectType=function(e){var t=e.type;return"subtitle"===t?i.CMCDObjectType.TIMED_TEXT:"initSegment"===e.sn?i.CMCDObjectType.INIT:"audio"===t?i.CMCDObjectType.AUDIO:"main"===t?this.hls.audioTracks.length?i.CMCDObjectType.VIDEO:i.CMCDObjectType.MUXED:void 0},t.getTopBandwidth=function(e){var t,r=0,n=this.hls;if(e===i.CMCDObjectType.AUDIO)t=n.audioTracks;else{var a=n.maxAutoLevel,o=a>-1?a+1:n.levels.length;t=n.levels.slice(0,o)}for(var s,u=l(t);!(s=u()).done;){var c=s.value;c.bitrate>r&&(r=c.bitrate)}return r>0?r:NaN},t.getBufferLength=function(e){var t=this.hls.media,r=e===i.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return r&&t?1e3*a.BufferHelper.bufferInfo(r,t.currentTime,this.config.maxBufferHole).len:NaN},t.createPlaylistLoader=function(){var e=this.config.pLoader,t=this.applyPlaylistData,r=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new r(e)}var n=e.prototype;return n.destroy=function(){this.loader.destroy()},n.abort=function(){this.loader.abort()},n.load=function(e,r,n){t(e),this.loader.load(e,r,n)},u(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},t.createFragmentLoader=function(){var e=this.config.fLoader,t=this.applyFragmentData,r=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new r(e)}var n=e.prototype;return n.destroy=function(){this.loader.destroy()},n.abort=function(){this.loader.abort()},n.load=function(e,r,n){t(e),this.loader.load(e,r,n)},u(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},e.uuid=function(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)},e.serialize=function(e){for(var t,r=[],n=function(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e},i=function(e){return Math.round(e)},a=function(e){return 100*i(e/100)},o={br:i,d:i,bl:a,dl:a,mtp:a,nor:function(e){return encodeURIComponent(e)},rtp:a,tb:i},s=l(Object.keys(e||{}).sort());!(t=s()).done;){var u=t.value,c=e[u];if(n(c)&&("v"!==u||1!==c)&&("pr"!=u||1!==c)){var d=o[u];d&&(c=d(c));var f=typeof c,h=void 0;h="ot"===u||"sf"===u||"st"===u?u+"="+c:"boolean"===f?u:"number"===f?u+"="+c:u+"="+JSON.stringify(c),r.push(h)}}return r.join(",")},e.toHeaders=function(t){for(var r={},n=["Object","Request","Session","Status"],i=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},o=0,s=Object.keys(t);o<s.length;o++){var u=s[o];i[null!=a[u]?a[u]:1][u]=t[u]}for(var l=0;l<i.length;l++){var c=e.serialize(i[l]);c&&(r["CMCD-"+n[l]]=c)}return r},e.toQuery=function(t){return"CMCD="+encodeURIComponent(e.serialize(t))},e.appendQueryToUri=function(e,t){if(!t)return e;var r=e.includes("?")?"&":"?";return""+e+r+t},e}()},"./src/controller/eme-controller.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/events.ts"),i=r("./src/errors.ts"),a=r("./src/utils/logger.ts"),o=r("./src/utils/mediakeys-helper.ts");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function e(e){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=e,this._config=e.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var t,r,u,l=e.prototype;return l.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},l._registerListeners=function(){this.hls.on(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(n.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(n.Events.MANIFEST_PARSED,this.onManifestParsed,this)},l._unregisterListeners=function(){this.hls.off(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(n.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(n.Events.MANIFEST_PARSED,this.onManifestParsed,this)},l.getLicenseServerUrl=function(e){switch(e){case o.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},l._attemptKeySystemAccess=function(e,t,r){var n=this,i=function(e,t,r,n){if(e===o.KeySystems.WIDEVINE)return function(e,t,r){var n={audioCapabilities:[],videoCapabilities:[]};return e.forEach((function(e){n.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:r.audioRobustness||""})})),t.forEach((function(e){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:r.videoRobustness||""})})),[n]}(t,r,n);throw new Error("Unknown key-system: "+e)}(e,t,r,this._drmSystemOptions);a.logger.log("Requesting encrypted media key-system access");var s=this.requestMediaKeySystemAccess(e,i);this.mediaKeysPromise=s.then((function(t){return n._onMediaKeySystemAccessObtained(e,t)})),s.catch((function(t){a.logger.error('Failed to obtain key-system "'+e+'" access:',t)}))},l._onMediaKeySystemAccessObtained=function(e,t){var r=this;a.logger.log('Access for key-system "'+e+'" obtained');var n={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(n);var i=Promise.resolve().then((function(){return t.createMediaKeys()})).then((function(t){return n.mediaKeys=t,a.logger.log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated(),t}));return i.catch((function(e){a.logger.error("Failed to create media-keys:",e)})),i},l._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},l._onNewMediaKeySession=function(e){var t=this;a.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(r){t._onKeySessionMessage(e,r.message)}),!1)},l._onKeySessionMessage=function(e,t){a.logger.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){a.logger.log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)}))},l.onMediaEncrypted=function(e){var t=this;if(a.logger.log('Media is encrypted using "'+e.initDataType+'" init data type'),!this.mediaKeysPromise)return a.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var r=function(r){t._media&&(t._attemptSetMediaKeys(r),t._generateRequestWithPreferredKeySession(e.initDataType,e.initData))};this.mediaKeysPromise.then(r).catch(r)},l._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return a.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});a.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},l._generateRequestWithPreferredKeySession=function(e,t){var r=this,o=this._mediaKeysList[0];if(!o)return a.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(o.mediaKeysSessionInitialized)a.logger.warn("Key-Session already initialized but requested again");else{var s=o.mediaKeysSession;if(!s)return a.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return a.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});a.logger.log('Generating key-session request for "'+e+'" init data type'),o.mediaKeysSessionInitialized=!0,s.generateRequest(e,t).then((function(){a.logger.debug("Key-session generation succeeded")})).catch((function(e){a.logger.error("Error generating key-session request:",e),r.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},l._createLicenseXhr=function(e,t,r){var n=new XMLHttpRequest;n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,e,t,r);var i=this._licenseXhrSetup;if(i)try{i.call(this.hls,n,e),i=void 0}catch(o){a.logger.error(o)}try{n.readyState||n.open("POST",e,!0),i&&i.call(this.hls,n,e)}catch(o){throw new Error("issue setting up KeySystem license XHR "+o)}return n},l._onLicenseRequestReadyStageChange=function(e,t,r,o){if(4===e.readyState)if(200===e.status){this._requestLicenseFailureCount=0,a.logger.log("License request succeeded");var s=e.response,u=this._licenseResponseCallback;if(u)try{s=u.call(this.hls,e,t)}catch(c){a.logger.error(c)}o(s)}else{if(a.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var l=3-this._requestLicenseFailureCount+1;a.logger.warn("Retrying license request, "+l+" attempts left"),this._requestLicense(r,o)}},l._generateLicenseRequestChallenge=function(e,t){if(e.mediaKeySystemDomain===o.KeySystems.WIDEVINE)return t;throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},l._requestLicense=function(e,t){a.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return a.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var o=this.getLicenseServerUrl(r.mediaKeySystemDomain),s=this._createLicenseXhr(o,e,t);a.logger.log("Sending license request to URL: "+o);var u=this._generateLicenseRequestChallenge(r,e);s.send(u)}catch(l){a.logger.error("Failure requesting DRM license: "+l),this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},l.onMediaAttached=function(e,t){if(this._emeEnabled){var r=t.media;this._media=r,r.addEventListener("encrypted",this._onMediaEncrypted)}},l.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map((function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch((function(){}))}))).then((function(){return e.setMediaKeys(null)})).catch((function(){})))},l.onManifestParsed=function(e,t){if(this._emeEnabled){var r=t.levels.map((function(e){return e.audioCodec})).filter((function(e){return!!e})),n=t.levels.map((function(e){return e.videoCodec})).filter((function(e){return!!e}));this._attemptKeySystemAccess(o.KeySystems.WIDEVINE,r,n)}},t=e,(r=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&s(t.prototype,r),u&&s(t,u),e}();t.default=u},"./src/controller/fps-controller.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/events.ts"),i=r("./src/utils/logger.ts"),a=function(){function e(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.registerListeners=function(){this.hls.on(n.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.unregisterListeners=function(){this.hls.off(n.Events.MEDIA_ATTACHING,this.onMediaAttaching)},t.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},t.onMediaAttaching=function(e,t){var r=this.hls.config;if(r.capLevelOnFPSDrop){var n=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=n,n&&"function"===typeof n.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}},t.checkFPS=function(e,t,r){var a=performance.now();if(t){if(this.lastTime){var o=a-this.lastTime,s=r-this.lastDroppedFrames,u=t-this.lastDecodedFrames,l=1e3*s/o,c=this.hls;if(c.trigger(n.Events.FPS_DROP,{currentDropped:s,currentDecoded:u,totalDroppedFrames:r}),l>0&&s>c.config.fpsDroppedMonitoringThreshold*u){var d=c.currentLevel;i.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=d)&&(d-=1,c.trigger(n.Events.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:c.currentLevel}),c.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},t.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},e}();t.default=a},"./src/controller/fragment-finders.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"findFragmentByPDT",(function(){return a})),r.d(t,"findFragmentByPTS",(function(){return o})),r.d(t,"fragmentWithinToleranceTest",(function(){return s})),r.d(t,"pdtWithinToleranceTest",(function(){return u})),r.d(t,"findFragWithCC",(function(){return l}));var n=r("./src/polyfills/number.ts"),i=r("./src/utils/binary-search.ts");function a(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Object(n.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;r=r||0;for(var i=0;i<e.length;++i){var a=e[i];if(u(t,r,a))return a}return null}function o(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var a=null;if(e?a=t[e.sn-t[0].sn+1]||null:0===r&&0===t[0].start&&(a=t[0]),a&&0===s(r,n,a))return a;var o=i.default.search(t,s.bind(null,r,n));return o||a}function s(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function u(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-n>e}function l(e,t){return i.default.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}},"./src/controller/fragment-tracker.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"FragmentState",(function(){return n})),r.d(t,"FragmentTracker",(function(){return o}));var n,i=r("./src/events.ts"),a=r("./src/types/loader.ts");!function(e){e.NOT_LOADED="NOT_LOADED",e.BACKTRACKED="BACKTRACKED",e.APPENDING="APPENDING",e.PARTIAL="PARTIAL",e.OK="OK"}(n||(n={}));var o=function(){function e(e){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(i.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.on(i.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(i.Events.FRAG_LOADED,this.onFragLoaded,this)},t._unregisterListeners=function(){var e=this.hls;e.off(i.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.off(i.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(i.Events.FRAG_LOADED,this.onFragLoaded,this)},t.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},t.getAppendedFrag=function(e,t){if(t===a.PlaylistLevelType.MAIN){var r=this.activeFragment,n=this.activeParts;if(!r)return null;if(n)for(var i=n.length;i--;){var o=n[i],s=o?o.end:r.appendedPTS;if(o.start<=e&&void 0!==s&&e<=s)return i>9&&(this.activeParts=n.slice(i-9)),o}else if(r.start<=e&&void 0!==r.appendedPTS&&e<=r.appendedPTS)return r}return this.getBufferedFrag(e,t)},t.getBufferedFrag=function(e,t){for(var r=this.fragments,n=Object.keys(r),i=n.length;i--;){var a=r[n[i]];if((null===a||void 0===a?void 0:a.body.type)===t&&a.buffered){var o=a.body;if(o.start<=e&&e<=o.end)return o}}return null},t.detectEvictedFragments=function(e,t,r){var n=this;Object.keys(this.fragments).forEach((function(i){var a=n.fragments[i];if(a)if(a.buffered){var o=a.range[e];o&&o.time.some((function(e){var r=!n.isTimeBuffered(e.startPTS,e.endPTS,t);return r&&n.removeFragment(a.body),r}))}else a.body.type===r&&n.removeFragment(a.body)}))},t.detectPartialFragments=function(e){var t=this,r=this.timeRanges,n=e.frag,i=e.part;if(r&&"initSegment"!==n.sn){var a=u(n),o=this.fragments[a];o&&(Object.keys(r).forEach((function(e){var a=n.elementaryStreams[e];if(a){var s=r[e],u=null!==i||!0===a.partial;o.range[e]=t.getBufferedTimes(n,i,u,s)}})),o.backtrack=o.loaded=null,Object.keys(o.range).length?o.buffered=!0:this.removeFragment(o.body))}},t.fragBuffered=function(e){var t=u(e),r=this.fragments[t];r&&(r.backtrack=r.loaded=null,r.buffered=!0)},t.getBufferedTimes=function(e,t,r,n){for(var i={time:[],partial:r},a=t?t.start:e.start,o=t?t.end:e.end,s=e.minEndPTS||o,u=e.maxStartPTS||a,l=0;l<n.length;l++){var c=n.start(l)-this.bufferPadding,d=n.end(l)+this.bufferPadding;if(u>=c&&s<=d){i.time.push({startPTS:Math.max(a,n.start(l)),endPTS:Math.min(o,n.end(l))});break}if(a<d&&o>c)i.partial=!0,i.time.push({startPTS:Math.max(a,n.start(l)),endPTS:Math.min(o,n.end(l))});else if(o<=c)break}return i},t.getPartialFragment=function(e){var t,r,n,i=null,a=0,o=this.bufferPadding,u=this.fragments;return Object.keys(u).forEach((function(l){var c=u[l];c&&s(c)&&(r=c.body.start-o,n=c.body.end+o,e>=r&&e<=n&&(t=Math.min(e-r,n-e),a<=t&&(i=c.body,a=t)))})),i},t.getState=function(e){var t=u(e),r=this.fragments[t];return r?r.buffered?s(r)?n.PARTIAL:n.OK:r.backtrack?n.BACKTRACKED:n.APPENDING:n.NOT_LOADED},t.backtrack=function(e,t){var r=u(e),n=this.fragments[r];if(!n||n.backtrack)return null;var i=n.backtrack=t||n.loaded;return n.loaded=null,i},t.getBacktrackData=function(e){var t=u(e),r=this.fragments[t];if(r){var n,i=r.backtrack;if(null!==i&&void 0!==i&&null!==(n=i.payload)&&void 0!==n&&n.byteLength)return i;this.removeFragment(e)}return null},t.isTimeBuffered=function(e,t,r){for(var n,i,a=0;a<r.length;a++){if(n=r.start(a)-this.bufferPadding,i=r.end(a)+this.bufferPadding,e>=n&&t<=i)return!0;if(t<=n)return!1}return!1},t.onFragLoaded=function(e,t){var r=t.frag,n=t.part;if("initSegment"!==r.sn&&!r.bitrateTest&&!n){var i=u(r);this.fragments[i]={body:r,loaded:t,backtrack:null,buffered:!1,range:Object.create(null)}}},t.onBufferAppended=function(e,t){var r=this,n=t.frag,i=t.part,o=t.timeRanges;if(n.type===a.PlaylistLevelType.MAIN)if(this.activeFragment=n,i){var s=this.activeParts;s||(this.activeParts=s=[]),s.push(i)}else this.activeParts=null;this.timeRanges=o,Object.keys(o).forEach((function(e){var t=o[e];if(r.detectEvictedFragments(e,t),!i)for(var a=0;a<t.length;a++)n.appendedPTS=Math.max(t.end(a),n.appendedPTS||0)}))},t.onFragBuffered=function(e,t){this.detectPartialFragments(t)},t.hasFragment=function(e){var t=u(e);return!!this.fragments[t]},t.removeFragmentsInRange=function(e,t,r){var n=this;Object.keys(this.fragments).forEach((function(i){var a=n.fragments[i];if(a&&a.buffered){var o=a.body;o.type===r&&o.start<t&&o.end>e&&n.removeFragment(o)}}))},t.removeFragment=function(e){var t=u(e);e.stats.loaded=0,e.clearElementaryStreamInfo(),delete this.fragments[t]},t.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},e}();function s(e){var t,r;return e.buffered&&((null===(t=e.range.video)||void 0===t?void 0:t.partial)||(null===(r=e.range.audio)||void 0===r?void 0:r.partial))}function u(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn}},"./src/controller/gap-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"STALL_MINIMUM_DURATION_MS",(function(){return s})),r.d(t,"MAX_START_GAP_JUMP",(function(){return u})),r.d(t,"SKIP_BUFFER_HOLE_STEP_SECONDS",(function(){return l})),r.d(t,"SKIP_BUFFER_RANGE_START",(function(){return c})),r.d(t,"default",(function(){return d}));var n=r("./src/utils/buffer-helper.ts"),i=r("./src/errors.ts"),a=r("./src/events.ts"),o=r("./src/utils/logger.ts"),s=250,u=2,l=.1,c=.05,d=function(){function e(e,t,r,n){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n}var t=e.prototype;return t.destroy=function(){this.hls=this.fragmentTracker=this.media=null},t.poll=function(e){var t=this.config,r=this.media,i=this.stalled,a=r.currentTime,l=r.seeking,c=this.seeking&&!l,d=!this.seeking&&l;if(this.seeking=l,a===e){if((d||c)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&n.BufferHelper.getBuffered(r).length){var f=n.BufferHelper.bufferInfo(r,a,0),h=f.len>0,p=f.nextStart||0;if(h||p){if(l){var v=f.len>u,g=!p||p-a>u&&!this.fragmentTracker.getPartialFragment(a);if(v||g)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var m,y=Math.max(p,f.start||0)-a,E=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,b=(null===E||void 0===E||null===(m=E.details)||void 0===m?void 0:m.live)?2*E.details.targetduration:u;if(y>0&&y<=b)return void this._trySkipBufferHole(null)}var _=self.performance.now();if(null!==i){var D=_-i;!l&&D>=s&&this._reportStall(f.len);var S=n.BufferHelper.bufferInfo(r,a,t.maxBufferHole);this._tryFixBufferStall(S,D)}else this.stalled=_}}}else if(this.moved=!0,null!==i){if(this.stallReported){var w=self.performance.now()-i;o.logger.warn("playback not stuck anymore @"+a+", after "+Math.round(w)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var r=this.config,n=this.fragmentTracker,i=this.media.currentTime,a=n.getPartialFragment(i);a&&this._trySkipBufferHole(a)||e.len>r.maxBufferHole&&t>1e3*r.highBufferWatchdogPeriod&&(o.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,o.logger.warn("Playback stalling at @"+r.currentTime+" due to low buffer (buffer="+e+")"),t.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,r=this.hls,s=this.media,u=s.currentTime,d=0,f=n.BufferHelper.getBuffered(s),h=0;h<f.length;h++){var p=f.start(h);if(u+t.maxBufferHole>=d&&u<p){var v=Math.max(p+c,s.currentTime+l);return o.logger.warn("skipping hole, adjusting currentTime from "+u+" to "+v),this.moved=!0,this.stalled=null,s.currentTime=v,e&&r.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+u+" to "+v,frag:e}),v}d=f.end(h)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,n=r.currentTime,s=(this.nudgeRetry||0)+1;if(this.nudgeRetry=s,s<e.nudgeMaxRetry){var u=n+s*e.nudgeOffset;o.logger.warn("Nudging 'currentTime' from "+n+" to "+u),r.currentTime=u,t.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else o.logger.error("Playhead still not moving while enough data buffered @"+n+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}()},"./src/controller/id3-track-controller.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/events.ts"),i=r("./src/utils/texttrack-utils.ts"),a=r("./src/demux/id3.ts"),o=function(){function e(e){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=e,this._registerListeners()}var t=e.prototype;return t.destroy=function(){this._unregisterListeners()},t._registerListeners=function(){var e=this.hls;e.on(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(n.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(n.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},t._unregisterListeners=function(){var e=this.hls;e.off(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(n.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(n.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},t.onMediaAttached=function(e,t){this.media=t.media},t.onMediaDetaching=function(){this.id3Track&&(Object(i.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null)},t.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return Object(i.sendAddTrackEvent)(r,this.media),r}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function(e,t){if(this.media){var r=t.frag,n=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,o=0;o<n.length;o++){var s=a.getID3Frames(n[o].data);if(s){var u=n[o].pts,l=o<n.length-1?n[o+1].pts:r.end;l-u<=0&&(l=u+.25);for(var c=0;c<s.length;c++){var d=s[c];if(!a.isTimeStampFrame(d)){var f=new i(u,l,"");f.value=d,this.id3Track.addCue(f)}}}}}},t.onBufferFlushing=function(e,t){var r=t.startOffset,n=t.endOffset,a=t.type;if(!a||"audio"===a){var o=this.id3Track;o&&Object(i.removeCuesInRange)(o,r,n)}},e}();t.default=o},"./src/controller/latency-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r("./src/errors.ts"),i=r("./src/events.ts"),a=r("./src/utils/logger.ts");function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}var t,r,s,u=e.prototype;return u.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},u.registerListeners=function(){this.hls.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(i.Events.ERROR,this.onError,this)},u.unregisterListeners=function(){this.hls.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(i.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(i.Events.ERROR,this.onError)},u.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},u.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},u.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},u.onLevelUpdated=function(e,t){var r=t.details;this.levelDetails=r,r.advanced&&this.timeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},u.onError=function(e,t){t.details===n.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,a.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},u.timeupdate=function(){var e=this.media,t=this.levelDetails;if(e&&t){this.currentTime=e.currentTime;var r=this.computeLatency();if(null!==r){this._latency=r;var n=this.config,i=n.lowLatencyMode,a=n.maxLiveSyncPlaybackRate;if(i&&1!==a){var o=this.targetLatency;if(null!==o){var s=r-o,u=s<Math.min(this.maxLatency,o+t.targetduration);if(t.live&&u&&s>.05&&this.forwardBufferLength>1){var l=Math.min(2,Math.max(1,a)),c=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;e.playbackRate=Math.min(l,Math.max(1,c))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}}}}},u.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},u.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},t=e,(r=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(null===e)return null;var t=e.holdBack,r=e.partHoldBack,n=e.targetduration,i=this.config,a=i.liveSyncDuration,o=i.liveSyncDurationCount,s=i.lowLatencyMode,u=this.hls.userConfig,l=s&&r||t;(u.liveSyncDuration||u.liveSyncDurationCount||0===l)&&(l=void 0!==a?a:o*n);var c=n;return l+Math.min(1*this.stallCount,c)}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency,r=this.levelDetails;if(null===e||null===t||null===r)return null;var n=r.edge,i=e-t-this.edgeStalled,a=n-r.totalduration,o=n-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(a,i),o)}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var r=e.buffered.length;return r?e.buffered.end(r-1):t.edge-this.currentTime}}])&&o(t.prototype,r),s&&o(t,s),e}()},"./src/controller/level-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p}));var n=r("./src/types/level.ts"),i=r("./src/events.ts"),a=r("./src/errors.ts"),o=r("./src/utils/codecs.ts"),s=r("./src/controller/level-helper.ts"),u=r("./src/controller/base-playlist-controller.ts"),l=r("./src/types/loader.ts");function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var h=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),p=function(e){var t,r;function u(t){var r;return(r=e.call(this,t,"[level-controller]")||this)._levels=[],r._firstLevel=-1,r._startLevel=void 0,r.currentLevelIndex=-1,r.manualLevelIndex=-1,r.onParsedComplete=void 0,r._registerListeners(),r}r=e,(t=u).prototype=Object.create(r.prototype),t.prototype.constructor=t,f(t,r);var p,v,g,m=u.prototype;return m._registerListeners=function(){var e=this.hls;e.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(i.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(i.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(i.Events.ERROR,this.onError,this)},m._unregisterListeners=function(){var e=this.hls;e.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(i.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(i.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(i.Events.ERROR,this.onError,this)},m.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,e.prototype.destroy.call(this)},m.startLoad=function(){this._levels.forEach((function(e){e.loadError=0})),e.prototype.startLoad.call(this)},m.onManifestLoaded=function(e,t){var r,u,l=[],c=[],d=[],f={},p=!1,v=!1,g=!1;if(t.levels.forEach((function(e){var t=e.attrs;p=p||!(!e.width||!e.height),v=v||!!e.videoCodec,g=g||!!e.audioCodec,h&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0);var r=e.bitrate+"-"+e.attrs.RESOLUTION+"-"+e.attrs.CODECS;(u=f[r])?u.url.push(e.url):(u=new n.Level(e),f[r]=u,l.push(u)),t&&(t.AUDIO&&Object(s.addGroupId)(u,"audio",t.AUDIO),t.SUBTITLES&&Object(s.addGroupId)(u,"text",t.SUBTITLES))})),(p||v)&&g&&(l=l.filter((function(e){var t=e.videoCodec,r=e.width,n=e.height;return!!t||!(!r||!n)}))),l=l.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||Object(o.isCodecSupportedInMp4)(t,"audio"))&&(!r||Object(o.isCodecSupportedInMp4)(r,"video"))})),t.audioTracks&&(c=t.audioTracks.filter((function(e){return!e.audioCodec||Object(o.isCodecSupportedInMp4)(e.audioCodec,"audio")})),Object(s.assignTrackIdsByGroup)(c)),t.subtitles&&(d=t.subtitles,Object(s.assignTrackIdsByGroup)(d)),l.length>0){r=l[0].bitrate,l.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=l;for(var m=0;m<l.length;m++)if(l[m].bitrate===r){this._firstLevel=m,this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+r);break}var y=g&&!v,E={levels:l,audioTracks:c,subtitleTracks:d,firstLevel:this._firstLevel,stats:t.stats,audio:g,video:v,altAudio:!y&&c.some((function(e){return!!e.url}))};this.hls.trigger(i.Events.MANIFEST_PARSED,E),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,reason:"no level with compatible codecs found in manifest"})},m.onError=function(t,r){if(e.prototype.onError.call(this,t,r),!r.fatal){var n=r.context,i=this._levels[this.currentLevelIndex];if(n&&(n.type===l.PlaylistContextType.AUDIO_TRACK&&i.audioGroupIds&&n.groupId===i.audioGroupIds[i.urlId]||n.type===l.PlaylistContextType.SUBTITLE_TRACK&&i.textGroupIds&&n.groupId===i.textGroupIds[i.urlId]))this.redundantFailover(this.currentLevelIndex);else{var o,s=!1,u=!0;switch(r.details){case a.ErrorDetails.FRAG_LOAD_ERROR:case a.ErrorDetails.FRAG_LOAD_TIMEOUT:case a.ErrorDetails.KEY_LOAD_ERROR:case a.ErrorDetails.KEY_LOAD_TIMEOUT:if(r.frag){var c=this._levels[r.frag.level];c?(c.fragmentError++,c.fragmentError>this.hls.config.fragLoadingMaxRetry&&(o=r.frag.level)):o=r.frag.level}break;case a.ErrorDetails.LEVEL_LOAD_ERROR:case a.ErrorDetails.LEVEL_LOAD_TIMEOUT:n&&(n.deliveryDirectives&&(u=!1),o=n.level),s=!0;break;case a.ErrorDetails.REMUX_ALLOC_ERROR:o=r.level,s=!0}void 0!==o&&this.recoverLevel(r,o,s,u)}}},m.recoverLevel=function(e,t,r,n){var i=e.details,a=this._levels[t];if(a.loadError++,r){if(!this.retryLoadingOrFail(e))return void(this.currentLevelIndex=-1);e.levelRetry=!0}if(n){var o=a.url.length;if(o>1&&a.loadError<o)e.levelRetry=!0,this.redundantFailover(t);else if(-1===this.manualLevelIndex){var s=0===t?this._levels.length-1:t-1;this.currentLevelIndex!==s&&0===this._levels[s].loadError&&(this.warn(i+": switch to "+s),e.levelRetry=!0,this.hls.nextAutoLevel=s)}}},m.redundantFailover=function(e){var t=this._levels[e],r=t.url.length;if(r>1){var n=(t.urlId+1)%r;this.warn("Switching to redundant URL-id "+n),this._levels.forEach((function(e){e.urlId=n})),this.level=e}},m.onFragLoaded=function(e,t){var r=t.frag;if(void 0!==r&&r.type===l.PlaylistLevelType.MAIN){var n=this._levels[r.level];void 0!==n&&(n.fragmentError=0,n.loadError=0)}},m.onLevelLoaded=function(e,t){var r,n,i=t.level,a=t.details,o=this._levels[i];if(!o)return this.warn("Invalid level index "+i),void(null!==(n=t.deliveryDirectives)&&void 0!==n&&n.skip&&(a.deltaUpdateFailed=!0));i===this.currentLevelIndex?(0===o.fragmentError&&(o.loadError=0,this.retryCount=0),this.playlistLoaded(i,t,o.details)):null!==(r=t.deliveryDirectives)&&void 0!==r&&r.skip&&(a.deltaUpdateFailed=!0)},m.onAudioTrackSwitched=function(e,t){var r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var n=-1,i=this.hls.audioTracks[t.id].groupId,a=0;a<r.audioGroupIds.length;a++)if(r.audioGroupIds[a]===i){n=a;break}n!==r.urlId&&(r.urlId=n,this.startLoad())}},m.loadPlaylist=function(e){var t=this.currentLevelIndex,r=this._levels[t];if(this.canLoad&&r&&r.url.length>0){var n=r.urlId,a=r.url[n];if(e)try{a=e.addDirectives(a)}catch(o){this.warn("Could not construct new URL with HLS Delivery Directives: "+o)}this.log("Attempt loading level index "+t+(e?" at sn "+e.msn+" part "+e.part:"")+" with URL-id "+n+" "+a),this.clearTimer(),this.hls.trigger(i.Events.LEVEL_LOADING,{url:a,level:t,id:n,deliveryDirectives:e||null})}},m.removeLevel=function(e,t){var r=function(e,r){return r!==t},n=this._levels.filter((function(n,i){return i!==e||n.url.length>1&&void 0!==t&&(n.url=n.url.filter(r),n.audioGroupIds&&(n.audioGroupIds=n.audioGroupIds.filter(r)),n.textGroupIds&&(n.textGroupIds=n.textGroupIds.filter(r)),n.urlId=0,!0)})).map((function(e,t){var r=e.details;return null!==r&&void 0!==r&&r.fragments&&r.fragments.forEach((function(e){e.level=t})),e}));this._levels=n,this.hls.trigger(i.Events.LEVELS_UPDATED,{levels:n})},p=u,(v=[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t,r=this._levels;if(0!==r.length&&(this.currentLevelIndex!==e||null===(t=r[e])||void 0===t||!t.details)){if(e<0||e>=r.length){var n=e<0;if(this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.OTHER_ERROR,details:a.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:n,reason:"invalid level idx"}),n)return;e=Math.min(e,r.length-1)}this.clearTimer();var o=this.currentLevelIndex,s=r[o],u=r[e];this.log("switching to level "+e+" from "+o),this.currentLevelIndex=e;var l=c({},u,{level:e,maxBitrate:u.maxBitrate,uri:u.uri,urlId:u.urlId});delete l._urlId,this.hls.trigger(i.Events.LEVEL_SWITCHING,l);var d=u.details;if(!d||d.live){var f=this.switchParams(u.uri,null===s||void 0===s?void 0:s.details);this.loadPlaylist(f)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&d(p.prototype,v),g&&d(p,g),u}(u.default)},"./src/controller/level-helper.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"addGroupId",(function(){return a})),r.d(t,"assignTrackIdsByGroup",(function(){return o})),r.d(t,"updatePTS",(function(){return s})),r.d(t,"updateFragPTSDTS",(function(){return l})),r.d(t,"mergeDetails",(function(){return c})),r.d(t,"mapPartIntersection",(function(){return d})),r.d(t,"mapFragmentIntersection",(function(){return f})),r.d(t,"adjustSliding",(function(){return h})),r.d(t,"addSliding",(function(){return p})),r.d(t,"computeReloadInterval",(function(){return v})),r.d(t,"getFragmentWithSN",(function(){return g})),r.d(t,"getPartWith",(function(){return m}));var n=r("./src/polyfills/number.ts"),i=r("./src/utils/logger.ts");function a(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}}function o(e){var t={};e.forEach((function(e){var r=e.groupId||"";e.id=t[r]=t[r]||0,t[r]++}))}function s(e,t,r){u(e[t],e[r])}function u(e,t){var r=t.startPTS;if(Object(n.isFiniteNumber)(r)){var i,a=0;t.sn>e.sn?(a=r-e.start,i=e):(a=e.start-r,i=t),i.duration!==a&&(i.duration=a)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function l(e,t,r,a,o,s){a-r<=0&&(i.logger.warn("Fragment should have a positive duration",t),a=r+t.duration,s=o+t.duration);var l=r,c=a,d=t.startPTS,f=t.endPTS;if(Object(n.isFiniteNumber)(d)){var h=Math.abs(d-r);Object(n.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(h,t.deltaPTS):t.deltaPTS=h,l=Math.max(r,d),r=Math.min(r,d),o=Math.min(o,t.startDTS),c=Math.min(a,f),a=Math.max(a,f),s=Math.max(s,t.endDTS)}t.duration=a-r;var p=r-t.start;t.appendedPTS=a,t.start=t.startPTS=r,t.maxStartPTS=l,t.startDTS=o,t.endPTS=a,t.minEndPTS=c,t.endDTS=s;var v,g=t.sn;if(!e||g<e.startSN||g>e.endSN)return 0;var m=g-e.startSN,y=e.fragments;for(y[m]=t,v=m;v>0;v--)u(y[v],y[v-1]);for(v=m;v<y.length-1;v++)u(y[v],y[v+1]);return e.fragmentHint&&u(y[y.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,p}function c(e,t){for(var r=null,a=e.fragments,o=a.length-1;o>=0;o--){var s=a[o].initSegment;if(s){r=s;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;var u,c=0;if(f(e,t,(function(e,i){e.relurl&&(c=e.cc-i.cc),Object(n.isFiniteNumber)(e.startPTS)&&Object(n.isFiniteNumber)(e.endPTS)&&(i.start=i.startPTS=e.startPTS,i.startDTS=e.startDTS,i.appendedPTS=e.appendedPTS,i.maxStartPTS=e.maxStartPTS,i.endPTS=e.endPTS,i.endDTS=e.endDTS,i.minEndPTS=e.minEndPTS,i.duration=e.endPTS-e.startPTS,i.duration&&(u=i),t.PTSKnown=t.alignedSliding=!0),i.elementaryStreams=e.elementaryStreams,i.loader=e.loader,i.stats=e.stats,i.urlId=e.urlId,e.initSegment&&(i.initSegment=e.initSegment,r=e.initSegment)})),r&&(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach((function(e){var t;e.initSegment&&e.initSegment.relurl!==(null===(t=r)||void 0===t?void 0:t.relurl)||(e.initSegment=r)})),t.skippedSegments&&(t.deltaUpdateFailed=t.fragments.some((function(e){return!e})),t.deltaUpdateFailed)){i.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var p=t.skippedSegments;p--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}var v=t.fragments;if(c){i.logger.warn("discontinuity sliding from playlist, take drift into account");for(var g=0;g<v.length;g++)v[g].cc+=c}t.skippedSegments&&(t.startCC=t.fragments[0].cc),d(e.partList,t.partList,(function(e,t){t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),u?l(t,u,u.startPTS,u.endPTS,u.startDTS,u.endDTS):h(e,t),v.length&&(t.totalduration=t.edge-v[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;var m=t.advancedDateTime;if(t.advanced&&m){var y=t.edge;t.driftStart||(t.driftStartTime=m,t.driftStart=y),t.driftEndTime=m,t.driftEnd=y}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function d(e,t,r){if(e&&t)for(var n=0,i=0,a=e.length;i<=a;i++){var o=e[i],s=t[i+n];o&&s&&o.index===s.index&&o.fragment.sn===s.fragment.sn?r(o,s):n--}}function f(e,t,r){for(var n=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(n?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,o=t.startSN-e.startSN,s=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,u=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=i;l<=a;l++){var c=u[o+l],d=s[l];n&&!d&&l<n&&(d=t.fragments[l]=c),c&&d&&r(c,d)}}function h(e,t){var r=t.startSN+t.skippedSegments-e.startSN,n=e.fragments;r<0||r>=n.length||p(t,n[r].start)}function p(e,t){if(t){for(var r=e.fragments,n=e.skippedSegments;n<r.length;n++)r[n].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function v(e,t){var r,n=1e3*e.levelTargetDuration,i=n/2,a=e.age,o=a>0&&a<3*n,s=t.loading.end-t.loading.start,u=e.availabilityDelay;if(!1===e.updated)if(o){var l=333*e.misses;r=Math.max(Math.min(i,2*s),l),e.availabilityDelay=(e.availabilityDelay||0)+r}else r=i;else o?(u=Math.min(u||n/2,a),e.availabilityDelay=u,r=u+n-a):r=n-s;return Math.round(r)}function g(e,t,r){if(!e||!e.details)return null;var n=e.details,i=n.fragments[t-n.startSN];return i||((i=n.fragmentHint)&&i.sn===t?i:t<n.startSN&&r&&r.sn===t?r:null)}function m(e,t,r){if(!e||!e.details)return null;var n=e.details.partList;if(n)for(var i=n.length;i--;){var a=n[i];if(a.index===r&&a.fragment.sn===t)return a}return null}},"./src/controller/stream-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return y}));var n=r("./src/polyfills/number.ts"),i=r("./src/controller/base-stream-controller.ts"),a=r("./src/is-supported.ts"),o=r("./src/events.ts"),s=r("./src/utils/buffer-helper.ts"),u=r("./src/controller/fragment-tracker.ts"),l=r("./src/types/loader.ts"),c=r("./src/loader/fragment.ts"),d=r("./src/demux/transmuxer-interface.ts"),f=r("./src/types/transmuxer.ts"),h=r("./src/controller/gap-controller.ts"),p=r("./src/errors.ts"),v=r("./src/utils/logger.ts");function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}var y=function(e){var t,r;function y(t,r){var n;return(n=e.call(this,t,r,"[stream-controller]")||this).audioCodecSwap=!1,n.gapController=null,n.level=-1,n._forceStartLoad=!1,n.altAudio=!1,n.audioOnly=!1,n.fragPlaying=null,n.onvplaying=null,n.onvseeked=null,n.fragLastKbps=0,n.stalled=!1,n.couldBacktrack=!1,n.audioCodecSwitch=!1,n.videoBuffer=null,n._registerListeners(),n}r=e,(t=y).prototype=Object.create(r.prototype),t.prototype.constructor=t,m(t,r);var E,b,_,D=y.prototype;return D._registerListeners=function(){var e=this.hls;e.on(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(o.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(o.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(o.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(o.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(o.Events.ERROR,this.onError,this),e.on(o.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(o.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(o.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(o.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(o.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(o.Events.FRAG_BUFFERED,this.onFragBuffered,this)},D._unregisterListeners=function(){var e=this.hls;e.off(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(o.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(o.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(o.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(o.Events.ERROR,this.onError,this),e.off(o.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(o.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(o.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(o.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(o.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(o.Events.FRAG_BUFFERED,this.onFragBuffered,this)},D.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},D.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(r.config.testBandwidth?(n=0,this.bitrateTest=!0):n=r.nextAutoLevel),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=i.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=i.State.STOPPED},D.stopLoad=function(){this._forceStartLoad=!1,e.prototype.stopLoad.call(this)},D.doTick=function(){switch(this.state){case i.State.IDLE:this.doTickIdle();break;case i.State.WAITING_LEVEL:var e,t=this.levels,r=this.level,n=null===t||void 0===t||null===(e=t[r])||void 0===e?void 0:e.details;if(n&&(!n.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(n))break;this.state=i.State.IDLE;break}break;case i.State.FRAG_LOADING_WAITING_RETRY:var a,o=self.performance.now(),s=this.retryDate;(!s||o>=s||null!==(a=this.media)&&void 0!==a&&a.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=i.State.IDLE)}this.onTickEnd()},D.onTickEnd=function(){e.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},D.doTickIdle=function(){var e,t,r=this.hls,n=this.levelLastLoaded,a=this.levels,s=this.media,d=r.config,f=r.nextLoadLevel;if(null!==n&&(s||!this.startFragRequested&&d.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&a&&a[f]){var h=a[f];this.level=r.nextLoadLevel=f;var p=h.details;if(!p||this.state===i.State.WAITING_LEVEL||p.live&&this.levelLastLoaded!==f)this.state=i.State.WAITING_LEVEL;else{var v=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:s,l.PlaylistLevelType.MAIN);if(null!==v&&!(v.len>=this.getMaxBufferLength(h.maxBitrate))){if(this._streamEnded(v,p)){var g={};return this.altAudio&&(g.type="video"),this.hls.trigger(o.Events.BUFFER_EOS,g),void(this.state=i.State.ENDED)}var m=v.end,y=this.getNextFragment(m,p);if(this.couldBacktrack&&!this.fragPrevious&&y&&"initSegment"!==y.sn){var E=y.sn-p.startSN;E>1&&(y=p.fragments[E-1],this.fragmentTracker.removeFragment(y))}if(y&&this.fragmentTracker.getState(y)===u.FragmentState.OK&&this.nextLoadPosition>m){var b=this.audioOnly&&!this.altAudio?c.ElementaryStreamTypes.AUDIO:c.ElementaryStreamTypes.VIDEO;this.afterBufferFlushed(s,b,l.PlaylistLevelType.MAIN),y=this.getNextFragment(this.nextLoadPosition,p)}y&&(!y.initSegment||y.initSegment.data||this.bitrateTest||(y=y.initSegment),"identity"!==(null===(e=y.decryptdata)||void 0===e?void 0:e.keyFormat)||null!==(t=y.decryptdata)&&void 0!==t&&t.key?this.loadFragment(y,p,m):this.loadKey(y,p))}}}},D.loadFragment=function(t,r,n){var i,a=this.fragmentTracker.getState(t);if(this.fragCurrent=t,a===u.FragmentState.BACKTRACKED){var o=this.fragmentTracker.getBacktrackData(t);if(o)return this._handleFragmentLoadProgress(o),void this._handleFragmentLoadComplete(o);a=u.FragmentState.NOT_LOADED}a===u.FragmentState.NOT_LOADED||a===u.FragmentState.PARTIAL?"initSegment"===t.sn?this._loadInitSegment(t):this.bitrateTest?(t.bitrateTest=!0,this.log("Fragment "+t.sn+" of level "+t.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(t)):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,r,n)):a===u.FragmentState.APPENDING?this.reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t):0===(null===(i=this.media)||void 0===i?void 0:i.buffered.length)&&this.fragmentTracker.removeAllFragments()},D.getAppendedFrag=function(e){var t=this.fragmentTracker.getAppendedFrag(e,l.PlaylistLevelType.MAIN);return t&&"fragment"in t?t.fragment:t},D.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,l.PlaylistLevelType.MAIN)},D.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},D.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},D.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!==t&&void 0!==t&&t.readyState){var r,n=this.getAppendedFrag(t.currentTime);if(n&&n.start>1&&this.flushMainBuffer(0,n.start-1),!t.paused&&e){var i=e[this.hls.nextLoadLevel],a=this.fragLastKbps;r=a&&this.fragCurrent?this.fragCurrent.duration*i.maxBitrate/(1e3*a)+1:0}else r=0;var o=this.getBufferedFrag(t.currentTime+r);if(o){var s=this.followingBufferedFrag(o);if(s){this.abortCurrentFrag();var u=s.maxStartPTS?s.maxStartPTS:s.start,l=s.duration,c=Math.max(o.end,u+Math.min(Math.max(l-this.config.maxFragLookUpTolerance,.5*l),.75*l));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}},D.abortCurrentFrag=function(){var e=this.fragCurrent;this.fragCurrent=null,null!==e&&void 0!==e&&e.loader&&e.loader.abort(),this.state===i.State.KEY_LOADING&&(this.state=i.State.IDLE),this.nextLoadPosition=this.getLoadPosition()},D.flushMainBuffer=function(t,r){e.prototype.flushMainBuffer.call(this,t,r,this.altAudio?"video":null)},D.onMediaAttached=function(t,r){e.prototype.onMediaAttached.call(this,t,r);var n=r.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),n.addEventListener("playing",this.onvplaying),n.addEventListener("seeked",this.onvseeked),this.gapController=new h.default(this.config,n,this.fragmentTracker,this.hls)},D.onMediaDetaching=function(){var t=this.media;t&&(t.removeEventListener("playing",this.onvplaying),t.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),e.prototype.onMediaDetaching.call(this)},D.onMediaPlaying=function(){this.tick()},D.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:null;Object(n.isFiniteNumber)(t)&&this.log("Media seeked to "+t.toFixed(3)),this.tick()},D.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(o.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},D.onManifestParsed=function(e,t){var r,n=!1,i=!1;t.levels.forEach((function(e){(r=e.audioCodec)&&(-1!==r.indexOf("mp4a.40.2")&&(n=!0),-1!==r.indexOf("mp4a.40.5")&&(i=!0))})),this.audioCodecSwitch=n&&i&&!Object(a.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},D.onLevelLoading=function(e,t){var r=this.levels;if(r&&this.state===i.State.IDLE){var n=r[t.level];(!n.details||n.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(n.details))&&(this.state=i.State.WAITING_LEVEL)}},D.onLevelLoaded=function(e,t){var r,n=this.levels,a=t.level,s=t.details,u=s.totalduration;if(n){this.log("Level "+a+" loaded ["+s.startSN+","+s.endSN+"], cc ["+s.startCC+", "+s.endCC+"] duration:"+u);var l=this.fragCurrent;!l||this.state!==i.State.FRAG_LOADING&&this.state!==i.State.FRAG_LOADING_WAITING_RETRY||l.level!==t.level&&l.loader&&(this.state=i.State.IDLE,l.loader.abort());var c=n[a],d=0;if(s.live||null!==(r=c.details)&&void 0!==r&&r.live){if(s.fragments[0]||(s.deltaUpdateFailed=!0),s.deltaUpdateFailed)return;d=this.alignPlaylists(s,c.details)}if(c.details=s,this.levelLastLoaded=a,this.hls.trigger(o.Events.LEVEL_UPDATED,{details:s,level:a}),this.state===i.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(s))return;this.state=i.State.IDLE}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,d),this.tick()}else this.warn("Levels were reset while loading level "+a)},D._handleFragmentLoadProgress=function(e){var t,r=e.frag,n=e.part,i=e.payload,a=this.levels;if(a){var o=a[r.level],s=o.details;if(s){var u=o.videoCodec,c=s.PTSKnown||!s.live,h=null===(t=r.initSegment)||void 0===t?void 0:t.data,p=this._getAudioCodec(o),v=this.transmuxer=this.transmuxer||new d.default(this.hls,l.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),g=n?n.index:-1,m=-1!==g,y=new f.ChunkMetadata(r.level,r.sn,r.stats.chunkCount,i.byteLength,g,m),E=this.initPTS[r.cc];v.push(i,h,p,u,r,n,s.totalduration,c,y,E)}else this.warn("Dropping fragment "+r.sn+" of level "+r.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},D.onAudioTrackSwitching=function(e,t){var r=this.altAudio,n=!!t.url,i=t.id;if(!n){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var a=this.fragCurrent;null!==a&&void 0!==a&&a.loader&&(this.log("Switching to main audio track, cancel main fragment load"),a.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var s=this.hls;r&&s.trigger(o.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),s.trigger(o.Events.AUDIO_TRACK_SWITCHED,{id:i})}},D.onAudioTrackSwitched=function(e,t){var r=t.id,n=!!this.hls.audioTracks[r].url;if(n){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n,this.tick()},D.onBufferCreated=function(e,t){var r,n,i=t.tracks,a=!1;for(var o in i){var s=i[o];if("main"===s.id){if(n=o,r=s,"video"===o){var u=i[o];u&&(this.videoBuffer=u.buffer)}}else a=!0}a&&r?(this.log("Alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},D.onFragBuffered=function(e,t){var r=t.frag,n=t.part;if(!r||r.type===l.PlaylistLevelType.MAIN){if(this.fragContextChanged(r))return this.warn("Fragment "+r.sn+(n?" p: "+n.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===i.State.PARSED&&(this.state=i.State.IDLE));var a=n?n.stats:r.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,n)}},D.onError=function(e,t){switch(t.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(l.PlaylistLevelType.MAIN,t);break;case p.ErrorDetails.LEVEL_LOAD_ERROR:case p.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==i.State.ERROR&&(t.fatal?(this.warn(""+t.details),this.state=i.State.ERROR):t.levelRetry||this.state!==i.State.WAITING_LEVEL||(this.state=i.State.IDLE));break;case p.ErrorDetails.BUFFER_FULL_ERROR:if("main"===t.parent&&(this.state===i.State.PARSING||this.state===i.State.PARSED)){var r=!0,n=this.getFwdBufferInfo(this.media,l.PlaylistLevelType.MAIN);n&&n.len>.5&&(r=!this.reduceMaxBufferLength(n.len)),r&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},D.checkBuffer=function(){var e=this.media,t=this.gapController;if(e&&t&&e.readyState){var r=s.BufferHelper.getBuffered(e);!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this.seekToStartPos()):t.poll(this.lastCurrentTime),this.lastCurrentTime=e.currentTime}},D.onFragLoadEmergencyAborted=function(){this.state=i.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},D.onBufferFlushed=function(e,t){var r=t.type;if(r!==c.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var n=(r===c.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(n,r,l.PlaylistLevelType.MAIN)}},D.onLevelsUpdated=function(e,t){this.levels=t.levels},D.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},D.seekToStartPos=function(){var e=this.media,t=e.currentTime,r=this.startPosition;if(r>=0&&t<r){if(e.seeking)return void v.logger.log("could not seek to "+r+", already seeking at "+t);var n=s.BufferHelper.getBuffered(e),i=(n.length?n.start(0):0)-r;i>0&&(i<this.config.maxBufferHole||i<this.config.maxFragLookUpTolerance)&&(v.logger.log("adjusting start position by "+i+" to match buffer start"),r+=i,this.startPosition=r),this.log("seek to target start position "+r+" from current time "+t),e.currentTime=r}},D._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t},D._loadBitrateTestFrag=function(e){var t=this;this._doFragLoad(e).then((function(r){var n=t.hls;if(r&&!n.nextLoadLevel&&!t.fragContextChanged(e)){t.fragLoadError=0,t.state=i.State.IDLE,t.startFragRequested=!1,t.bitrateTest=!1;var a=e.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),n.trigger(o.Events.FRAG_LOADED,r)}}))},D._handleTransmuxComplete=function(e){var t,r="main",a=this.hls,s=e.remuxResult,u=e.chunkMeta,l=this.getCurrentContext(u);if(!l)return this.warn("The loading context changed while buffering fragment "+u.sn+" of level "+u.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(u.level);var d=l.frag,f=l.part,h=l.level,p=s.video,v=s.text,g=s.id3,m=s.initSegment,y=this.altAudio?void 0:s.audio;if(!this.fragContextChanged(d)){if(this.state=i.State.PARSING,m){m.tracks&&(this._bufferInitSegment(h,m.tracks,d,u),a.trigger(o.Events.FRAG_PARSING_INIT_SEGMENT,{frag:d,id:r,tracks:m.tracks}));var E=m.initPTS,b=m.timescale;Object(n.isFiniteNumber)(E)&&(this.initPTS[d.cc]=E,a.trigger(o.Events.INIT_PTS_FOUND,{frag:d,id:r,initPTS:E,timescale:b}))}if(p&&!1!==s.independent){if(h.details){var _=p.startPTS,D=p.endPTS,S=p.startDTS,w=p.endDTS;if(f)f.elementaryStreams[p.type]={startPTS:_,endPTS:D,startDTS:S,endDTS:w};else if(p.firstKeyFrame&&p.independent&&(this.couldBacktrack=!0),p.dropped&&p.independent){if(this.getLoadPosition()+this.config.maxBufferHole<_)return void this.backtrack(d);d.setElementaryStreamInfo(p.type,d.start,D,d.start,w,!0)}d.setElementaryStreamInfo(p.type,_,D,S,w),this.bufferFragmentData(p,d,f,u)}}else if(!1===s.independent)return void this.backtrack(d);if(y){var T=y.startPTS,C=y.endPTS,A=y.startDTS,x=y.endDTS;f&&(f.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:T,endPTS:C,startDTS:A,endDTS:x}),d.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,T,C,A,x),this.bufferFragmentData(y,d,f,u)}if(null!==g&&void 0!==g&&null!==(t=g.samples)&&void 0!==t&&t.length){var k={frag:d,id:r,samples:g.samples};a.trigger(o.Events.FRAG_PARSING_METADATA,k)}if(v){var L={frag:d,id:r,samples:v.samples};a.trigger(o.Events.FRAG_PARSING_USERDATA,L)}}},D._bufferInitSegment=function(e,t,r,n){var a=this;if(this.state===i.State.PARSING){this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;var s=t.audio,u=t.video,l=t.audiovideo;if(s){var c=e.audioCodec,d=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(c&&(c=-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==s.metadata.channelCount&&-1===d.indexOf("firefox")&&(c="mp4a.40.5")),-1!==d.indexOf("android")&&"audio/mpeg"!==s.container&&(c="mp4a.40.2",this.log("Android: force audio codec to "+c)),e.audioCodec&&e.audioCodec!==c&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+c+'"'),s.levelCodec=c,s.id="main",this.log("Init audio buffer, container:"+s.container+", codecs[selected/level/parsed]=["+(c||"")+"/"+(e.audioCodec||"")+"/"+s.codec+"]")}u&&(u.levelCodec=e.videoCodec,u.id="main",this.log("Init video buffer, container:"+u.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+u.codec+"]")),l&&this.log("Init audiovideo buffer, container:"+l.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+l.codec+"]"),this.hls.trigger(o.Events.BUFFER_CODECS,t),Object.keys(t).forEach((function(e){var i=t[e].initSegment;null!==i&&void 0!==i&&i.byteLength&&a.hls.trigger(o.Events.BUFFER_APPENDING,{type:e,data:i,frag:r,part:null,chunkMeta:n,parent:r.type})})),this.tick()}},D.backtrack=function(e){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(e);var t=this.fragmentTracker.backtrack(e);this.fragPrevious=null,this.nextLoadPosition=e.start,t?this.resetFragmentLoading(e):this.state=i.State.BACKTRACKING},D.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&e.readyState>1&&!1===e.seeking){var r=e.currentTime;if(s.BufferHelper.isBuffered(e,r)?t=this.getAppendedFrag(r):s.BufferHelper.isBuffered(e,r+.1)&&(t=this.getAppendedFrag(r+.1)),t){var n=this.fragPlaying,i=t.level;n&&t.sn===n.sn&&n.level===i&&t.urlId===n.urlId||(this.hls.trigger(o.Events.FRAG_CHANGED,{frag:t}),n&&n.level===i||this.hls.trigger(o.Events.LEVEL_SWITCHED,{level:i}),this.fragPlaying=t)}}},E=y,(b=[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getAppendedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;if(e){var t=this.getAppendedFrag(e.currentTime);return this.followingBufferedFrag(t)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&g(E.prototype,b),_&&g(E,_),y}(i.default)},"./src/controller/subtitle-stream-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"SubtitleStreamController",(function(){return p}));var n=r("./src/events.ts"),i=r("./src/utils/buffer-helper.ts"),a=r("./src/controller/fragment-finders.ts"),o=r("./src/utils/discontinuities.ts"),s=r("./src/controller/level-helper.ts"),u=r("./src/controller/fragment-tracker.ts"),l=r("./src/controller/base-stream-controller.ts"),c=r("./src/types/loader.ts"),d=r("./src/types/level.ts");function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var p=function(e){var t,r;function p(t,r){var n;return(n=e.call(this,t,r,"[subtitle-stream-controller]")||this).levels=[],n.currentTrackId=-1,n.tracksBuffered=[],n.mainDetails=null,n._registerListeners(),n}r=e,(t=p).prototype=Object.create(r.prototype),t.prototype.constructor=t,h(t,r);var v,g,m,y=p.prototype;return y.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},y._registerListeners=function(){var e=this.hls;e.on(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(n.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(n.Events.ERROR,this.onError,this),e.on(n.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(n.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(n.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(n.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(n.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},y._unregisterListeners=function(){var e=this.hls;e.off(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(n.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(n.Events.ERROR,this.onError,this),e.off(n.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(n.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(n.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(n.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(n.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},y.startLoad=function(){this.stopLoad(),this.state=l.State.IDLE,this.setInterval(500),this.tick()},y.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},y.onLevelLoaded=function(e,t){this.mainDetails=t.details},y.onSubtitleFragProcessed=function(e,t){var r=t.frag,n=t.success;if(this.fragPrevious=r,this.state=l.State.IDLE,n){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var a,o=r.start,s=0;s<i.length;s++)if(o>=i[s].start&&o<=i[s].end){a=i[s];break}var u=r.start+r.duration;a?a.end=u:(a={start:o,end:u},i.push(a)),this.fragmentTracker.fragBuffered(r)}}},y.onBufferFlushing=function(e,t){var r=t.startOffset,n=t.endOffset;if(0===r&&n!==Number.POSITIVE_INFINITY){var i=this.currentTrackId,a=this.levels;if(!a.length||!a[i]||!a[i].details)return;var o=n-a[i].details.targetduration;if(o<=0)return;t.endOffsetSubtitles=Math.max(0,o),this.tracksBuffered.forEach((function(e){for(var t=0;t<e.length;)if(e[t].end<=o)e.shift();else{if(!(e[t].start<o))break;e[t].start=o,t++}})),this.fragmentTracker.removeFragmentsInRange(r,o,c.PlaylistLevelType.SUBTITLE)}},y.onError=function(e,t){var r,n=t.frag;n&&n.type===c.PlaylistLevelType.SUBTITLE&&(null!==(r=this.fragCurrent)&&void 0!==r&&r.loader&&this.fragCurrent.loader.abort(),this.state=l.State.IDLE)},y.onSubtitleTracksUpdated=function(e,t){var r=this,n=t.subtitleTracks;this.tracksBuffered=[],this.levels=n.map((function(e){return new d.Level(e)})),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach((function(e){r.tracksBuffered[e.id]=[]})),this.mediaBuffer=null},y.onSubtitleTrackSwitch=function(e,t){if(this.currentTrackId=t.id,this.levels.length&&-1!==this.currentTrackId){var r=this.levels[this.currentTrackId];null!==r&&void 0!==r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.setInterval(500)}else this.clearInterval()},y.onSubtitleTrackLoaded=function(e,t){var r,n=t.details,i=t.id,u=this.currentTrackId,c=this.levels;if(c.length){var d=c[u];if(!(i>=c.length||i!==u)&&d){if(this.mediaBuffer=this.mediaBufferTimeRanges,n.live||null!==(r=d.details)&&void 0!==r&&r.live){var f=this.mainDetails;if(n.deltaUpdateFailed||!f)return;var h=f.fragments[0];d.details?0===this.alignPlaylists(n,d.details)&&h&&Object(s.addSliding)(n,h.start):n.hasProgramDateTime&&f.hasProgramDateTime?Object(o.alignMediaPlaylistByPDT)(n,f):h&&Object(s.addSliding)(n,h.start)}d.details=n,this.levelLastLoaded=i,this.tick(),n.live&&!this.fragCurrent&&this.media&&this.state===l.State.IDLE&&(Object(a.findFragmentByPTS)(null,n.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),d.details=void 0))}}},y._handleFragmentLoadComplete=function(e){var t=e.frag,r=e.payload,i=t.decryptdata,a=this.hls;if(!this.fragContextChanged(t)&&r&&r.byteLength>0&&i&&i.key&&i.iv&&"AES-128"===i.method){var o=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer).then((function(e){var r=performance.now();a.trigger(n.Events.FRAG_DECRYPTED,{frag:t,payload:e,stats:{tstart:o,tdecrypt:r}})}))}},y.doTick=function(){if(this.media){if(this.state===l.State.IDLE){var e,t=this.currentTrackId,r=this.levels;if(!r.length||!r[t]||!r[t].details)return;var n=r[t].details,o=n.targetduration,s=this.config,c=this.media,d=i.BufferHelper.bufferedInfo(this.mediaBufferTimeRanges,c.currentTime-o,s.maxBufferHole),f=d.end;if(d.len>this.getMaxBufferLength()+o)return;console.assert(n,"Subtitle track details are defined on idle subtitle stream controller tick");var h,p=n.fragments,v=p.length,g=n.edge,m=this.fragPrevious;if(f<g){var y=s.maxFragLookUpTolerance;!(h=Object(a.findFragmentByPTS)(m,p,f,y))&&m&&m.start<p[0].start&&(h=p[0])}else h=p[v-1];null!==(e=h)&&void 0!==e&&e.encrypted?this.loadKey(h,n):h&&this.fragmentTracker.getState(h)===u.FragmentState.NOT_LOADED&&this.loadFragment(h,n,f)}}else this.state=l.State.IDLE},y.loadFragment=function(t,r,n){this.fragCurrent=t,e.prototype.loadFragment.call(this,t,r,n)},v=p,(g=[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}])&&f(v.prototype,g),m&&f(v,m),p}(l.default)},"./src/controller/subtitle-track-controller.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/events.ts"),i=r("./src/utils/texttrack-utils.ts"),a=r("./src/controller/base-playlist-controller.ts"),o=r("./src/types/loader.ts");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}var l=function(e){var t,r;function a(t){var r;return(r=e.call(this,t,"[subtitle-track-controller]")||this).media=null,r.tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.selectDefaultTrack=!0,r.queuedDefaultTrack=-1,r.trackChangeListener=function(){return r.onTextTracksChanged()},r.asyncPollTrackChange=function(){return r.pollTrackChange(0)},r.useTextTrackPolling=!1,r.subtitlePollingInterval=-1,r.subtitleDisplay=!0,r.registerListeners(),r}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,u(t,r);var l,d,f,h=a.prototype;return h.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,e.prototype.destroy.call(this)},h.registerListeners=function(){var e=this.hls;e.on(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(n.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(n.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(n.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(n.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(n.Events.ERROR,this.onError,this)},h.unregisterListeners=function(){var e=this.hls;e.off(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(n.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(n.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(n.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(n.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(n.Events.ERROR,this.onError,this)},h.onMediaAttached=function(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},h.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)},h.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),c(this.media.textTracks).forEach((function(e){Object(i.clearCurrentCues)(e)})),this.subtitleTrack=-1,this.media=null)},h.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},h.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},h.onSubtitleTrackLoaded=function(e,t){var r=t.id,n=t.details,i=this.trackId,a=this.tracksInGroup[i];if(a){var o=a.details;a.details=t.details,this.log("subtitle track "+r+" loaded ["+n.startSN+"-"+n.endSN+"]"),r===this.trackId&&(this.retryCount=0,this.playlistLoaded(r,t,o))}else this.warn("Invalid subtitle track id "+r)},h.onLevelLoading=function(e,t){this.switchLevel(t.level)},h.onLevelSwitching=function(e,t){this.switchLevel(t.level)},h.switchLevel=function(e){var t=this.hls.levels[e];if(null!==t&&void 0!==t&&t.textGroupIds){var r=t.textGroupIds[t.urlId];if(this.groupId!==r){var i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,a=this.tracks.filter((function(e){return!r||e.groupId===r}));this.tracksInGroup=a;var o=this.findTrackId(null===i||void 0===i?void 0:i.name)||this.findTrackId();this.groupId=r;var s={subtitleTracks:a};this.log("Updating subtitle tracks, "+a.length+' track(s) found in "'+r+'" group-id'),this.hls.trigger(n.Events.SUBTITLE_TRACKS_UPDATED,s),-1!==o&&this.setSubtitleTrack(o,i)}}},h.findTrackId=function(e){for(var t=this.tracksInGroup,r=0;r<t.length;r++){var n=t[r];if((!this.selectDefaultTrack||n.default)&&(!e||e===n.name))return n.id}return-1},h.onError=function(t,r){e.prototype.onError.call(this,t,r),!r.fatal&&r.context&&r.context.type===o.PlaylistContextType.SUBTITLE_TRACK&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&this.retryLoadingOrFail(r)},h.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var r=t.id,i=t.groupId,a=t.url;if(e)try{a=e.addDirectives(a)}catch(o){this.warn("Could not construct new URL with HLS Delivery Directives: "+o)}this.log("Loading subtitle playlist for id "+r),this.hls.trigger(n.Events.SUBTITLE_TRACK_LOADING,{url:a,id:r,groupId:i,deliveryDirectives:e||null})}},h.toggleTrackModes=function(e){var t=this,r=this.media,n=this.subtitleDisplay,i=this.trackId;if(r){var a=c(r.textTracks),o=a.filter((function(e){return e.groupId===t.groupId}));if(-1===e)[].slice.call(a).forEach((function(e){e.mode="disabled"}));else{var s=o[i];s&&(s.mode="disabled")}var u=o[e];u&&(u.mode=n?"showing":"hidden")}},h.setSubtitleTrack=function(e,t){var r,i=this.tracksInGroup;if(this.media){if(this.trackId!==e&&this.toggleTrackModes(e),!(this.trackId===e&&(-1===e||null!==(r=i[e])&&void 0!==r&&r.details)||e<-1||e>=i.length)){this.clearTimer();var a=i[e];if(this.log("Switching to subtitle track "+e),this.trackId=e,a){var o=a.id,s=a.groupId,u=void 0===s?"":s,l=a.name,c=a.type,d=a.url;this.hls.trigger(n.Events.SUBTITLE_TRACK_SWITCH,{id:o,groupId:u,name:l,type:c,url:d});var f=this.switchParams(a.url,null===t||void 0===t?void 0:t.details);this.loadPlaylist(f)}else this.hls.trigger(n.Events.SUBTITLE_TRACK_SWITCH,{id:e})}}else this.queuedDefaultTrack=e},h.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=c(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},l=a,(d=[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1;var t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}}])&&s(l.prototype,d),f&&s(l,f),a}(a.default);function c(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"subtitles"===n.kind&&n.label&&t.push(e[r])}return t}t.default=l},"./src/controller/timeline-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"TimelineController",(function(){return f}));var n=r("./src/polyfills/number.ts"),i=r("./src/events.ts"),a=r("./src/utils/cea-608-parser.ts"),o=r("./src/utils/output-filter.ts"),s=r("./src/utils/webvtt-parser.ts"),u=r("./src/utils/texttrack-utils.ts"),l=r("./src/utils/imsc1-ttml-parser.ts"),c=r("./src/types/loader.ts"),d=r("./src/utils/logger.ts"),f=function(){function e(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var t=new o.default(this,"textTrack1"),r=new o.default(this,"textTrack2"),n=new o.default(this,"textTrack3"),s=new o.default(this,"textTrack4");this.cea608Parser1=new a.default(1,t,r),this.cea608Parser2=new a.default(3,n,s)}e.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(i.Events.FRAG_LOADING,this.onFragLoading,this),e.on(i.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(i.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(i.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(i.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(i.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var t=e.prototype;return t.destroy=function(){var e=this.hls;e.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(i.Events.FRAG_LOADING,this.onFragLoading,this),e.off(i.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(i.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(i.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(i.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(i.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},t.addCues=function(e,t,r,n,a){for(var o,s,u,l,c=!1,d=a.length;d--;){var f=a[d],h=(o=f[0],s=f[1],u=t,l=r,Math.min(s,l)-Math.max(o,u));if(h>=0&&(f[0]=Math.min(f[0],t),f[1]=Math.max(f[1],r),c=!0,h/(r-t)>.5))return}if(c||a.push([t,r]),this.config.renderTextTracksNatively){var p=this.captionsTracks[e];this.Cues.newCue(p,t,r,n)}else{var v=this.Cues.newCue(null,t,r,n);this.hls.trigger(i.Events.CUES_PARSED,{type:"captions",cues:v,track:e})}},t.onInitPtsFound=function(e,t){var r=this,n=t.frag,a=t.id,o=t.initPTS,s=t.timescale,u=this.unparsedVttFrags;"main"===a&&(this.initPTS[n.cc]=o,this.timescale[n.cc]=s),u.length&&(this.unparsedVttFrags=[],u.forEach((function(e){r.onFragLoaded(i.Events.FRAG_LOADED,e)})))},t.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var n=t.textTracks[r];if(n[e])return n}return null},t.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},t.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,r=this.captionsTracks,n=this.media,i=t[e],a=i.label,o=i.languageCode,s=this.getExistingTrack(e);if(s)r[e]=s,Object(u.clearCurrentCues)(r[e]),Object(u.sendAddTrackEvent)(r[e],n);else{var l=this.createTextTrack("captions",a,o);l&&(l[e]=!0,r[e]=l)}}},t.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var r={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(i.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},t.createTextTrack=function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)},t.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},t.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){Object(u.clearCurrentCues)(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},t.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},t._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)Object(u.clearCurrentCues)(t[r])}},t.onSubtitleTracksUpdated=function(e,t){var r=this;this.textTracks=[];var n=t.subtitleTracks||[],a=n.some((function(e){return e.textCodec===l.IMSC1_CODEC}));if(this.config.enableWebVTT||a&&this.config.enableIMSC1){var o=this.tracks&&n&&this.tracks.length===n.length;if(this.tracks=n||[],this.config.renderTextTracksNatively){var s=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,t){var n;if(t<s.length){for(var i=null,a=0;a<s.length;a++)if(h(s[a],e)){i=s[a];break}i&&(n=i)}n?Object(u.clearCurrentCues)(n):(n=r.createTextTrack("subtitles",e.name,e.lang))&&(n.mode="disabled"),n&&(n.groupId=e.groupId,r.textTracks.push(n))}))}else if(!o&&this.tracks&&this.tracks.length){var c=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}));this.hls.trigger(i.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:c})}}},t.onManifestLoaded=function(e,t){var r=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(t){var n="textTrack"+t[1],i=r.captionsProperties[n];i&&(i.label=e.name,e.lang&&(i.languageCode=e.lang),i.media=e)}}))},t.onFragLoading=function(e,t){var r=this.cea608Parser1,n=this.cea608Parser2,i=this.lastSn,a=this.lastPartIndex;if(this.enabled&&r&&n&&t.frag.type===c.PlaylistLevelType.MAIN){var o,s,u=t.frag.sn,l=null!=(o=null===t||void 0===t||null===(s=t.part)||void 0===s?void 0:s.index)?o:-1;u===i+1||u===i&&l===a+1||(r.reset(),n.reset()),this.lastSn=u,this.lastPartIndex=l}},t.onFragLoaded=function(e,t){var r=t.frag,a=t.payload,o=this.initPTS,s=this.unparsedVttFrags;if(r.type===c.PlaylistLevelType.SUBTITLE)if(a.byteLength){if(!Object(n.isFiniteNumber)(o[r.cc]))return s.push(t),void(o.length&&this.hls.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Missing initial subtitle PTS")}));var u=r.decryptdata,d="stats"in t;if(null==u||null==u.key||"AES-128"!==u.method||d){var f=this.tracks[r.level],h=this.vttCCs;h[r.cc]||(h[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),f&&f.textCodec===l.IMSC1_CODEC?this._parseIMSC1(r,a):this._parseVTTs(r,a,h)}}else this.hls.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})},t._parseIMSC1=function(e,t){var r=this,n=this.hls;Object(l.parseIMSC1)(t,this.initPTS[e.cc],this.timescale[e.cc],(function(t){r._appendCues(t,e.level),n.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){d.logger.log("Failed to parse IMSC1: "+t),n.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))},t._parseVTTs=function(e,t,r){var n=this,a=this.hls;Object(s.parseWebVTT)(t,this.initPTS[e.cc],this.timescale[e.cc],r,e.cc,e.start,(function(t){n._appendCues(t,e.level),a.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(r){n._fallbackToIMSC1(e,t),d.logger.log("Failed to parse VTT cue: "+r),a.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:r})}))},t._fallbackToIMSC1=function(e,t){var r=this,n=this.tracks[e.level];n.textCodec||Object(l.parseIMSC1)(t,this.initPTS[e.cc],this.timescale[e.cc],(function(){n.textCodec=l.IMSC1_CODEC,r._parseIMSC1(e,t)}),(function(){n.textCodec="wvtt"}))},t._appendCues=function(e,t){var r=this.hls;if(this.config.renderTextTracksNatively){var n=this.textTracks[t];if("disabled"===n.mode)return;e.forEach((function(e){return Object(u.addCueToTrack)(n,e)}))}else{var a=this.tracks[t].default?"default":"subtitles"+t;r.trigger(i.Events.CUES_PARSED,{type:"subtitles",cues:e,track:a})}},t.onFragDecrypted=function(e,t){var r=t.frag;if(r.type===c.PlaylistLevelType.SUBTITLE){if(!Object(n.isFiniteNumber)(this.initPTS[r.cc]))return void this.unparsedVttFrags.push(t);this.onFragLoaded(i.Events.FRAG_LOADED,t)}},t.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},t.onFragParsingUserdata=function(e,t){var r=this.cea608Parser1,n=this.cea608Parser2;if(this.enabled&&r&&n)for(var i=0;i<t.samples.length;i++){var a=t.samples[i].bytes;if(a){var o=this.extractCea608Data(a);r.addData(t.samples[i].pts,o[0]),n.addData(t.samples[i].pts,o[1])}}},t.onBufferFlushing=function(e,t){var r=t.startOffset,n=t.endOffset,i=t.endOffsetSubtitles,a=t.type,o=this.media;if(o&&!(o.currentTime<n)){if(!a||"video"===a){var s=this.captionsTracks;Object.keys(s).forEach((function(e){return Object(u.removeCuesInRange)(s[e],r,n)}))}if(this.config.renderTextTracksNatively&&0===r&&void 0!==i){var l=this.textTracks;Object.keys(l).forEach((function(e){return Object(u.removeCuesInRange)(l[e],r,i)}))}}},t.extractCea608Data=function(e){for(var t=31&e[0],r=2,n=[[],[]],i=0;i<t;i++){var a=e[r++],o=127&e[r++],s=127&e[r++],u=3&a;0===o&&0===s||0!==(4&a)&&(0!==u&&1!==u||(n[u].push(o),n[u].push(s)))}return n},e}();function h(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}},"./src/crypt/aes-crypto.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return n}));var n=function(){function e(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}()},"./src/crypt/aes-decryptor.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"removePadding",(function(){return i})),r.d(t,"default",(function(){return a}));var n=r("./src/utils/typed-array.ts");function i(e){var t=e.byteLength,r=t&&new DataView(e.buffer).getUint8(t-1);return r?Object(n.sliceUint8)(e,0,t-r):e}var a=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},t.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],a=r[2],o=r[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],d=s[3],f=new Uint32Array(256),h=0,p=0,v=0;for(v=0;v<256;v++)f[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,e[h]=g,t[g]=h;var m=f[h],y=f[m],E=f[y],b=257*f[g]^16843008*g;n[h]=b<<24|b>>>8,i[h]=b<<16|b>>>16,a[h]=b<<8|b>>>24,o[h]=b,b=16843009*E^65537*y^257*m^16843008*h,u[g]=b<<24|b>>>8,l[g]=b<<16|b>>>16,c[g]=b<<8|b>>>24,d[g]=b,h?(h=m^f[f[f[E^m]]],p^=f[f[p]]):h=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,u,l=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(l),d=this.invKeySchedule=new Uint32Array(l),f=this.sBox,h=this.rcon,p=this.invSubMix,v=p[0],g=p[1],m=p[2],y=p[3];for(a=0;a<l;a++)a<i?s=c[a]=t[a]:(u=s,a%i===0?(u=f[(u=u<<8|u>>>24)>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[255&u],u^=h[a/i|0]<<24):i>6&&a%i===4&&(u=f[u>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[255&u]),c[a]=s=(c[a-i]^u)>>>0);for(o=0;o<l;o++)a=l-o,u=3&o?c[a]:c[a-4],d[o]=o<4||a<=4?u:v[f[u>>>24]]^g[f[u>>>16&255]]^m[f[u>>>8&255]]^y[f[255&u]],d[o]=d[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,r){for(var n,i,a,o,s,u,l,c,d,f,h,p,v,g,m=this.keySize+6,y=this.invKeySchedule,E=this.invSBox,b=this.invSubMix,_=b[0],D=b[1],S=b[2],w=b[3],T=this.uint8ArrayToUint32Array_(r),C=T[0],A=T[1],x=T[2],k=T[3],L=new Int32Array(e),F=new Int32Array(L.length),R=this.networkToHostOrderSwap;t<L.length;){for(d=R(L[t]),f=R(L[t+1]),h=R(L[t+2]),p=R(L[t+3]),s=d^y[0],u=p^y[1],l=h^y[2],c=f^y[3],v=4,g=1;g<m;g++)n=_[s>>>24]^D[u>>16&255]^S[l>>8&255]^w[255&c]^y[v],i=_[u>>>24]^D[l>>16&255]^S[c>>8&255]^w[255&s]^y[v+1],a=_[l>>>24]^D[c>>16&255]^S[s>>8&255]^w[255&u]^y[v+2],o=_[c>>>24]^D[s>>16&255]^S[u>>8&255]^w[255&l]^y[v+3],s=n,u=i,l=a,c=o,v+=4;n=E[s>>>24]<<24^E[u>>16&255]<<16^E[l>>8&255]<<8^E[255&c]^y[v],i=E[u>>>24]<<24^E[l>>16&255]<<16^E[c>>8&255]<<8^E[255&s]^y[v+1],a=E[l>>>24]<<24^E[c>>16&255]<<16^E[s>>8&255]<<8^E[255&u]^y[v+2],o=E[c>>>24]<<24^E[s>>16&255]<<16^E[u>>8&255]<<8^E[255&l]^y[v+3],F[t]=R(n^C),F[t+1]=R(o^A),F[t+2]=R(a^x),F[t+3]=R(i^k),C=d,A=f,x=h,k=p,t+=4}return F.buffer},e}()},"./src/crypt/decrypter.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return l}));var n=r("./src/crypt/aes-crypto.ts"),i=r("./src/crypt/fast-aes-key.ts"),a=r("./src/crypt/aes-decryptor.ts"),o=r("./src/utils/logger.ts"),s=r("./src/utils/mp4-tools.ts"),u=r("./src/utils/typed-array.ts"),l=function(){function e(e,t,r){var n=(void 0===r?{}:r).removePKCS7Padding,i=void 0===n||n;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var a=self.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(o){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var t=e.prototype;return t.destroy=function(){this.observer=null},t.isSync=function(){return this.config.enableSoftwareAES},t.flush=function(){var e=this.currentResult;if(e){var t=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?Object(a.removePadding)(t):t}this.reset()},t.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},t.decrypt=function(e,t,r,n){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(e),t,r);var i=this.flush();i&&n(i.buffer)}else this.webCryptoDecrypt(new Uint8Array(e),t,r).then(n)},t.softwareDecrypt=function(e,t,r){var n=this.currentIV,i=this.currentResult,o=this.remainderData;this.logOnce("JS AES decrypt"),o&&(e=Object(s.appendUint8Array)(o,e),this.remainderData=null);var l=this.getValidChunk(e);if(!l.length)return null;n&&(r=n);var c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new a.default),c.expandKey(t);var d=i;return this.currentResult=c.decrypt(l.buffer,0,r),this.currentIV=Object(u.sliceUint8)(l,-16).buffer,d||null},t.webCryptoDecrypt=function(e,t,r){var a=this,o=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new i.default(o,t)),this.fastAesKey.expandKey().then((function(t){return o?new n.default(o,r).decrypt(e.buffer,t):Promise.reject(new Error("web crypto not initialized"))})).catch((function(n){return a.onWebCryptoError(n,e,t,r)}))},t.onWebCryptoError=function(e,t,r,n){return o.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",e),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(t,r,n)},t.getValidChunk=function(e){var t=e,r=e.length-e.length%16;return r!==e.length&&(t=Object(u.sliceUint8)(e,0,r),this.remainderData=Object(u.sliceUint8)(e,r)),t},t.logOnce=function(e){this.logEnabled&&(o.logger.log("[decrypter.ts]: "+e),this.logEnabled=!1)},e}()},"./src/crypt/fast-aes-key.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return n}));var n=function(){function e(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}()},"./src/demux/aacdemuxer.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/demux/base-audio-demuxer.ts"),i=r("./src/demux/adts.ts"),a=r("./src/utils/logger.ts"),o=r("./src/demux/id3.ts");function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var u=function(e){var t,r;function n(t,r){var n;return(n=e.call(this)||this).observer=void 0,n.config=void 0,n.observer=t,n.config=r,n}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,s(t,r);var u=n.prototype;return u.resetInitSegment=function(t,r,n){e.prototype.resetInitSegment.call(this,t,r,n),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}},n.probe=function(e){if(!e)return!1;for(var t=(o.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(i.probe(e,t))return a.logger.log("ADTS sync word found !"),!0;return!1},u.canParse=function(e,t){return i.canParse(e,t)},u.appendFrame=function(e,t,r){i.initTrackConfig(e,this.observer,t,r,e.manifestCodec);var n=i.appendFrame(e,t,r,this.initPTS,this.frameIndex);if(n&&0===n.missing)return n},n}(n.default);u.minProbeByteLength=9,t.default=u},"./src/demux/adts.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getAudioConfig",(function(){return o})),r.d(t,"isHeaderPattern",(function(){return s})),r.d(t,"getHeaderLength",(function(){return u})),r.d(t,"getFullFrameLength",(function(){return l})),r.d(t,"canGetFrameLength",(function(){return c})),r.d(t,"isHeader",(function(){return d})),r.d(t,"canParse",(function(){return f})),r.d(t,"probe",(function(){return h})),r.d(t,"initTrackConfig",(function(){return p})),r.d(t,"getFrameDuration",(function(){return v})),r.d(t,"parseFrameHeader",(function(){return g})),r.d(t,"appendFrame",(function(){return m}));var n=r("./src/utils/logger.ts"),i=r("./src/errors.ts"),a=r("./src/events.ts");function o(e,t,r,o){var s,u,l,c,d=navigator.userAgent.toLowerCase(),f=o,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=1+((192&t[r+2])>>>6);var p=(60&t[r+2])>>>2;if(!(p>h.length-1))return l=(1&t[r+2])<<2,l|=(192&t[r+3])>>>6,n.logger.log("manifest codec:"+o+", ADTS type:"+s+", samplingIndex:"+p),/firefox/i.test(d)?p>=6?(s=5,c=new Array(4),u=p-3):(s=2,c=new Array(2),u=p):-1!==d.indexOf("android")?(s=2,c=new Array(2),u=p):(s=5,c=new Array(4),o&&(-1!==o.indexOf("mp4a.40.29")||-1!==o.indexOf("mp4a.40.5"))||!o&&p>=6?u=p-3:((o&&-1!==o.indexOf("mp4a.40.2")&&(p>=6&&1===l||/vivaldi/i.test(d))||!o&&1===l)&&(s=2,c=new Array(2)),u=p)),c[0]=s<<3,c[0]|=(14&p)>>1,c[1]|=(1&p)<<7,c[1]|=l<<3,5===s&&(c[1]|=(14&u)>>1,c[2]=(1&u)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[p],channelCount:l,codec:"mp4a.40."+s,manifestCodec:f};e.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+p})}function s(e,t){return 255===e[t]&&240===(246&e[t+1])}function u(e,t){return 1&e[t+1]?7:9}function l(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function c(e,t){return t+5<e.length}function d(e,t){return t+1<e.length&&s(e,t)}function f(e,t){return c(e,t)&&s(e,t)&&l(e,t)<=e.length-t}function h(e,t){if(d(e,t)){var r=u(e,t);if(t+r>=e.length)return!1;var n=l(e,t);if(n<=r)return!1;var i=t+n;return i===e.length||d(e,i)}return!1}function p(e,t,r,i,a){if(!e.samplerate){var s=o(t,r,i,a);if(!s)return;e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,n.logger.log("parsed codec:"+e.codec+", rate:"+s.samplerate+", channels:"+s.channelCount)}}function v(e){return 9216e4/e}function g(e,t,r,n,i){var a=u(e,t),o=l(e,t);if((o-=a)>0)return{headerLength:a,frameLength:o,stamp:r+n*i}}function m(e,t,r,n,i){var a=g(t,r,n,i,v(e.samplerate));if(a){var o,s=a.frameLength,u=a.headerLength,l=a.stamp,c=u+s,d=Math.max(0,r+c-t.length);d?(o=new Uint8Array(c-u)).set(t.subarray(r+u,t.length),0):o=t.subarray(r+u,r+c);var f={unit:o,pts:l};return d||e.samples.push(f),{sample:f,length:c,missing:d}}}},"./src/demux/base-audio-demuxer.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"initPTSFn",(function(){return l}));var n=r("./src/polyfills/number.ts"),i=r("./src/demux/id3.ts"),a=r("./src/demux/dummy-demuxed-track.ts"),o=r("./src/utils/mp4-tools.ts"),s=r("./src/utils/typed-array.ts"),u=function(){function e(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var t=e.prototype;return t.resetInitSegment=function(e,t,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},t.resetTimeStamp=function(){},t.resetContiguity=function(){},t.canParse=function(e,t){return!1},t.appendFrame=function(e,t,r){},t.demux=function(e,t){this.cachedData&&(e=Object(o.appendUint8Array)(this.cachedData,e),this.cachedData=null);var r,n,u=i.getID3Data(e,0),c=u?u.length:0,d=this._audioTrack,f=this._id3Track,h=u?i.getTimeStamp(u):void 0,p=e.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=l(h,t)),u&&u.length>0&&f.samples.push({pts:this.initPTS,dts:this.initPTS,data:u}),n=this.initPTS;c<p;){if(this.canParse(e,c)){var v=this.appendFrame(d,e,c);v?(this.frameIndex++,n=v.sample.pts,r=c+=v.length):c=p}else i.canParse(e,c)?(u=i.getID3Data(e,c),f.samples.push({pts:n,dts:n,data:u}),r=c+=u.length):c++;if(c===p&&r!==p){var g=Object(s.sliceUint8)(e,r);this.cachedData?this.cachedData=Object(o.appendUint8Array)(this.cachedData,g):this.cachedData=g}}return{audioTrack:d,avcTrack:Object(a.dummyTrack)(),id3Track:f,textTrack:Object(a.dummyTrack)()}},t.demuxSampleAes=function(e,t,r){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:Object(a.dummyTrack)(),id3Track:this._id3Track,textTrack:Object(a.dummyTrack)()}},t.destroy=function(){},e}(),l=function(e,t){return Object(n.isFiniteNumber)(e)?90*e:9e4*t};t.default=u},"./src/demux/chunk-cache.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return n}));var n=function(){function e(){this.chunks=[],this.dataLength=0}var t=e.prototype;return t.push=function(e){this.chunks.push(e),this.dataLength+=e.length},t.flush=function(){var e,t=this.chunks,r=this.dataLength;return t.length?(e=1===t.length?t[0]:function(e,t){for(var r=new Uint8Array(t),n=0,i=0;i<e.length;i++){var a=e[i];r.set(a,n),n+=a.length}return r}(t,r),this.reset(),e):new Uint8Array(0)},t.reset=function(){this.chunks.length=0,this.dataLength=0},e}()},"./src/demux/dummy-demuxed-track.ts":function(e,t,r){"use strict";function n(){return{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}r.r(t),r.d(t,"dummyTrack",(function(){return n}))},"./src/demux/exp-golomb.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/utils/logger.ts"),i=function(){function e(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&n.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){for(var t=8,r=8,n=0;n<e;n++)0!==r&&(r=(t+this.readEG()+256)%256),t=0===r?t:r},t.readSPS=function(){var e,t,r,n=0,i=0,a=0,o=0,s=this.readUByte.bind(this),u=this.readBits.bind(this),l=this.readUEG.bind(this),c=this.readBoolean.bind(this),d=this.skipBits.bind(this),f=this.skipEG.bind(this),h=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);s();var v=s();if(u(5),d(3),s(),h(),100===v||110===v||122===v||244===v||44===v||83===v||86===v||118===v||128===v){var g=l();if(3===g&&d(1),h(),h(),d(1),c())for(t=3!==g?8:12,r=0;r<t;r++)c()&&p(r<6?16:64)}h();var m=l();if(0===m)l();else if(1===m)for(d(1),f(),f(),e=l(),r=0;r<e;r++)f();h(),d(1);var y=l(),E=l(),b=u(1);0===b&&d(1),d(1),c()&&(n=l(),i=l(),a=l(),o=l());var _=[1,1];if(c()&&c())switch(s()){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:_=[s()<<8|s(),s()<<8|s()]}return{width:Math.ceil(16*(y+1)-2*n-2*i),height:(2-b)*(E+1)*16-(b?2:4)*(a+o),pixelRatio:_}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();t.default=i},"./src/demux/id3.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"isHeader",(function(){return i})),r.d(t,"isFooter",(function(){return a})),r.d(t,"getID3Data",(function(){return o})),r.d(t,"canParse",(function(){return u})),r.d(t,"getTimeStamp",(function(){return l})),r.d(t,"isTimeStampFrame",(function(){return c})),r.d(t,"getID3Frames",(function(){return f})),r.d(t,"decodeFrame",(function(){return h})),r.d(t,"utf8ArrayToStr",(function(){return y})),r.d(t,"testables",(function(){return E}));var n,i=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},a=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},o=function(e,t){for(var r=t,n=0;i(e,t);)n+=10,n+=s(e,t+6),a(e,t+10)&&(n+=10),t+=n;if(n>0)return e.subarray(r,r+n)},s=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3]},u=function(e,t){return i(e,t)&&s(e,t+6)+10<=e.length-t},l=function(e){for(var t=f(e),r=0;r<t.length;r++){var n=t[r];if(c(n))return m(n)}},c=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},d=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),r=s(e,4);return{type:t,size:r,data:e.subarray(10,10+r)}},f=function(e){for(var t=0,r=[];i(e,t);){for(var n=s(e,t+6),o=(t+=10)+n;t+8<o;){var u=d(e.subarray(t)),l=h(u);l&&r.push(l),t+=u.size+10}a(e,t)&&(t+=10)}return r},h=function(e){return"PRIV"===e.type?p(e):"W"===e.type[0]?g(e):v(e)},p=function(e){if(!(e.size<2)){var t=y(e.data,!0),r=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:r.buffer}}},v=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,r=y(e.data.subarray(t),!0);t+=r.length+1;var n=y(e.data.subarray(t));return{key:e.type,info:r,data:n}}var i=y(e.data.subarray(1));return{key:e.type,data:i}}},g=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,r=y(e.data.subarray(t),!0);t+=r.length+1;var n=y(e.data.subarray(t));return{key:e.type,info:r,data:n}}var i=y(e.data);return{key:e.type,data:i}},m=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},y=function(e,t){void 0===t&&(t=!1);var r=b();if(r){var n=r.decode(e);if(t){var i=n.indexOf("\0");return-1!==i?n.substring(0,i):n}return n.replace(/\0/g,"")}for(var a,o,s,u=e.length,l="",c=0;c<u;){if(0===(a=e[c++])&&t)return l;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(a);break;case 12:case 13:o=e[c++],l+=String.fromCharCode((31&a)<<6|63&o);break;case 14:o=e[c++],s=e[c++],l+=String.fromCharCode((15&a)<<12|(63&o)<<6|(63&s)<<0)}}return l},E={decodeTextFrame:v};function b(){return n||"undefined"===typeof self.TextDecoder||(n=new self.TextDecoder("utf-8")),n}},"./src/demux/mp3demuxer.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/demux/base-audio-demuxer.ts"),i=r("./src/demux/id3.ts"),a=r("./src/utils/logger.ts"),o=r("./src/demux/mpegaudio.ts");function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,s(t,r);var u=n.prototype;return u.resetInitSegment=function(t,r,n){e.prototype.resetInitSegment.call(this,t,r,n),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}},n.probe=function(e){if(!e)return!1;for(var t=(i.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(o.probe(e,t))return a.logger.log("MPEG Audio sync word found !"),!0;return!1},u.canParse=function(e,t){return o.canParse(e,t)},u.appendFrame=function(e,t,r){if(null!==this.initPTS)return o.appendFrame(e,t,r,this.initPTS,this.frameIndex)},n}(n.default);u.minProbeByteLength=4,t.default=u},"./src/demux/mp4demuxer.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/utils/mp4-tools.ts"),i=r("./src/demux/dummy-demuxed-track.ts"),a=function(){function e(e,t){this.remainderData=null,this.config=void 0,this.config=t}var t=e.prototype;return t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.resetContiguity=function(){},e.probe=function(e){return Object(n.findBox)({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.demux=function(e){var t=e,r=Object(i.dummyTrack)();if(this.config.progressive){this.remainderData&&(t=Object(n.appendUint8Array)(this.remainderData,e));var a=Object(n.segmentValidRange)(t);this.remainderData=a.remainder,r.samples=a.valid||new Uint8Array}else r.samples=t;return{audioTrack:Object(i.dummyTrack)(),avcTrack:r,id3Track:Object(i.dummyTrack)(),textTrack:Object(i.dummyTrack)()}},t.flush=function(){var e=Object(i.dummyTrack)();return e.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:Object(i.dummyTrack)(),avcTrack:e,id3Track:Object(i.dummyTrack)(),textTrack:Object(i.dummyTrack)()}},t.demuxSampleAes=function(e,t,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},t.destroy=function(){},e}();a.minProbeByteLength=1024,t.default=a},"./src/demux/mpegaudio.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"appendFrame",(function(){return u})),r.d(t,"parseHeader",(function(){return l})),r.d(t,"isHeaderPattern",(function(){return c})),r.d(t,"isHeader",(function(){return d})),r.d(t,"canParse",(function(){return f})),r.d(t,"probe",(function(){return h}));var n=null,i=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],a=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],o=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],s=[0,1,1,4];function u(e,t,r,n,i){if(!(r+24>t.length)){var a=l(t,r);if(a&&r+a.frameLength<=t.length){var o=n+i*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(r,r+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),{sample:s,length:a.frameLength,missing:0}}}}function l(e,t){var r=e[t+1]>>3&3,u=e[t+1]>>1&3,l=e[t+2]>>4&15,c=e[t+2]>>2&3;if(1!==r&&0!==l&&15!==l&&3!==c){var d=e[t+2]>>1&1,f=e[t+3]>>6,h=1e3*i[14*(3===r?3-u:3===u?3:4)+l-1],p=a[3*(3===r?0:2===r?1:2)+c],v=3===f?1:2,g=o[r][u],m=s[u],y=8*g*m,E=Math.floor(g*h/p+d)*m;if(null===n){var b=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);n=b?parseInt(b[1]):0}return!!n&&n<=87&&2===u&&h>=224e3&&0===f&&(e[t+3]=128|e[t+3]),{sampleRate:p,channelCount:v,frameLength:E,samplesPerFrame:y}}}function c(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])}function d(e,t){return t+1<e.length&&c(e,t)}function f(e,t){return c(e,t)&&4<=e.length-t}function h(e,t){if(t+1<e.length&&c(e,t)){var r=l(e,t),n=4;null!==r&&void 0!==r&&r.frameLength&&(n=r.frameLength);var i=t+n;return i===e.length||d(e,i)}return!1}},"./src/demux/sample-aes.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/crypt/decrypter.ts"),i=r("./src/demux/tsdemuxer.ts"),a=function(){function e(e,t,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new n.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,t)},t.decryptAacSample=function(e,t,r,n){var i=e[t].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){var o=new Uint8Array(a);i.set(o,16),n||s.decryptAacSamples(e,t+1,r)}))},t.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r},t.getAvcDecryptedUnit=function(e,t){for(var r=new Uint8Array(t),n=0,i=32;i<e.length-16;i+=160,n+=16)e.set(r.subarray(n,n+16),i);return e},t.decryptAvcSample=function(e,t,r,n,a,o){var s=Object(i.discardEPB)(a.data),u=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(u.buffer,(function(i){a.data=l.getAvcDecryptedUnit(s,i),o||l.decryptAvcSamples(e,t,r+1,n)}))},t.decryptAvcSamples=function(e,t,r,n){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;!(r>=i.length);r++){var a=i[r];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,a,o),!o)return}}}},e}();t.default=a},"./src/demux/transmuxer-interface.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r("./node_modules/webworkify-webpack/index.js"),i=r("./src/events.ts"),a=r("./src/demux/transmuxer.ts"),o=r("./src/utils/logger.ts"),s=r("./src/errors.ts"),u=r("./src/utils/mediasource-helper.ts"),l=r("./node_modules/eventemitter3/index.js"),c=Object(u.getMediaSource)()||{isTypeSupported:function(){return!1}},d=function(){function e(e,t,r,u){var d=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=e,this.id=t,this.onTransmuxComplete=r,this.onFlush=u;var f=e.config,h=function(t,r){(r=r||{}).frag=d.frag,r.id=d.id,e.trigger(t,r)};this.observer=new l.EventEmitter,this.observer.on(i.Events.FRAG_DECRYPTED,h),this.observer.on(i.Events.ERROR,h);var p={mp4:c.isTypeSupported("video/mp4"),mpeg:c.isTypeSupported("audio/mpeg"),mp3:c.isTypeSupported('audio/mp4; codecs="mp3"')},v=navigator.vendor;if(f.enableWorker&&"undefined"!==typeof Worker){var g;o.logger.log("demuxing in webworker");try{g=this.worker=n("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),g.addEventListener("message",this.onwmsg),g.onerror=function(t){e.trigger(i.Events.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(t.message+"  ("+t.filename+":"+t.lineno+")")})},g.postMessage({cmd:"init",typeSupported:p,vendor:v,id:t,config:JSON.stringify(f)})}catch(m){o.logger.warn("Error in worker:",m),o.logger.error("Error while initializing DemuxerWorker, fallback to inline"),g&&self.URL.revokeObjectURL(g.objectURL),this.transmuxer=new a.default(this.observer,p,f,v,t),this.worker=null}}else this.transmuxer=new a.default(this.observer,p,f,v,t)}var t=e.prototype;return t.destroy=function(){var e=this.worker;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.worker=null;else{var t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}var r=this.observer;r&&r.removeAllListeners(),this.observer=null},t.push=function(e,t,r,n,i,s,u,l,c,d){var f,h,p=this;c.transmuxing.start=self.performance.now();var v=this.transmuxer,g=this.worker,m=s?s.start:i.start,y=i.decryptdata,E=this.frag,b=!(E&&i.cc===E.cc),_=!(E&&c.level===E.level),D=E?c.sn-E.sn:-1,S=this.part?c.part-this.part.index:1,w=!_&&(1===D||0===D&&1===S),T=self.performance.now();(_||D||0===i.stats.parsing.start)&&(i.stats.parsing.start=T),!s||!S&&w||(s.stats.parsing.start=T);var C=!(E&&(null===(f=i.initSegment)||void 0===f?void 0:f.url)===(null===(h=E.initSegment)||void 0===h?void 0:h.url)),A=new a.TransmuxState(b,w,l,_,m,C);if(!w||b||C){o.logger.log("[transmuxer-interface, "+i.type+"]: Starting new transmux session for sn: "+c.sn+" p: "+c.part+" level: "+c.level+" id: "+c.id+"\n        discontinuity: "+b+"\n        trackSwitch: "+_+"\n        contiguous: "+w+"\n        accurateTimeOffset: "+l+"\n        timeOffset: "+m+"\n        initSegmentChange: "+C);var x=new a.TransmuxConfig(r,n,t,u,d);this.configureTransmuxer(x)}if(this.frag=i,this.part=s,g)g.postMessage({cmd:"demux",data:e,decryptdata:y,chunkMeta:c,state:A},e instanceof ArrayBuffer?[e]:[]);else if(v){var k=v.push(e,y,c,A);Object(a.isPromise)(k)?k.then((function(e){p.handleTransmuxComplete(e)})):this.handleTransmuxComplete(k)}},t.flush=function(e){var t=this;e.transmuxing.start=self.performance.now();var r=this.transmuxer,n=this.worker;if(n)n.postMessage({cmd:"flush",chunkMeta:e});else if(r){var i=r.flush(e);Object(a.isPromise)(i)?i.then((function(r){t.handleFlushResult(r,e)})):this.handleFlushResult(i,e)}},t.handleFlushResult=function(e,t){var r=this;e.forEach((function(e){r.handleTransmuxComplete(e)})),this.onFlush(t)},t.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},t.configureTransmuxer=function(e){var t=this.worker,r=this.transmuxer;t?t.postMessage({cmd:"configure",config:e}):r&&r.configure(e)},t.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},e}()},"./src/demux/transmuxer-worker.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r("./src/demux/transmuxer.ts"),i=r("./src/events.ts"),a=r("./src/utils/logger.ts"),o=r("./node_modules/eventemitter3/index.js");function s(e){var t=new o.EventEmitter,r=function(t,r){e.postMessage({event:t,data:r})};t.on(i.Events.FRAG_DECRYPTED,r),t.on(i.Events.ERROR,r),e.addEventListener("message",(function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.transmuxer=new n.default(t,o.typeSupported,s,o.vendor,o.id),Object(a.enableLogs)(s.debug),r("init",null);break;case"configure":e.transmuxer.configure(o.config);break;case"demux":var l=e.transmuxer.push(o.data,o.decryptdata,o.chunkMeta,o.state);Object(n.isPromise)(l)?l.then((function(t){u(e,t)})):u(e,l);break;case"flush":var d=o.chunkMeta,f=e.transmuxer.flush(d);Object(n.isPromise)(f)?f.then((function(t){c(e,t,d)})):c(e,f,d)}}))}function u(e,t){if((r=t.remuxResult).audio||r.video||r.text||r.id3||r.initSegment){var r,n=[],i=t.remuxResult,a=i.audio,o=i.video;a&&l(n,a),o&&l(n,o),e.postMessage({event:"transmuxComplete",data:t},n)}}function l(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function c(e,t,r){t.forEach((function(t){u(e,t)})),e.postMessage({event:"flush",data:r})}},"./src/demux/transmuxer.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return y})),r.d(t,"isPromise",(function(){return b})),r.d(t,"TransmuxConfig",(function(){return _})),r.d(t,"TransmuxState",(function(){return D}));var n,i=r("./src/events.ts"),a=r("./src/errors.ts"),o=r("./src/crypt/decrypter.ts"),s=r("./src/demux/aacdemuxer.ts"),u=r("./src/demux/mp4demuxer.ts"),l=r("./src/demux/tsdemuxer.ts"),c=r("./src/demux/mp3demuxer.ts"),d=r("./src/remux/mp4-remuxer.ts"),f=r("./src/remux/passthrough-remuxer.ts"),h=r("./src/demux/chunk-cache.ts"),p=r("./src/utils/mp4-tools.ts"),v=r("./src/utils/logger.ts");try{n=self.performance.now.bind(self.performance)}catch(S){v.logger.debug("Unable to use Performance API on this environment"),n=self.Date.now}var g=[{demux:l.default,remux:d.default},{demux:u.default,remux:f.default},{demux:s.default,remux:d.default},{demux:c.default,remux:d.default}],m=1024;g.forEach((function(e){var t=e.demux;m=Math.max(m,t.minProbeByteLength)}));var y=function(){function e(e,t,r,n,i){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new h.default,this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n,this.id=i}var t=e.prototype;return t.configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},t.push=function(e,t,r,i){var a=this,o=r.transmuxing;o.executeStart=n();var s=new Uint8Array(e),u=this.cache,l=this.config,c=this.currentTransmuxState,d=this.transmuxConfig;i&&(this.currentTransmuxState=i);var f=function(e,t){var r=null;return e.byteLength>0&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method&&(r=t),r}(s,t);if(f&&"AES-128"===f.method){var h=this.getDecrypter();if(!l.enableSoftwareAES)return this.decryptionPromise=h.webCryptoDecrypt(s,f.key.buffer,f.iv.buffer).then((function(e){var t=a.push(e,null,r);return a.decryptionPromise=null,t})),this.decryptionPromise;var v=h.softwareDecrypt(s,f.key.buffer,f.iv.buffer);if(!v)return o.executeEnd=n(),E(r);s=new Uint8Array(v)}var g=i||c,m=g.contiguous,y=g.discontinuity,b=g.trackSwitch,_=g.accurateTimeOffset,D=g.timeOffset,S=g.initSegmentChange,w=d.audioCodec,T=d.videoCodec,C=d.defaultInitPts,A=d.duration,x=d.initSegmentData;if((y||b||S)&&this.resetInitSegment(x,w,T,A),(y||S)&&this.resetInitialTimestamp(C),m||this.resetContiguity(),this.needsProbing(s,y,b)){if(u.dataLength){var k=u.flush();s=Object(p.appendUint8Array)(k,s)}this.configureTransmuxer(s,d)}var L=this.transmux(s,f,D,_,r),F=this.currentTransmuxState;return F.contiguous=!0,F.discontinuity=!1,F.trackSwitch=!1,o.executeEnd=n(),L},t.flush=function(e){var t=this,r=e.transmuxing;r.executeStart=n();var o=this.decrypter,s=this.cache,u=this.currentTransmuxState,l=this.decryptionPromise;if(l)return l.then((function(){return t.flush(e)}));var c=[],d=u.timeOffset;if(o){var f=o.flush();f&&c.push(this.push(f,null,e))}var h=s.dataLength;s.reset();var p=this.demuxer,v=this.remuxer;if(!p||!v)return h>=m&&this.observer.emit(i.Events.ERROR,i.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),r.executeEnd=n(),[E(e)];var g=p.flush(d);return b(g)?g.then((function(r){return t.flushRemux(c,r,e),c})):(this.flushRemux(c,g,e),c)},t.flushRemux=function(e,t,r){var i=t.audioTrack,a=t.avcTrack,o=t.id3Track,s=t.textTrack,u=this.currentTransmuxState,l=u.accurateTimeOffset,c=u.timeOffset;v.logger.log("[transmuxer.ts]: Flushed fragment "+r.sn+(r.part>-1?" p: "+r.part:"")+" of level "+r.level);var d=this.remuxer.remux(i,a,o,s,c,l,!0,this.id);e.push({remuxResult:d,chunkMeta:r}),r.transmuxing.executeEnd=n()},t.resetInitialTimestamp=function(e){var t=this.demuxer,r=this.remuxer;t&&r&&(t.resetTimeStamp(e),r.resetTimeStamp(e))},t.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},t.resetInitSegment=function(e,t,r,n){var i=this.demuxer,a=this.remuxer;i&&a&&(i.resetInitSegment(t,r,n),a.resetInitSegment(e,t,r))},t.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},t.transmux=function(e,t,r,n,i){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,r,n,i):this.transmuxUnencrypted(e,r,n,i)},t.transmuxUnencrypted=function(e,t,r,n){var i=this.demuxer.demux(e,t,!1,!this.config.progressive),a=i.audioTrack,o=i.avcTrack,s=i.id3Track,u=i.textTrack;return{remuxResult:this.remuxer.remux(a,o,s,u,t,r,!1,this.id),chunkMeta:n}},t.transmuxSampleAes=function(e,t,r,n,i){var a=this;return this.demuxer.demuxSampleAes(e,t,r).then((function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.avcTrack,e.id3Track,e.textTrack,r,n,!1,a.id),chunkMeta:i}}))},t.configureTransmuxer=function(e,t){for(var r,n=this.config,i=this.observer,a=this.typeSupported,o=this.vendor,s=t.audioCodec,l=t.defaultInitPts,c=t.duration,d=t.initSegmentData,h=t.videoCodec,p=0,m=g.length;p<m;p++)if(g[p].demux.probe(e)){r=g[p];break}r||(v.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),r={demux:u.default,remux:f.default});var y=this.demuxer,E=this.remuxer,b=r.remux,_=r.demux;E&&E instanceof b||(this.remuxer=new b(i,n,a,o)),y&&y instanceof _||(this.demuxer=new _(i,n,a),this.probe=_.probe),this.resetInitSegment(d,s,h,c),this.resetInitialTimestamp(l)},t.needsProbing=function(e,t,r){return!this.demuxer||!this.remuxer||t||r},t.getDecrypter=function(){var e=this.decrypter;return e||(e=this.decrypter=new o.default(this.observer,this.config)),e},e}(),E=function(e){return{remuxResult:{},chunkMeta:e}};function b(e){return"then"in e&&e.then instanceof Function}var _=function(e,t,r,n,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=r,this.duration=n,this.defaultInitPts=i},D=function(e,t,r,n,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=r,this.trackSwitch=n,this.timeOffset=i,this.initSegmentChange=a}},"./src/demux/tsdemuxer.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"discardEPB",(function(){return b}));var n=r("./src/demux/adts.ts"),i=r("./src/demux/mpegaudio.ts"),a=r("./src/demux/exp-golomb.ts"),o=r("./src/demux/id3.ts"),s=r("./src/demux/sample-aes.ts"),u=r("./src/events.ts"),l=r("./src/utils/mp4-tools.ts"),c=r("./src/utils/logger.ts"),d=r("./src/errors.ts"),f={video:1,audio:2,id3:3,text:4},h=function(){function e(e,t,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=r}e.probe=function(t){var r=e.syncOffset(t);return!(r<0)&&(r&&c.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},e.syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:f[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}};var t=e.prototype;return t.resetInitSegment=function(t,r,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",n),this._audioTrack=e.createTrack("audio",n),this._id3Track=e.createTrack("id3",n),this._txtTrack=e.createTrack("text",n),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=r,this._duration=n},t.resetTimeStamp=function(){},t.resetContiguity=function(){var e=this._audioTrack,t=this._avcTrack,r=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},t.demux=function(t,r,n,i){var a;void 0===n&&(n=!1),void 0===i&&(i=!1),n||(this.sampleAes=null);var o=this._avcTrack,s=this._audioTrack,f=this._id3Track,h=o.pid,p=o.pesData,y=s.pid,E=f.pid,b=s.pesData,_=f.pesData,D=!1,S=this.pmtParsed,w=this._pmtId,T=t.length;if(this.remainderData&&(T=(t=Object(l.appendUint8Array)(this.remainderData,t)).length,this.remainderData=null),T<188&&!i)return this.remainderData=t,{audioTrack:s,avcTrack:o,id3Track:f,textTrack:this._txtTrack};var C=Math.max(0,e.syncOffset(t));(T-=(T+C)%188)<t.byteLength&&!i&&(this.remainderData=new Uint8Array(t.buffer,T,t.buffer.byteLength-T));for(var A=0,x=C;x<T;x+=188)if(71===t[x]){var k=!!(64&t[x+1]),L=((31&t[x+1])<<8)+t[x+2],F=void 0;if((48&t[x+3])>>4>1){if((F=x+5+t[x+4])===x+188)continue}else F=x+4;switch(L){case h:k&&(p&&(a=m(p))&&this.parseAVCPES(a,!1),p={data:[],size:0}),p&&(p.data.push(t.subarray(F,x+188)),p.size+=x+188-F);break;case y:k&&(b&&(a=m(b))&&(s.isAAC?this.parseAACPES(a):this.parseMPEGPES(a)),b={data:[],size:0}),b&&(b.data.push(t.subarray(F,x+188)),b.size+=x+188-F);break;case E:k&&(_&&(a=m(_))&&this.parseID3PES(a),_={data:[],size:0}),_&&(_.data.push(t.subarray(F,x+188)),_.size+=x+188-F);break;case 0:k&&(F+=t[F]+1),w=this._pmtId=v(t,F);break;case w:k&&(F+=t[F]+1);var R=g(t,F,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,n);(h=R.avc)>0&&(o.pid=h),(y=R.audio)>0&&(s.pid=y,s.isAAC=R.isAAC),(E=R.id3)>0&&(f.pid=E),D&&!S&&(c.logger.log("reparse from beginning"),D=!1,x=C-188),S=this.pmtParsed=!0;break;case 17:case 8191:break;default:D=!0}}else A++;A>0&&this.observer.emit(u.Events.ERROR,u.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+A+" TS packet/s that do not start with 0x47"}),o.pesData=p,s.pesData=b,f.pesData=_;var I={audioTrack:s,avcTrack:o,id3Track:f,textTrack:this._txtTrack};return i&&this.extractRemainingSamples(I),I},t.flush=function(){var e,t=this.remainderData;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},t.extractRemainingSamples=function(e){var t,r=e.audioTrack,n=e.avcTrack,i=e.id3Track,a=n.pesData,o=r.pesData,s=i.pesData;a&&(t=m(a))?(this.parseAVCPES(t,!0),n.pesData=null):n.pesData=a,o&&(t=m(o))?(r.isAAC?this.parseAACPES(t):this.parseMPEGPES(t),r.pesData=null):(null!==o&&void 0!==o&&o.size&&c.logger.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=o),s&&(t=m(s))?(this.parseID3PES(t),i.pesData=null):i.pesData=s},t.demuxSampleAes=function(e,t,r){var n=this.demux(e,r,!0,!this.config.progressive),i=this.sampleAes=new s.default(this.observer,this.config,t);return this.decrypt(n,i)},t.decrypt=function(e,t){return new Promise((function(r){var n=e.audioTrack,i=e.avcTrack;n.samples&&n.isAAC?t.decryptAacSamples(n.samples,0,(function(){i.samples?t.decryptAvcSamples(i.samples,0,0,(function(){r(e)})):r(e)})):i.samples&&t.decryptAvcSamples(i.samples,0,0,(function(){r(e)}))}))},t.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},t.parseAVCPES=function(e,t){var r,n=this,i=this._avcTrack,s=this.parseAVCNALu(e.data),u=this.avcSample,l=!1;e.data=null,u&&s.length&&!i.audFound&&(y(u,i),u=this.avcSample=p(!1,e.pts,e.dts,"")),s.forEach((function(t){switch(t.type){case 1:r=!0,u||(u=n.avcSample=p(!0,e.pts,e.dts,"")),u.frame=!0;var s=t.data;if(l&&s.length>4){var c=new a.default(s).readSliceType();2!==c&&4!==c&&7!==c&&9!==c||(u.key=!0)}break;case 5:r=!0,u||(u=n.avcSample=p(!0,e.pts,e.dts,"")),u.key=!0,u.frame=!0;break;case 6:r=!0;var d=new a.default(b(t.data));d.readUByte();for(var f=0,h=0,v=!1,g=0;!v&&d.bytesAvailable>1;){f=0;do{f+=g=d.readUByte()}while(255===g);h=0;do{h+=g=d.readUByte()}while(255===g);if(4===f&&0!==d.bytesAvailable){if(v=!0,181===d.readUByte()&&49===d.readUShort()&&1195456820===d.readUInt()&&3===d.readUByte()){for(var m=d.readUByte(),_=31&m,D=[m,d.readUByte()],S=0;S<_;S++)D.push(d.readUByte()),D.push(d.readUByte()),D.push(d.readUByte());E(n._txtTrack.samples,{type:3,pts:e.pts,bytes:D})}}else if(5===f&&0!==d.bytesAvailable){if(v=!0,h>16){for(var w=[],T=0;T<16;T++)w.push(d.readUByte().toString(16)),3!==T&&5!==T&&7!==T&&9!==T||w.push("-");for(var C=h-16,A=new Uint8Array(C),x=0;x<C;x++)A[x]=d.readUByte();E(n._txtTrack.samples,{pts:e.pts,payloadType:f,uuid:w.join(""),userData:Object(o.utf8ArrayToStr)(A),userDataBytes:A})}}else if(h<d.bytesAvailable)for(var k=0;k<h;k++)d.readUByte()}break;case 7:if(r=!0,l=!0,!i.sps){var L=new a.default(t.data).readSPS();i.width=L.width,i.height=L.height,i.pixelRatio=L.pixelRatio,i.sps=[t.data],i.duration=n._duration;for(var F=t.data.subarray(1,4),R="avc1.",I=0;I<3;I++){var O=F[I].toString(16);O.length<2&&(O="0"+O),R+=O}i.codec=R}break;case 8:r=!0,i.pps||(i.pps=[t.data]);break;case 9:r=!1,i.audFound=!0,u&&y(u,i),u=n.avcSample=p(!1,e.pts,e.dts,"");break;case 12:r=!1;break;default:r=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}u&&r&&u.units.push(t)})),t&&u&&(y(u,i),this.avcSample=null)},t.getLastNalUnit=function(){var e,t,r=this.avcSample;if(!r||0===r.units.length){var n=this._avcTrack.samples;r=n[n.length-1]}if(null!==(e=r)&&void 0!==e&&e.units){var i=r.units;t=i[i.length-1]}return t},t.parseAVCNALu=function(e){var t,r,n=e.byteLength,i=this._avcTrack,a=i.naluState||0,o=a,s=[],u=0,l=-1,c=0;for(-1===a&&(l=0,c=31&e[0],a=0,u=1);u<n;)if(t=e[u++],a)if(1!==a)if(t)if(1===t){if(l>=0){var d={data:e.subarray(l,u-a-1),type:c};s.push(d)}else{var f=this.getLastNalUnit();if(f&&(o&&u<=4-o&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-o)),(r=u-a-1)>0)){var h=new Uint8Array(f.data.byteLength+r);h.set(f.data,0),h.set(e.subarray(0,r),f.data.byteLength),f.data=h,f.state=0}}u<n?(l=u,c=31&e[u],a=0):a=-1}else a=0;else a=3;else a=t?0:2;else a=t?0:1;if(l>=0&&a>=0){var p={data:e.subarray(l,n),type:c,state:a};s.push(p)}if(0===s.length){var v=this.getLastNalUnit();if(v){var g=new Uint8Array(v.data.byteLength+e.byteLength);g.set(v.data,0),g.set(e,v.data.byteLength),v.data=g}}return i.naluState=a,s},t.parseAACPES=function(e){var t,r,i,a,o,s=0,l=this._audioTrack,f=this.aacOverFlow,h=e.data;if(f){this.aacOverFlow=null;var p=f.sample.unit.byteLength,v=Math.min(f.missing,p),g=p-v;f.sample.unit.set(h.subarray(0,v),g),l.samples.push(f.sample),s=f.missing}for(t=s,r=h.length;t<r-1&&!n.isHeader(h,t);t++);if(t===s||(t<r-1?(i="AAC PES did not start with ADTS header,offset:"+t,a=!1):(i="no ADTS header found in AAC PES",a=!0),c.logger.warn("parsing error:"+i),this.observer.emit(u.Events.ERROR,u.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:a,reason:i}),!a)){if(n.initTrackConfig(l,this.observer,h,t,this.audioCodec),void 0!==e.pts)o=e.pts;else{if(!f)return void c.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var m=n.getFrameDuration(l.samplerate);o=f.sample.pts+m}for(var y=0;t<r;){if(n.isHeader(h,t)){if(t+5<r){var E=n.appendFrame(l,h,t,o,y);if(E){if(!E.missing){t+=E.length,y++;continue}this.aacOverFlow=E}}break}t++}}},t.parseMPEGPES=function(e){var t=e.data,r=t.length,n=0,a=0,o=e.pts;if(void 0!==o)for(;a<r;)if(i.isHeader(t,a)){var s=i.appendFrame(this._audioTrack,t,a,o,n);if(!s)break;a+=s.length,n++}else a++;else c.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},t.parseID3PES=function(e){void 0!==e.pts?this._id3Track.samples.push(e):c.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},e}();function p(e,t,r,n){return{key:e,frame:!1,pts:t,dts:r,units:[],debug:n,length:0}}function v(e,t){return(31&e[t+10])<<8|e[t+11]}function g(e,t,r,n){var i={audio:-1,avc:-1,id3:-1,isAAC:!0},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){var o=(31&e[t+1])<<8|e[t+2];switch(e[t]){case 207:if(!n){c.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===i.audio&&(i.audio=o);break;case 21:-1===i.id3&&(i.id3=o);break;case 219:if(!n){c.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===i.avc&&(i.avc=o);break;case 3:case 4:r?-1===i.audio&&(i.audio=o,i.isAAC=!1):c.logger.log("MPEG audio found, not supported in this browser");break;case 36:c.logger.warn("Unsupported HEVC stream type found")}t+=5+((15&e[t+3])<<8|e[t+4])}return i}function m(e){var t,r,n,i,a,o=0,s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&s.length>1;){var u=new Uint8Array(s[0].length+s[1].length);u.set(s[0]),u.set(s[1],s[0].length),s[0]=u,s.splice(1,1)}if(1===((t=s[0])[0]<<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;var l=t[7];192&l&&(i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?i-(a=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>54e5&&(c.logger.warn(Math.round((i-a)/9e4)+"s delta between PTS and DTS, align them"),i=a):a=i);var d=(n=t[8])+9;if(e.size<=d)return null;e.size-=d;for(var f=new Uint8Array(e.size),h=0,p=s.length;h<p;h++){var v=(t=s[h]).byteLength;if(d){if(d>v){d-=v;continue}t=t.subarray(d),v-=d,d=0}f.set(t,o),o+=v}return r&&(r-=n+3),{data:f,pts:i,dts:a,len:r}}return null}function y(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var r=t.samples,n=r.length;if(!n)return void t.dropped++;var i=r[n-1];e.pts=i.pts,e.dts=i.dts}t.samples.push(e)}e.debug.length&&c.logger.log(e.pts+"/"+e.dts+":"+e.debug)}function E(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)}function b(e){for(var t=e.byteLength,r=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(r.push(n+2),n+=2):n++;if(0===r.length)return e;var i=t-r.length,a=new Uint8Array(i),o=0;for(n=0;n<i;o++,n++)o===r[0]&&(o++,r.shift()),a[n]=e[o];return a}h.minProbeByteLength=188,t.default=h},"./src/errors.ts":function(e,t,r){"use strict";var n,i;r.r(t),r.d(t,"ErrorTypes",(function(){return n})),r.d(t,"ErrorDetails",(function(){return i})),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(n||(n={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown"}(i||(i={}))},"./src/events.ts":function(e,t,r){"use strict";var n;r.r(t),r.d(t,"Events",(function(){return n})),function(e){e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached"}(n||(n={}))},"./src/hls.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return y}));var n=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=r("./src/loader/playlist-loader.ts"),a=r("./src/loader/key-loader.ts"),o=r("./src/controller/id3-track-controller.ts"),s=r("./src/controller/latency-controller.ts"),u=r("./src/controller/level-controller.ts"),l=r("./src/controller/fragment-tracker.ts"),c=r("./src/controller/stream-controller.ts"),d=r("./src/is-supported.ts"),f=r("./src/utils/logger.ts"),h=r("./src/config.ts"),p=r("./node_modules/eventemitter3/index.js"),v=r("./src/events.ts"),g=r("./src/errors.ts");function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y=function(){function e(t){void 0===t&&(t={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new p.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var r=this.config=Object(h.mergeConfig)(e.DefaultConfig,t);this.userConfig=t,Object(f.enableLogs)(r.debug),this._autoLevelCapping=-1,r.progressive&&Object(h.enableStreamingMode)(r);var n=r.abrController,d=r.bufferController,v=r.capLevelController,g=r.fpsController,m=this.abrController=new n(this),y=this.bufferController=new d(this),E=this.capLevelController=new v(this),b=new g(this),_=new i.default(this),D=new a.default(this),S=new o.default(this),w=this.levelController=new u.default(this),T=new l.FragmentTracker(this),C=this.streamController=new c.default(this,T);E.setStreamController(C),b.setStreamController(C);var A=[w,C];this.networkControllers=A;var x=[_,D,m,y,E,b,S,T];this.audioTrackController=this.createController(r.audioTrackController,null,A),this.createController(r.audioStreamController,T,A),this.subtitleTrackController=this.createController(r.subtitleTrackController,null,A),this.createController(r.subtitleStreamController,T,A),this.createController(r.timelineController,null,x),this.emeController=this.createController(r.emeController,null,x),this.cmcdController=this.createController(r.cmcdController,null,x),this.latencyController=this.createController(s.default,null,x),this.coreComponents=x}e.isSupported=function(){return Object(d.isSupported)()};var t,r,y,E=e.prototype;return E.createController=function(e,t,r){if(e){var n=t?new e(this,t):new e(this);return r&&r.push(n),n}return null},E.on=function(e,t,r){void 0===r&&(r=this),this._emitter.on(e,t,r)},E.once=function(e,t,r){void 0===r&&(r=this),this._emitter.once(e,t,r)},E.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},E.off=function(e,t,r,n){void 0===r&&(r=this),this._emitter.off(e,t,r,n)},E.listeners=function(e){return this._emitter.listeners(e)},E.emit=function(e,t,r){return this._emitter.emit(e,t,r)},E.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(r){f.logger.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),this.trigger(v.Events.ERROR,{type:g.ErrorTypes.OTHER_ERROR,details:g.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,error:r})}return!1},E.listenerCount=function(e){return this._emitter.listenerCount(e)},E.destroy=function(){f.logger.log("destroy"),this.trigger(v.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(e){return e.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(e){return e.destroy()})),this.coreComponents.length=0},E.attachMedia=function(e){f.logger.log("attachMedia"),this._media=e,this.trigger(v.Events.MEDIA_ATTACHING,{media:e})},E.detachMedia=function(){f.logger.log("detachMedia"),this.trigger(v.Events.MEDIA_DETACHING,void 0),this._media=null},E.loadSource=function(e){this.stopLoad();var t=this.media,r=this.url,i=this.url=n.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});f.logger.log("loadSource:"+i),t&&r&&r!==i&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(t)),this.trigger(v.Events.MANIFEST_LOADING,{url:e})},E.startLoad=function(e){void 0===e&&(e=-1),f.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},E.stopLoad=function(){f.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},E.swapAudioCodec=function(){f.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},E.recoverMediaError=function(){f.logger.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},E.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},t=e,y=[{key:"version",get:function(){return"1.1.5"}},{key:"Events",get:function(){return v.Events}},{key:"ErrorTypes",get:function(){return g.ErrorTypes}},{key:"ErrorDetails",get:function(){return g.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:h.hlsDefaultConfig},set:function(t){e.defaultConfig=t}}],(r=[{key:"levels",get:function(){var e=this.levelController.levels;return e||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){f.logger.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){f.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){f.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){f.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){f.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(f.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var r=e.length,n=0;n<r;n++)if(e[n].maxBitrate>t)return n;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&m(t.prototype,r),y&&m(t,y),e}();y.defaultConfig=void 0},"./src/is-supported.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"isSupported",(function(){return a})),r.d(t,"changeTypeSupported",(function(){return o}));var n=r("./src/utils/mediasource-helper.ts");function i(){return self.SourceBuffer||self.WebKitSourceBuffer}function a(){var e=Object(n.getMediaSource)();if(!e)return!1;var t=i(),r=e&&"function"===typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),a=!t||t.prototype&&"function"===typeof t.prototype.appendBuffer&&"function"===typeof t.prototype.remove;return!!r&&!!a}function o(){var e,t=i();return"function"===typeof(null===t||void 0===t||null===(e=t.prototype)||void 0===e?void 0:e.changeType)}},"./src/loader/fragment-loader.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d})),r.d(t,"LoadError",(function(){return h}));var n=r("./src/polyfills/number.ts"),i=r("./src/errors.ts");function a(e){var t="function"===typeof Map?new Map:void 0;return a=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return o(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)},a(e)}function o(e,t,r){return o=s()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&u(i,r.prototype),i},o.apply(null,arguments)}function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var c=Math.pow(2,17),d=function(){function e(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var t=e.prototype;return t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.abort=function(){this.loader&&this.loader.abort()},t.load=function(e,t){var r=this,n=e.url;if(!n)return Promise.reject(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,networkDetails:null},"Fragment does not have a "+(n?"part list":"url")));this.abort();var a=this.config,o=a.fLoader,s=a.loader;return new Promise((function(n,u){r.loader&&r.loader.destroy();var l=r.loader=e.loader=o?new o(a):new s(a),d=f(e),p={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:c};e.stats=l.stats,l.load(d,p,{onSuccess:function(t,i,a,o){r.resetLoader(e,l),n({frag:e,part:null,payload:t.data,networkDetails:o})},onError:function(t,n,a){r.resetLoader(e,l),u(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:t,networkDetails:a}))},onAbort:function(t,n,a){r.resetLoader(e,l),u(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,networkDetails:a}))},onTimeout:function(t,n,a){r.resetLoader(e,l),u(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,networkDetails:a}))},onProgress:function(r,n,i,a){t&&t({frag:e,part:null,payload:i,networkDetails:a})}})}))},t.loadPart=function(e,t,r){var n=this;this.abort();var a=this.config,o=a.fLoader,s=a.loader;return new Promise((function(u,l){n.loader&&n.loader.destroy();var d=n.loader=e.loader=o?new o(a):new s(a),p=f(e,t),v={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:c};t.stats=d.stats,d.load(p,v,{onSuccess:function(i,a,o,s){n.resetLoader(e,d),n.updateStatsFromPart(e,t);var l={frag:e,part:t,payload:i.data,networkDetails:s};r(l),u(l)},onError:function(r,a,o){n.resetLoader(e,d),l(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:r,networkDetails:o}))},onAbort:function(r,a,o){e.stats.aborted=t.stats.aborted,n.resetLoader(e,d),l(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,networkDetails:o}))},onTimeout:function(r,a,o){n.resetLoader(e,d),l(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,networkDetails:o}))}})}))},t.updateStatsFromPart=function(e,t){var r=e.stats,n=t.stats,i=n.total;if(r.loaded+=n.loaded,i){var a=Math.round(e.duration/t.duration),o=Math.min(Math.round(r.loaded/i),a),s=(a-o)*Math.round(r.loaded/o);r.total=r.loaded+s}else r.total=Math.max(r.loaded,r.total);var u=r.loading,l=n.loading;u.start?u.first+=l.first-l.start:(u.start=l.start,u.first=l.first),u.end=l.end},t.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},e}();function f(e,t){void 0===t&&(t=null);var r=t||e,i={frag:e,part:t,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},a=r.byteRangeStartOffset,o=r.byteRangeEndOffset;return Object(n.isFiniteNumber)(a)&&Object(n.isFiniteNumber)(o)&&(i.rangeStart=a,i.rangeEnd=o),i}var h=function(e){var t,r;function n(t){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return(r=e.call.apply(e,[this].concat(i))||this).data=void 0,r.data=t,r}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,u(t,r),n}(a(Error))},"./src/loader/fragment.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"ElementaryStreamTypes",(function(){return n})),r.d(t,"BaseSegment",(function(){return h})),r.d(t,"Fragment",(function(){return p})),r.d(t,"Part",(function(){return v}));var n,i=r("./src/polyfills/number.ts"),a=r("./node_modules/url-toolkit/src/url-toolkit.js"),o=r("./src/utils/logger.ts"),s=r("./src/loader/level-key.ts"),u=r("./src/loader/load-stats.ts");function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,c(e,t)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}!function(e){e.AUDIO="audio",e.VIDEO="video",e.AUDIOVIDEO="audiovideo"}(n||(n={}));var h=function(){function e(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[n.AUDIO]=null,t[n.VIDEO]=null,t[n.AUDIOVIDEO]=null,t),this.baseurl=e}return e.prototype.setByteRange=function(e,t){var r=e.split("@",2),n=[];1===r.length?n[0]=t?t.byteRangeEndOffset:0:n[0]=parseInt(r[1]),n[1]=parseInt(r[0])+n[0],this._byteRange=n},f(e,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(a.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]),e}(),p=function(e){function t(t,r){var n;return(n=e.call(this,r)||this)._decryptdata=null,n.rawProgramDateTime=null,n.programDateTime=null,n.tagList=[],n.duration=0,n.sn=0,n.levelkey=void 0,n.type=void 0,n.loader=null,n.level=-1,n.cc=0,n.startPTS=void 0,n.endPTS=void 0,n.appendedPTS=void 0,n.startDTS=void 0,n.endDTS=void 0,n.start=0,n.deltaPTS=void 0,n.maxStartPTS=void 0,n.minEndPTS=void 0,n.stats=new u.LoadStats,n.urlId=0,n.data=void 0,n.bitrateTest=!1,n.title=null,n.initSegment=null,n.type=t,n}l(t,e);var r=t.prototype;return r.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},r.setDecryptDataFromLevelKey=function(e,t){var r=e;return"AES-128"===(null===e||void 0===e?void 0:e.method)&&e.uri&&!e.iv&&((r=s.LevelKey.fromURI(e.uri)).method=e.method,r.iv=this.createInitializationVector(t),r.keyFormat="identity"),r},r.setElementaryStreamInfo=function(e,t,r,n,i,a){void 0===a&&(a=!1);var o=this.elementaryStreams,s=o[e];s?(s.startPTS=Math.min(s.startPTS,t),s.endPTS=Math.max(s.endPTS,r),s.startDTS=Math.min(s.startDTS,n),s.endDTS=Math.max(s.endDTS,i)):o[e]={startPTS:t,endPTS:r,startDTS:n,endDTS:i,partial:a}},r.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[n.AUDIO]=null,e[n.VIDEO]=null,e[n.AUDIOVIDEO]=null},f(t,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!==typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&o.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(i.isFiniteNumber)(this.programDateTime))return null;var e=Object(i.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){var e;return!(null===(e=this.decryptdata)||void 0===e||!e.keyFormat||!this.decryptdata.uri)}}]),t}(h),v=function(e){function t(t,r,n,i,a){var o;(o=e.call(this,n)||this).fragOffset=0,o.duration=0,o.gap=!1,o.independent=!1,o.relurl=void 0,o.fragment=void 0,o.index=void 0,o.stats=new u.LoadStats,o.duration=t.decimalFloatingPoint("DURATION"),o.gap=t.bool("GAP"),o.independent=t.bool("INDEPENDENT"),o.relurl=t.enumeratedString("URI"),o.fragment=r,o.index=i;var s=t.enumeratedString("BYTERANGE");return s&&o.setByteRange(s,a),a&&(o.fragOffset=a.fragOffset+a.duration),o}return l(t,e),f(t,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),t}(h)},"./src/loader/key-loader.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return o}));var n=r("./src/events.ts"),i=r("./src/errors.ts"),a=r("./src/utils/logger.ts"),o=function(){function e(e){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){this.hls.on(n.Events.KEY_LOADING,this.onKeyLoading,this)},t._unregisterListeners=function(){this.hls.off(n.Events.KEY_LOADING,this.onKeyLoading)},t.destroy=function(){for(var e in this._unregisterListeners(),this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={}},t.onKeyLoading=function(e,t){var r=t.frag,i=r.type,o=this.loaders[i];if(r.decryptdata){var s=r.decryptdata.uri;if(s!==this.decrypturl||null===this.decryptkey){var u=this.hls.config;if(o&&(a.logger.warn("abort previous key loader for type:"+i),o.abort()),!s)return void a.logger.warn("key uri is falsy");var l=u.loader,c=r.loader=this.loaders[i]=new l(u);this.decrypturl=s,this.decryptkey=null;var d={url:s,frag:r,responseType:"arraybuffer"},f={timeout:u.fragLoadingTimeOut,maxRetry:0,retryDelay:u.fragLoadingRetryDelay,maxRetryDelay:u.fragLoadingMaxRetryTimeout,highWaterMark:0},h={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load(d,f,h)}else this.decryptkey&&(r.decryptdata.key=this.decryptkey,this.hls.trigger(n.Events.KEY_LOADED,{frag:r}))}else a.logger.warn("Missing decryption data on fragment in onKeyLoading")},t.loadsuccess=function(e,t,r){var i=r.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=null,delete this.loaders[i.type],this.hls.trigger(n.Events.KEY_LOADED,{frag:i})):a.logger.error("after key load, decryptdata unset")},t.loaderror=function(e,t){var r=t.frag,a=r.loader;a&&a.abort(),delete this.loaders[r.type],this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},t.loadtimeout=function(e,t){var r=t.frag,a=r.loader;a&&a.abort(),delete this.loaders[r.type],this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},e}()},"./src/loader/level-details.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"LevelDetails",(function(){return a}));var n=r("./src/polyfills/number.ts");function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=e}var t,r,a;return e.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!t,this.advanced=this.endSN>e.endSN||t>0||0===t&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay},t=e,(r=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(n.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!==(e=this.fragments)&&void 0!==e&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&i(t.prototype,r),a&&i(t,a),e}()},"./src/loader/level-key.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"LevelKey",(function(){return a}));var n=r("./node_modules/url-toolkit/src/url-toolkit.js");function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(e,t){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=t?Object(n.buildAbsoluteURL)(e,t,{alwaysNormalize:!0}):e}var t,r,a;return e.fromURL=function(t,r){return new e(t,r)},e.fromURI=function(t){return new e(t)},t=e,(r=[{key:"uri",get:function(){return this._uri}}])&&i(t.prototype,r),a&&i(t,a),e}()},"./src/loader/load-stats.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"LoadStats",(function(){return n}));var n=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return g}));var n=r("./src/polyfills/number.ts"),i=r("./node_modules/url-toolkit/src/url-toolkit.js"),a=r("./src/loader/fragment.ts"),o=r("./src/loader/level-details.ts"),s=r("./src/loader/level-key.ts"),u=r("./src/utils/attr-list.ts"),l=r("./src/utils/logger.ts"),c=r("./src/utils/codecs.ts"),d=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,f=/#EXT-X-MEDIA:(.*)/g,h=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),p=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),v=/\.(mp4|m4s|m4v|m4a)$/i,g=function(){function e(){}return e.findGroup=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.id===t)return n}},e.convertAVC1ToAVCOTI=function(e){var t=e.split(".");if(t.length>2){var r=t.shift()+".";return r+=parseInt(t.shift()).toString(16),r+=("000"+parseInt(t.shift()).toString(16)).substr(-4)}return e},e.resolve=function(e,t){return i.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){var n,i=[],a={},o=!1;for(d.lastIndex=0;null!=(n=d.exec(t));)if(n[1]){var s=new u.AttrList(n[1]),l={attrs:s,bitrate:s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),name:s.NAME,url:e.resolve(n[2],r)},c=s.decimalResolution("RESOLUTION");c&&(l.width=c.width,l.height=c.height),m((s.CODECS||"").split(/[ ,]+/).filter((function(e){return e})),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=e.convertAVC1ToAVCOTI(l.videoCodec)),i.push(l)}else if(n[3]){var f=new u.AttrList(n[3]);f["DATA-ID"]&&(o=!0,a[f["DATA-ID"]]=f)}return{levels:i,sessionData:o?a:null}},e.parseMasterPlaylistMedia=function(t,r,n,i){var a;void 0===i&&(i=[]);var o=[],s=0;for(f.lastIndex=0;null!==(a=f.exec(t));){var l=new u.AttrList(a[1]);if(l.TYPE===n){var c={attrs:l,bitrate:0,id:s++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:n,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?e.resolve(l.URI,r):""};if(i.length){var d=e.findGroup(i,c.groupId)||i[0];y(c,d,"audioCodec"),y(c,d,"textCodec")}o.push(c)}}return o},e.parseLevelPlaylist=function(e,t,r,c,d){var f,g,m,y=new o.LevelDetails(t),b=y.fragments,_=null,D=0,S=0,w=0,T=0,C=null,A=new a.Fragment(c,t),x=-1,k=!1;for(h.lastIndex=0,y.m3u8=e;null!==(f=h.exec(e));){k&&(k=!1,(A=new a.Fragment(c,t)).start=w,A.sn=D,A.cc=T,A.level=r,_&&(A.initSegment=_,A.rawProgramDateTime=_.rawProgramDateTime));var L=f[1];if(L){A.duration=parseFloat(L);var F=(" "+f[2]).slice(1);A.title=F||null,A.tagList.push(F?["INF",L,F]:["INF",L])}else if(f[3])Object(n.isFiniteNumber)(A.duration)&&(A.start=w,m&&(A.levelkey=m),A.sn=D,A.level=r,A.cc=T,A.urlId=d,b.push(A),A.relurl=(" "+f[3]).slice(1),E(A,C),C=A,w+=A.duration,D++,S=0,k=!0);else if(f[4]){var R=(" "+f[4]).slice(1);C?A.setByteRange(R,C):A.setByteRange(R)}else if(f[5])A.rawProgramDateTime=(" "+f[5]).slice(1),A.tagList.push(["PROGRAM-DATE-TIME",A.rawProgramDateTime]),-1===x&&(x=b.length);else{if(!(f=f[0].match(p))){l.logger.warn("No matches on slow regex match for level playlist!");continue}for(g=1;g<f.length&&"undefined"===typeof f[g];g++);var I=(" "+f[g]).slice(1),O=(" "+f[g+1]).slice(1),P=f[g+2]?(" "+f[g+2]).slice(1):"";switch(I){case"PLAYLIST-TYPE":y.type=O.toUpperCase();break;case"MEDIA-SEQUENCE":D=y.startSN=parseInt(O);break;case"SKIP":var M=new u.AttrList(O),B=M.decimalInteger("SKIPPED-SEGMENTS");if(Object(n.isFiniteNumber)(B)){y.skippedSegments=B;for(var N=B;N--;)b.unshift(null);D+=B}var U=M.enumeratedString("RECENTLY-REMOVED-DATERANGES");U&&(y.recentlyRemovedDateranges=U.split("\t"));break;case"TARGETDURATION":y.targetduration=parseFloat(O);break;case"VERSION":y.version=parseInt(O);break;case"EXTM3U":break;case"ENDLIST":y.live=!1;break;case"#":(O||P)&&A.tagList.push(P?[O,P]:[O]);break;case"DIS":T++;case"GAP":A.tagList.push([I]);break;case"BITRATE":A.tagList.push([I,O]);break;case"DISCONTINUITY-SEQ":T=parseInt(O);break;case"KEY":var j,H=new u.AttrList(O),G=H.enumeratedString("METHOD"),K=H.URI,z=H.hexadecimalInteger("IV"),V=H.enumeratedString("KEYFORMATVERSIONS"),W=H.enumeratedString("KEYID"),q=null!=(j=H.enumeratedString("KEYFORMAT"))?j:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(q)>-1){l.logger.warn("Keyformat "+q+" is not supported from the manifest");continue}if("identity"!==q)continue;G&&(m=s.LevelKey.fromURL(t,K),K&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(G)>=0&&(m.method=G,m.keyFormat=q,W&&(m.keyID=W),V&&(m.keyFormatVersions=V),m.iv=z));break;case"START":var Z=new u.AttrList(O).decimalFloatingPoint("TIME-OFFSET");Object(n.isFiniteNumber)(Z)&&(y.startTimeOffset=Z);break;case"MAP":var Y=new u.AttrList(O);A.relurl=Y.URI,Y.BYTERANGE&&A.setByteRange(Y.BYTERANGE),A.level=r,A.sn="initSegment",m&&(A.levelkey=m),A.initSegment=null,_=A,k=!0;break;case"SERVER-CONTROL":var $=new u.AttrList(O);y.canBlockReload=$.bool("CAN-BLOCK-RELOAD"),y.canSkipUntil=$.optionalFloat("CAN-SKIP-UNTIL",0),y.canSkipDateRanges=y.canSkipUntil>0&&$.bool("CAN-SKIP-DATERANGES"),y.partHoldBack=$.optionalFloat("PART-HOLD-BACK",0),y.holdBack=$.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var X=new u.AttrList(O);y.partTarget=X.decimalFloatingPoint("PART-TARGET");break;case"PART":var Q=y.partList;Q||(Q=y.partList=[]);var J=S>0?Q[Q.length-1]:void 0,ee=S++,te=new a.Part(new u.AttrList(O),A,t,ee,J);Q.push(te),A.duration+=te.duration;break;case"PRELOAD-HINT":var re=new u.AttrList(O);y.preloadHint=re;break;case"RENDITION-REPORT":var ne=new u.AttrList(O);y.renditionReports=y.renditionReports||[],y.renditionReports.push(ne);break;default:l.logger.warn("line parsed but not handled: "+f)}}}C&&!C.relurl?(b.pop(),w-=C.duration,y.partList&&(y.fragmentHint=C)):y.partList&&(E(A,C),A.cc=T,y.fragmentHint=A);var ie=b.length,ae=b[0],oe=b[ie-1];if((w+=y.skippedSegments*y.targetduration)>0&&ie&&oe){y.averagetargetduration=w/ie;var se=oe.sn;y.endSN="initSegment"!==se?se:0,ae&&(y.startCC=ae.cc,ae.initSegment||y.fragments.every((function(e){return e.relurl&&function(e){var t,r;return v.test(null!=(t=null===(r=i.parseURL(e))||void 0===r?void 0:r.path)?t:"")}(e.relurl)}))&&(l.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(A=new a.Fragment(c,t)).relurl=oe.relurl,A.level=r,A.sn="initSegment",ae.initSegment=A,y.needSidxRanges=!0))}else y.endSN=0,y.startCC=0;return y.fragmentHint&&(w+=y.fragmentHint.duration),y.totalduration=w,y.endCC=T,x>0&&function(e,t){for(var r=e[t],n=t;n--;){var i=e[n];if(!i)return;i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}(b,x),y},e}();function m(e,t){["video","audio","text"].forEach((function(r){var n=e.filter((function(e){return Object(c.isCodecType)(e,r)}));if(n.length){var i=n.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[r+"Codec"]=i.length>0?i[0]:n[0],e=e.filter((function(e){return-1===n.indexOf(e)}))}})),t.unknownCodecs=e}function y(e,t,r){var n=t[r];n&&(e[r]=n)}function E(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!==t&&void 0!==t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object(n.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}},"./src/loader/playlist-loader.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/polyfills/number.ts"),i=r("./src/events.ts"),a=r("./src/errors.ts"),o=r("./src/utils/logger.ts"),s=r("./src/utils/mp4-tools.ts"),u=r("./src/loader/m3u8-parser.ts"),l=r("./src/types/loader.ts"),c=r("./src/utils/attr-list.ts");function d(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r}var f=function(){function e(e){this.hls=void 0,this.loaders=Object.create(null),this.hls=e,this.registerListeners()}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(i.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(i.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(i.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(i.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,n=t.loader,i=new(r||n)(t);return e.loader=i,this.loaders[e.type]=i,i},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){var r=t.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:l.PlaylistContextType.MANIFEST,url:r,deliveryDirectives:null})},t.onLevelLoading=function(e,t){var r=t.id,n=t.level,i=t.url,a=t.deliveryDirectives;this.load({id:r,groupId:null,level:n,responseType:"text",type:l.PlaylistContextType.LEVEL,url:i,deliveryDirectives:a})},t.onAudioTrackLoading=function(e,t){var r=t.id,n=t.groupId,i=t.url,a=t.deliveryDirectives;this.load({id:r,groupId:n,level:null,responseType:"text",type:l.PlaylistContextType.AUDIO_TRACK,url:i,deliveryDirectives:a})},t.onSubtitleTrackLoading=function(e,t){var r=t.id,n=t.groupId,i=t.url,a=t.deliveryDirectives;this.load({id:r,groupId:n,level:null,responseType:"text",type:l.PlaylistContextType.SUBTITLE_TRACK,url:i,deliveryDirectives:a})},t.load=function(e){var t,r,n,i,a,s,u=this.hls.config,c=this.getInternalLoader(e);if(c){var d=c.context;if(d&&d.url===e.url)return void o.logger.trace("[playlist-loader]: playlist request ongoing");o.logger.log("[playlist-loader]: aborting previous loader for type: "+e.type),c.abort()}switch(e.type){case l.PlaylistContextType.MANIFEST:r=u.manifestLoadingMaxRetry,n=u.manifestLoadingTimeOut,i=u.manifestLoadingRetryDelay,a=u.manifestLoadingMaxRetryTimeout;break;case l.PlaylistContextType.LEVEL:case l.PlaylistContextType.AUDIO_TRACK:case l.PlaylistContextType.SUBTITLE_TRACK:r=0,n=u.levelLoadingTimeOut;break;default:r=u.levelLoadingMaxRetry,n=u.levelLoadingTimeOut,i=u.levelLoadingRetryDelay,a=u.levelLoadingMaxRetryTimeout}if(c=this.createInternalLoader(e),null!==(t=e.deliveryDirectives)&&void 0!==t&&t.part&&(e.type===l.PlaylistContextType.LEVEL&&null!==e.level?s=this.hls.levels[e.level].details:e.type===l.PlaylistContextType.AUDIO_TRACK&&null!==e.id?s=this.hls.audioTracks[e.id].details:e.type===l.PlaylistContextType.SUBTITLE_TRACK&&null!==e.id&&(s=this.hls.subtitleTracks[e.id].details),s)){var f=s.partTarget,h=s.targetduration;f&&h&&(n=Math.min(1e3*Math.max(3*f,.8*h),n))}var p={timeout:n,maxRetry:r,retryDelay:i,maxRetryDelay:a,highWaterMark:0},v={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load(e,p,v)},t.loadsuccess=function(e,t,r,n){if(void 0===n&&(n=null),r.isSidxRequest)return this.handleSidxRequest(e,r),void this.handlePlaylistLoaded(e,t,r,n);this.resetInternalLoader(r.type);var i=e.data;0===i.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(e,t,r,n):this.handleMasterPlaylist(e,t,r,n)):this.handleManifestParsingError(e,r,"no EXTM3U delimiter",n)},t.loaderror=function(e,t,r){void 0===r&&(r=null),this.handleNetworkError(t,r,!1,e)},t.loadtimeout=function(e,t,r){void 0===r&&(r=null),this.handleNetworkError(t,r,!0)},t.handleMasterPlaylist=function(e,t,r,n){var a=this.hls,s=e.data,l=d(e,r),f=u.default.parseMasterPlaylist(s,l),h=f.levels,p=f.sessionData;if(h.length){var v=h.map((function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}})),g=h.map((function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}})),m=u.default.parseMasterPlaylistMedia(s,l,"AUDIO",v),y=u.default.parseMasterPlaylistMedia(s,l,"SUBTITLES",g),E=u.default.parseMasterPlaylistMedia(s,l,"CLOSED-CAPTIONS");m.length&&(m.some((function(e){return!e.url}))||!h[0].audioCodec||h[0].attrs.AUDIO||(o.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new c.AttrList({}),bitrate:0,url:""}))),a.trigger(i.Events.MANIFEST_LOADED,{levels:h,audioTracks:m,subtitles:y,captions:E,url:l,stats:t,networkDetails:n,sessionData:p})}else this.handleManifestParsingError(e,r,"no level found in manifest",n)},t.handleTrackOrLevelPlaylist=function(e,t,r,o){var s=this.hls,f=r.id,h=r.level,p=r.type,v=d(e,r),g=Object(n.isFiniteNumber)(f)?f:0,m=Object(n.isFiniteNumber)(h)?h:g,y=function(e){switch(e.type){case l.PlaylistContextType.AUDIO_TRACK:return l.PlaylistLevelType.AUDIO;case l.PlaylistContextType.SUBTITLE_TRACK:return l.PlaylistLevelType.SUBTITLE;default:return l.PlaylistLevelType.MAIN}}(r),E=u.default.parseLevelPlaylist(e.data,v,m,y,g);if(E.fragments.length){if(p===l.PlaylistContextType.MANIFEST){var b={attrs:new c.AttrList({}),bitrate:0,details:E,name:"",url:v};s.trigger(i.Events.MANIFEST_LOADED,{levels:[b],audioTracks:[],url:v,stats:t,networkDetails:o,sessionData:null})}if(t.parsing.end=performance.now(),E.needSidxRanges){var _,D=null===(_=E.fragments[0].initSegment)||void 0===_?void 0:_.url;this.load({url:D,isSidxRequest:!0,type:p,level:h,levelDetails:E,id:f,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else r.levelDetails=E,this.handlePlaylistLoaded(e,t,r,o)}else s.trigger(i.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:v,reason:"no fragments found in level",level:"number"===typeof r.level?r.level:void 0})},t.handleSidxRequest=function(e,t){var r=Object(s.parseSegmentIndex)(new Uint8Array(e.data));if(r){var n=r.references,i=t.levelDetails;n.forEach((function(e,t){var n=e.info,a=i.fragments[t];0===a.byteRange.length&&a.setByteRange(String(1+n.end-n.start)+"@"+String(n.start)),a.initSegment&&a.initSegment.setByteRange(String(r.moovEndOffset)+"@0")}))}},t.handleManifestParsingError=function(e,t,r,n){this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:t.type===l.PlaylistContextType.MANIFEST,url:e.url,reason:r,response:e,context:t,networkDetails:n})},t.handleNetworkError=function(e,t,r,n){void 0===r&&(r=!1),o.logger.warn("[playlist-loader]: A network "+(r?"timeout":"error")+" occurred while loading "+e.type+" level: "+e.level+" id: "+e.id+' group-id: "'+e.groupId+'"');var s=a.ErrorDetails.UNKNOWN,u=!1,c=this.getInternalLoader(e);switch(e.type){case l.PlaylistContextType.MANIFEST:s=r?a.ErrorDetails.MANIFEST_LOAD_TIMEOUT:a.ErrorDetails.MANIFEST_LOAD_ERROR,u=!0;break;case l.PlaylistContextType.LEVEL:s=r?a.ErrorDetails.LEVEL_LOAD_TIMEOUT:a.ErrorDetails.LEVEL_LOAD_ERROR,u=!1;break;case l.PlaylistContextType.AUDIO_TRACK:s=r?a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case l.PlaylistContextType.SUBTITLE_TRACK:s=r?a.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:a.ErrorDetails.SUBTITLE_LOAD_ERROR,u=!1}c&&this.resetInternalLoader(e.type);var d={type:a.ErrorTypes.NETWORK_ERROR,details:s,fatal:u,url:e.url,loader:c,context:e,networkDetails:t};n&&(d.response=n),this.hls.trigger(i.Events.ERROR,d)},t.handlePlaylistLoaded=function(e,t,r,n){var a=r.type,o=r.level,s=r.id,u=r.groupId,c=r.loader,d=r.levelDetails,f=r.deliveryDirectives;if(null!==d&&void 0!==d&&d.targetduration){if(c)switch(d.live&&(c.getCacheAge&&(d.ageHeader=c.getCacheAge()||0),c.getCacheAge&&!isNaN(d.ageHeader)||(d.ageHeader=0)),a){case l.PlaylistContextType.MANIFEST:case l.PlaylistContextType.LEVEL:this.hls.trigger(i.Events.LEVEL_LOADED,{details:d,level:o||0,id:s||0,stats:t,networkDetails:n,deliveryDirectives:f});break;case l.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(i.Events.AUDIO_TRACK_LOADED,{details:d,id:s||0,groupId:u||"",stats:t,networkDetails:n,deliveryDirectives:f});break;case l.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(i.Events.SUBTITLE_TRACK_LOADED,{details:d,id:s||0,groupId:u||"",stats:t,networkDetails:n,deliveryDirectives:f})}}else this.handleManifestParsingError(e,r,"invalid target duration",n)},e}();t.default=f},"./src/polyfills/number.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"isFiniteNumber",(function(){return n})),r.d(t,"MAX_SAFE_INTEGER",(function(){return i}));var n=Number.isFinite||function(e){return"number"===typeof e&&isFinite(e)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":function(e,t,r){"use strict";r.r(t);var n=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},e}();t.default=n},"./src/remux/mp4-generator.ts":function(e,t,r){"use strict";r.r(t);var n=Math.pow(2,32)-1,i=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,u,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t=8,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(var a=n.length,o=a;a--;)t+=n[a].byteLength;var s=new Uint8Array(t);for(s[0]=t>>24&255,s[1]=t>>16&255,s[2]=t>>8&255,s[3]=255&t,s.set(e,4),a=0,t=8;a<o;a++)s.set(n[a],t),t+=n[a].byteLength;return s},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var i=Math.floor(r/(n+1)),a=Math.floor(r%(n+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,r){r*=t;var i=Math.floor(r/(n+1)),a=Math.floor(r%(n+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,o)},e.sdtp=function(t){var r,n,i=t.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,n,i,a=[],o=[];for(r=0;r<t.sps.length;r++)i=(n=t.sps[r]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)i=(n=t.pps[r]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),u=t.width,l=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,i=t.duration*t.timescale,a=t.width,o=t.height,s=Math.floor(i/(n+1)),u=Math.floor(i%(n+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,o>>8&255,255&o,0,0]))},e.traf=function(t,r){var i=e.sdtp(t),a=t.id,o=Math.floor(r/(n+1)),s=Math.floor(r%(n+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var n,i,a,o,s,u,l=t.samples||[],c=l.length,d=12+16*c,f=new Uint8Array(d);for(r+=8+d,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)a=(i=l[n]).duration,o=i.size,s=i.flags,u=i.cts,f.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*n);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var r=e.moov(t),n=new Uint8Array(e.FTYP.byteLength+r.byteLength);return n.set(e.FTYP),n.set(r,e.FTYP.byteLength),n},e}();i.types=void 0,i.HDLR_TYPES=void 0,i.STTS=void 0,i.STSC=void 0,i.STCO=void 0,i.STSZ=void 0,i.VMHD=void 0,i.SMHD=void 0,i.STSD=void 0,i.FTYP=void 0,i.DINF=void 0,t.default=i},"./src/remux/mp4-remuxer.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return v})),r.d(t,"normalizePts",(function(){return g}));var n=r("./src/polyfills/number.ts"),i=r("./src/remux/aac-helper.ts"),a=r("./src/remux/mp4-generator.ts"),o=r("./src/events.ts"),s=r("./src/errors.ts"),u=r("./src/utils/logger.ts"),l=r("./src/types/loader.ts"),c=r("./src/utils/timescale-conversion.ts");function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}var f=null,h=null,p=!1,v=function(){function e(e,t,r,n){if(void 0===n&&(n=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,null===f){var i=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);f=i?parseInt(i[1]):0}if(null===h){var a=navigator.userAgent.match(/Safari\/(\d+)/i);h=a?parseInt(a[1]):0}p=!!f&&f<75||!!h&&h<600}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){u.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},t.resetNextTimestamp=function(){u.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},t.resetInitSegment=function(){u.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1,r=e.reduce((function(e,r){var n=r.pts-e;return n<-4294967296?(t=!0,g(e,r.pts)):n>0?e:r.pts}),e[0].pts);return t&&u.logger.debug("PTS rollover detected"),r},t.remux=function(e,t,r,n,i,a,o,s){var c,d,f,h,p,v,m=i,y=i,E=e.pid>-1,b=t.pid>-1,_=t.samples.length,D=e.samples.length>0,S=_>1;if((!E||D)&&(!b||S)||this.ISGenerated||o){this.ISGenerated||(f=this.generateIS(e,t,i));var w=this.isVideoContiguous,T=-1;if(S&&(T=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!w&&this.config.forceKeyFrameOnDiscontinuity))if(v=!0,T>0){u.logger.warn("[mp4-remuxer]: Dropped "+T+" out of "+_+" video samples due to a missing keyframe");var C=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(T),t.dropped+=T,y+=(t.samples[0].pts-C)/(t.timescale||9e4)}else-1===T&&(u.logger.warn("[mp4-remuxer]: No keyframe found out of "+_+" video samples"),v=!1);if(this.ISGenerated){if(D&&S){var A=this.getVideoStartPts(t.samples),x=(g(e.samples[0].pts,A)-A)/t.inputTimeScale;m+=Math.max(0,x),y+=Math.max(0,-x)}if(D){if(e.samplerate||(u.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),f=this.generateIS(e,t,i)),d=this.remuxAudio(e,m,this.isAudioContiguous,a,b||S||s===l.PlaylistLevelType.AUDIO?y:void 0),S){var k=d?d.endPTS-d.startPTS:0;t.inputTimeScale||(u.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),f=this.generateIS(e,t,i)),c=this.remuxVideo(t,y,w,k)}}else S&&(c=this.remuxVideo(t,y,w,0));c&&(c.firstKeyFrame=T,c.independent=-1!==T)}}return this.ISGenerated&&(r.samples.length&&(p=this.remuxID3(r,i)),n.samples.length&&(h=this.remuxText(n,i))),{audio:d,video:c,initSegment:f,independent:v,text:h,id3:p}},t.generateIS=function(e,t,r){var i,o,s,u=e.samples,l=t.samples,c=this.typeSupported,d={},f=!Object(n.isFiniteNumber)(this._initPTS),h="audio/mp4";if(f&&(i=o=1/0),e.config&&u.length&&(e.timescale=e.samplerate,e.isAAC||(c.mpeg?(h="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3")),d.audio={id:"audio",container:h,codec:e.codec,initSegment:!e.isAAC&&c.mpeg?new Uint8Array(0):a.default.initSegment([e]),metadata:{channelCount:e.channelCount}},f&&(s=e.inputTimeScale,i=o=u[0].pts-Math.round(s*r))),t.sps&&t.pps&&l.length&&(t.timescale=t.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:a.default.initSegment([t]),metadata:{width:t.width,height:t.height}},f)){s=t.inputTimeScale;var p=this.getVideoStartPts(l),v=Math.round(s*r);o=Math.min(o,g(l[0].dts,p)-v),i=Math.min(i,p-v)}if(Object.keys(d).length)return this.ISGenerated=!0,f&&(this._initPTS=i,this._initDTS=o),{tracks:d,initPTS:i,timescale:s}},t.remuxVideo=function(e,t,r,n){var i,l,h,v=e.inputTimeScale,y=e.samples,E=[],b=y.length,_=this._initPTS,D=this.nextAvcDts,S=8,w=Number.POSITIVE_INFINITY,T=Number.NEGATIVE_INFINITY,C=0,A=!1;r&&null!==D||(D=t*v-(y[0].pts-g(y[0].dts,y[0].pts)));for(var x=0;x<b;x++){var k=y[x];k.pts=g(k.pts-_,D),k.dts=g(k.dts-_,D),k.dts>k.pts&&(C=Math.max(Math.min(C,k.pts-k.dts),-18e3)),k.dts<y[x>0?x-1:x].dts&&(A=!0)}A&&y.sort((function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n})),l=y[0].dts,h=y[y.length-1].dts;var L=Math.round((h-l)/(b-1));if(C<0){if(C<-2*L){u.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(c.toMsFromMpegTsClock)(-L,!0)+" ms");for(var F=C,R=0;R<b;R++)y[R].dts=F=Math.max(F,y[R].pts-L),y[R].pts=Math.max(F,y[R].pts)}else{u.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(c.toMsFromMpegTsClock)(C,!0)+" ms to overcome this issue");for(var I=0;I<b;I++)y[I].dts=y[I].dts+C}l=y[0].dts}if(r){var O=l-D,P=O>L;if(P||O<-1){P?u.logger.warn("AVC: "+Object(c.toMsFromMpegTsClock)(O,!0)+" ms ("+O+"dts) hole between fragments detected, filling it"):u.logger.warn("AVC: "+Object(c.toMsFromMpegTsClock)(-O,!0)+" ms ("+O+"dts) overlapping between fragments detected"),l=D;var M=y[0].pts-O;y[0].dts=l,y[0].pts=M,u.logger.log("Video: First PTS/DTS adjusted: "+Object(c.toMsFromMpegTsClock)(M,!0)+"/"+Object(c.toMsFromMpegTsClock)(l,!0)+", delta: "+Object(c.toMsFromMpegTsClock)(O,!0)+" ms")}}p&&(l=Math.max(0,l));for(var B=0,N=0,U=0;U<b;U++){for(var j=y[U],H=j.units,G=H.length,K=0,z=0;z<G;z++)K+=H[z].data.length;N+=K,B+=G,j.length=K,j.dts=Math.max(j.dts,l),j.pts=Math.max(j.pts,j.dts,0),w=Math.min(j.pts,w),T=Math.max(j.pts,T)}h=y[b-1].dts;var V,W=N+4*B+8;try{V=new Uint8Array(W)}catch(ce){return void this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:W,reason:"fail allocating video mdat "+W})}var q=new DataView(V.buffer);q.setUint32(0,W),V.set(a.default.types.mdat,4);for(var Z=0;Z<b;Z++){for(var Y=y[Z],$=Y.units,X=0,Q=0,J=$.length;Q<J;Q++){var ee=$[Q],te=ee.data,re=ee.data.byteLength;q.setUint32(S,re),S+=4,V.set(te,S),S+=re,X+=4+re}if(Z<b-1)i=y[Z+1].dts-Y.dts;else{var ne=this.config,ie=Y.dts-y[Z>0?Z-1:Z].dts;if(ne.stretchShortVideoTrack&&null!==this.nextAudioPts){var ae=Math.floor(ne.maxBufferHole*v),oe=(n?w+n*v:this.nextAudioPts)-Y.pts;oe>ae?((i=oe-ie)<0&&(i=ie),u.logger.log("[mp4-remuxer]: It is approximately "+oe/90+" ms to the next segment; using duration "+i/90+" ms for the last video frame.")):i=ie}else i=ie}var se=Math.round(Y.pts-Y.dts);E.push(new m(Y.key,i,X,se))}if(E.length&&f&&f<70){var ue=E[0].flags;ue.dependsOn=2,ue.isNonSync=0}console.assert(void 0!==i,"mp4SampleDuration must be computed"),this.nextAvcDts=D=h+i,this.isVideoContiguous=!0;var le={data1:a.default.moof(e.sequenceNumber++,l,d({},e,{samples:E})),data2:V,startPTS:w/v,endPTS:(T+i)/v,startDTS:l/v,endDTS:D/v,type:"video",hasAudio:!1,hasVideo:!0,nb:E.length,dropped:e.dropped};return e.samples=[],e.dropped=0,console.assert(V.length,"MDAT length must not be zero"),le},t.remuxAudio=function(e,t,r,n,l){var c=e.inputTimeScale,f=c/(e.samplerate?e.samplerate:c),h=e.isAAC?1024:1152,p=h*f,v=this._initPTS,y=!e.isAAC&&this.typeSupported.mpeg,E=[],b=e.samples,_=y?0:8,D=this.nextAudioPts||-1,S=t*c;if(this.isAudioContiguous=r=r||b.length&&D>0&&(n&&Math.abs(S-D)<9e3||Math.abs(g(b[0].pts-v,S)-D)<20*p),b.forEach((function(e){e.pts=g(e.pts-v,S)})),!r||D<0){if(b=b.filter((function(e){return e.pts>=0})),!b.length)return;D=0===l?0:n?Math.max(0,S):b[0].pts}if(e.isAAC)for(var w=void 0!==l,T=this.config.maxAudioFramesDrift,C=0,A=D;C<b.length;C++){var x=b[C],k=x.pts,L=k-A,F=Math.abs(1e3*L/c);if(L<=-T*p&&w)0===C&&(u.logger.warn("Audio frame @ "+(k/c).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*L/c)+" ms."),this.nextAudioPts=D=A=k);else if(L>=T*p&&F<1e4&&w){var R=Math.round(L/p);(A=k-R*p)<0&&(R--,A+=p),0===C&&(this.nextAudioPts=D=A),u.logger.warn("[mp4-remuxer]: Injecting "+R+" audio frame @ "+(A/c).toFixed(3)+"s due to "+Math.round(1e3*L/c)+" ms gap.");for(var I=0;I<R;I++){var O=Math.max(A,0),P=i.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);P||(u.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),P=x.unit.subarray()),b.splice(C,0,{unit:P,pts:O}),A+=p,C++}}x.pts=A,A+=p}for(var M,B=null,N=null,U=0,j=b.length;j--;)U+=b[j].unit.byteLength;for(var H=0,G=b.length;H<G;H++){var K=b[H],z=K.unit,V=K.pts;if(null!==N)E[H-1].duration=Math.round((V-N)/f);else{if(r&&e.isAAC&&(V=D),B=V,!(U>0))return;U+=_;try{M=new Uint8Array(U)}catch(J){return void this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}y||(new DataView(M.buffer).setUint32(0,U),M.set(a.default.types.mdat,4))}M.set(z,_);var W=z.byteLength;_+=W,E.push(new m(!0,h,W,0)),N=V}var q=E.length;if(q){var Z=E[E.length-1];this.nextAudioPts=D=N+f*Z.duration;var Y=y?new Uint8Array(0):a.default.moof(e.sequenceNumber++,B/f,d({},e,{samples:E}));e.samples=[];var $=B/c,X=D/c,Q={data1:Y,data2:M,startPTS:$,endPTS:X,startDTS:$,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:q};return this.isAudioContiguous=!0,console.assert(M.length,"MDAT length must not be zero"),Q}},t.remuxEmptyAudio=function(e,t,r,n){var a=e.inputTimeScale,o=a/(e.samplerate?e.samplerate:a),s=this.nextAudioPts,l=(null!==s?s:n.startDTS*a)+this._initDTS,c=n.endDTS*a+this._initDTS,d=1024*o,f=Math.ceil((c-l)/d),h=i.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(u.logger.warn("[mp4-remuxer]: remux empty Audio"),h){for(var p=[],v=0;v<f;v++){var g=l+v*d;p.push({unit:h,pts:g,dts:g})}return e.samples=p,this.remuxAudio(e,t,r,!1)}u.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},t.remuxID3=function(e,t){var r=e.samples.length;if(r){for(var n=e.inputTimeScale,i=this._initPTS,a=this._initDTS,o=0;o<r;o++){var s=e.samples[o];s.pts=g(s.pts-i,t*n)/n,s.dts=g(s.dts-a,t*n)/n}var u=e.samples;return e.samples=[],{samples:u}}},t.remuxText=function(e,t){var r=e.samples.length;if(r){for(var n=e.inputTimeScale,i=this._initPTS,a=0;a<r;a++){var o=e.samples[a];o.pts=g(o.pts-i,t*n)/n}e.samples.sort((function(e,t){return e.pts-t.pts}));var s=e.samples;return e.samples=[],{samples:s}}},e}();function g(e,t){var r;if(null===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}var m=function(e,t,r,n){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=r,this.cts=n,this.flags=new y(e)},y=function(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}},"./src/remux/passthrough-remuxer.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/polyfills/number.ts"),i=r("./src/utils/mp4-tools.ts"),a=r("./src/loader/fragment.ts"),o=r("./src/utils/logger.ts"),s=function(){function e(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this.initPTS=e,this.lastEndDTS=null},t.resetNextTimestamp=function(){this.lastEndDTS=null},t.resetInitSegment=function(e,t,r){this.audioCodec=t,this.videoCodec=r,this.generateInitSegment(e),this.emitInitSegment=!0},t.generateInitSegment=function(e){var t=this.audioCodec,r=this.videoCodec;if(!e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var n=this.initData=Object(i.parseInitSegment)(e);t||(t=l(n.audio,a.ElementaryStreamTypes.AUDIO)),r||(r=l(n.video,a.ElementaryStreamTypes.VIDEO));var s={};n.audio&&n.video?s.audiovideo={container:"video/mp4",codec:t+","+r,initSegment:e,id:"main"}:n.audio?s.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:n.video?s.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:o.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s},t.remux=function(e,t,r,a,s){var l=this.initPTS,c=this.lastEndDTS,d={audio:void 0,video:void 0,text:a,id3:r,initSegment:void 0};Object(n.isFiniteNumber)(c)||(c=this.lastEndDTS=s||0);var f=t.samples;if(!f||!f.length)return d;var h={initPTS:void 0,timescale:1},p=this.initData;if(p&&p.length||(this.generateInitSegment(f),p=this.initData),!p||!p.length)return o.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1),Object(n.isFiniteNumber)(l)||(this.initPTS=h.initPTS=l=u(p,f,c));var v=Object(i.getDuration)(f,p),g=c,m=v+g;Object(i.offsetStartDTS)(p,f,l),v>0?this.lastEndDTS=m:(o.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var y=!!p.audio,E=!!p.video,b="";y&&(b+="audio"),E&&(b+="video");var _={data1:f,startPTS:g,startDTS:g,endPTS:m,endDTS:m,type:b,hasAudio:y,hasVideo:E,nb:1,dropped:0};return d.audio="audio"===_.type?_:void 0,d.video="audio"!==_.type?_:void 0,d.text=a,d.id3=r,d.initSegment=h,d},e}(),u=function(e,t,r){return Object(i.getStartDTS)(e,t)-r};function l(e,t){var r=null===e||void 0===e?void 0:e.codec;return r&&r.length>4?r:"hvc1"===r?"hvc1.1.c.L120.90":"av01"===r?"av01.0.04M.08":"avc1"===r||t===a.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}t.default=s},"./src/task-loop.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return n}));var n=function(){function e(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.onHandlerDestroyed=function(){},t.hasInterval=function(){return!!this._tickInterval},t.hasNextTick=function(){return!!this._tickTimer},t.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},t.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},t.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},t.doTick=function(){},e}()},"./src/types/cmcd.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"CMCDVersion",(function(){return o})),r.d(t,"CMCDObjectType",(function(){return n})),r.d(t,"CMCDStreamingFormat",(function(){return i})),r.d(t,"CMCDStreamType",(function(){return a}));var n,i,a,o=1;!function(e){e.MANIFEST="m",e.AUDIO="a",e.VIDEO="v",e.MUXED="av",e.INIT="i",e.CAPTION="c",e.TIMED_TEXT="tt",e.KEY="k",e.OTHER="o"}(n||(n={})),function(e){e.DASH="d",e.HLS="h",e.SMOOTH="s",e.OTHER="o"}(i||(i={})),function(e){e.VOD="v",e.LIVE="l"}(a||(a={}))},"./src/types/level.ts":function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i;function a(e,t){var r=e.canSkipUntil,n=e.canSkipDateRanges,a=e.endSN;return r&&(void 0!==t?t-a:0)<r?n?i.v2:i.Yes:i.No}r.r(t),r.d(t,"HlsSkip",(function(){return i})),r.d(t,"getSkipValue",(function(){return a})),r.d(t,"HlsUrlParameters",(function(){return o})),r.d(t,"Level",(function(){return s})),function(e){e.No="",e.Yes="YES",e.v2="v2"}(i||(i={}));var o=function(){function e(e,t,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=r}return e.prototype.addDirectives=function(e){var t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.toString()},e}(),s=function(){function e(e){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this.attrs=e.attrs,this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter((function(e){return e})).join(",").replace(/\.[^.,]+/g,"")}var t,r,i;return t=e,(r=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(e){var t=e%this.url.length;this._urlId!==t&&(this.details=void 0,this._urlId=t)}}])&&n(t.prototype,r),i&&n(t,i),e}()},"./src/types/loader.ts":function(e,t,r){"use strict";var n,i;r.r(t),r.d(t,"PlaylistContextType",(function(){return n})),r.d(t,"PlaylistLevelType",(function(){return i})),function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(n||(n={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(i||(i={}))},"./src/types/transmuxer.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"ChunkMetadata",(function(){return n}));var n=function(e,t,r,n,i,a){void 0===n&&(n=0),void 0===i&&(i=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=r,this.size=n,this.part=i,this.partial=a}},"./src/utils/attr-list.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"AttrList",(function(){return a}));var n=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=function(){function e(t){for(var r in"string"===typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.optionalFloat=function(e,t){var r=this[e];return r?parseFloat(r):t},t.enumeratedString=function(e){return this[e]},t.bool=function(e){return"YES"===this[e]},t.decimalResolution=function(e){var t=n.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,r={};for(i.lastIndex=0;null!==(t=i.exec(e));){var n=t[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),r[t[1]]=n}return r},e}()},"./src/utils/binary-search.ts":function(e,t,r){"use strict";r.r(t),t.default={search:function(e,t){for(var r=0,n=e.length-1,i=null,a=null;r<=n;){var o=t(a=e[i=(r+n)/2|0]);if(o>0)r=i+1;else{if(!(o<0))return a;n=i-1}}return null}}},"./src/utils/buffer-helper.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"BufferHelper",(function(){return a}));var n=r("./src/utils/logger.ts"),i={length:0,start:function(){return 0},end:function(){return 0}},a=function(){function e(){}return e.isBuffered=function(t,r){try{if(t)for(var n=e.getBuffered(t),i=0;i<n.length;i++)if(r>=n.start(i)&&r<=n.end(i))return!0}catch(a){}return!1},e.bufferInfo=function(t,r,n){try{if(t){var i,a=e.getBuffered(t),o=[];for(i=0;i<a.length;i++)o.push({start:a.start(i),end:a.end(i)});return this.bufferedInfo(o,r,n)}}catch(s){}return{len:0,start:r,end:r,nextStart:void 0}},e.bufferedInfo=function(e,t,r){t=Math.max(0,t),e.sort((function(e,t){var r=e.start-t.start;return r||t.end-e.end}));var n=[];if(r)for(var i=0;i<e.length;i++){var a=n.length;if(a){var o=n[a-1].end;e[i].start-o<r?e[i].end>o&&(n[a-1].end=e[i].end):n.push(e[i])}else n.push(e[i])}else n=e;for(var s,u=0,l=t,c=t,d=0;d<n.length;d++){var f=n[d].start,h=n[d].end;if(t+r>=f&&t<h)l=f,u=(c=h)-t;else if(t+r<f){s=f;break}}return{len:u,start:l||0,end:c||0,nextStart:s}},e.getBuffered=function(e){try{return e.buffered}catch(t){return n.logger.log("failed to get media.buffered",t),i}},e}()},"./src/utils/cea-608-parser.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"Row",(function(){return y})),r.d(t,"CaptionScreen",(function(){return E}));var n,i=r("./src/utils/logger.ts"),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o=function(e){var t=e;return a.hasOwnProperty(e)&&(t=a[e]),String.fromCharCode(t)},s=15,u=100,l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(n||(n={}));var p=function(){function e(){this.time=null,this.verboseLevel=n.ERROR}return e.prototype.log=function(e,t){this.verboseLevel>=e&&i.logger.log(this.time+" ["+e+"] "+t)},e}(),v=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},g=function(){function e(e,t,r,n,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),m=function(){function e(e,t,r,n,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new g(t,r,n,i,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),y=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<u;t++)this.chars.push(new m);this.logger=e,this.pos=0,this.currPenState=new g}var t=e.prototype;return t.equals=function(e){for(var t=!0,r=0;r<u;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<u;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<u;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(n.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>u&&(this.logger.log(n.DEBUG,"Too large cursor position "+this.pos),this.pos=u)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=o(e);this.pos>=u?this.logger.log(n.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<u;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,r=0;r<u;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),E=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<s;t++)this.rows.push(new y(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<s;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,r=0;r<s;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<s;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<s;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(n.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(n.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<s;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var o=a.rows[i].cueStartTime,u=this.logger.time;if(o&&null!==u&&o<u)for(var l=0;l<this.nrRollUpRows;l++)this.rows[t-this.nrRollUpRows+l+1].copy(a.rows[i+l])}}this.currRow=t;var c=this.rows[this.currRow];if(null!==e.indent){var d=e.indent,f=Math.max(d-1,0);c.setCursor(e.indent),e.color=c.chars[f].penState.foreground}var h={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(h)},t.setBkgData=function(e){this.logger.log(n.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(n.TEXT,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(n.INFO,"Rolling up")}else this.logger.log(n.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],r="",n=-1,i=0;i<s;i++){var a=this.rows[i].getTextString();a&&(n=i+1,e?t.push("Row "+n+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},t.getTextAndFormat=function(){return this.rows},e}(),b=function(){function e(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new E(r),this.nonDisplayedMemory=new E(r),this.lastOutputScreen=new E(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(n.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(n.INFO,r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(n.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(n.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(n.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(n.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(n.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(n.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(n.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(n.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(n.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(n.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(n.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(n.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(this.logger.log(n.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(n.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(n.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}this.logger.log(n.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),_=function(){function e(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var n=new p;this.channels=[null,new b(e,t,n),new b(e+1,r,n)],this.cmdHistory={a:null,b:null},this.logger=n}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var r,i,a,o=!1;this.logger.time=e;for(var s=0;s<t.length;s+=2)if(i=127&t[s],a=127&t[s+1],0!==i||0!==a){if(this.logger.log(n.DATA,"["+v([t[s],t[s+1]])+"] -> ("+v([i,a])+")"),(r=this.parseCmd(i,a))||(r=this.parseMidrow(i,a)),r||(r=this.parsePAC(i,a)),r||(r=this.parseBackgroundAttributes(i,a)),!r&&(o=this.parseChars(i,a))){var u=this.currentChannel;u&&u>0?this.channels[u].insertChars(o):this.logger.log(n.WARNING,"No channel found yet. TEXT-MODE?")}r||o||this.logger.log(n.WARNING,"Couldn't parse cleaned data "+v([i,a])+" orig: "+v([t[s],t[s+1]]))}},t.parseCmd=function(e,t){var r=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;if(S(e,t,r))return D(null,null,r),this.logger.log(n.DEBUG,"Repeated command ("+v([e,t])+") is dropped"),!0;var i=20===e||21===e||23===e?1:2,a=this.channels[i];return 20===e||21===e||28===e||29===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),D(e,t,r),this.currentChannel=i,!0},t.parseMidrow=function(e,t){var r=0;if((17===e||25===e)&&t>=32&&t<=47){if((r=17===e?1:2)!==this.currentChannel)return this.logger.log(n.ERROR,"Mismatch channel in midrow parsing"),!1;var i=this.channels[r];return!!i&&(i.ccMIDROW(t),this.logger.log(n.DEBUG,"MIDROW ("+v([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var r,n=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;if(S(e,t,n))return D(null,null,n),!0;var i=e<=23?1:2;r=t>=64&&t<=95?1===i?l[e]:d[e]:1===i?c[e]:f[e];var a=this.channels[i];return!!a&&(a.setPAC(this.interpretPAC(r,t)),D(e,t,n),this.currentChannel=i,!0)},t.interpretPAC=function(e,t){var r,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1===(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},t.parseChars=function(e,t){var r,i,a=null,s=null;if(e>=25?(r=2,s=e-8):(r=1,s=e),s>=17&&s<=19?(i=17===s?t+80:18===s?t+112:t+144,this.logger.log(n.INFO,"Special char '"+o(i)+"' in channel "+r),a=[i]):e>=32&&e<=127&&(a=0===t?[e]:[e,t]),a){var u=v(a);this.logger.log(n.DEBUG,"Char codes =  "+u.join(",")),D(e,t,this.cmdHistory)}return a},t.parseBackgroundAttributes=function(e,t){var r;if(!((16===e||24===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=45&&t<=47))return!1;var n={};16===e||24===e?(r=Math.floor((t-32)/2),n.background=h[r],t%2===1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0));var i=e<=23?1:2;return this.channels[i].setBkgData(n),D(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var r=this.channels[t];r&&r.cueSplitAtTime(e)}},e}();function D(e,t,r){r.a=e,r.b=t}function S(e,t,r){return r.a===e&&r.b===t}t.default=_},"./src/utils/codecs.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"isCodecType",(function(){return i})),r.d(t,"isCodecSupportedInMp4",(function(){return a}));var n={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function i(e,t){var r=n[t];return!!r&&!0===r[e.slice(0,4)]}function a(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}},"./src/utils/cues.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/utils/vttparser.ts"),i=r("./src/utils/webvtt-parser.ts"),a=r("./src/utils/texttrack-utils.ts"),o=/\s/,s={newCue:function(e,t,r,s){for(var u,l,c,d,f,h=[],p=self.VTTCue||self.TextTrackCue,v=0;v<s.rows.length;v++)if(c=!0,d=0,f="",!(u=s.rows[v]).isEmpty()){for(var g=0;g<u.chars.length;g++)o.test(u.chars[g].uchar)&&c?d++:(f+=u.chars[g].uchar,c=!1);u.cueStartTime=t,t===r&&(r+=1e-4),d>=16?d--:d++;var m=Object(n.fixLineBreaks)(f.trim()),y=Object(i.generateCueId)(t,r,m);e&&e.cues&&e.cues.getCueById(y)||((l=new p(t,r,m)).id=y,l.line=v+1,l.align="left",l.position=10+Math.min(80,10*Math.floor(8*d/32)),h.push(l))}return e&&h.length&&(h.sort((function(e,t){return"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line})),h.forEach((function(t){return Object(a.addCueToTrack)(e,t)}))),h}};t.default=s},"./src/utils/discontinuities.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"findFirstFragWithCC",(function(){return o})),r.d(t,"shouldAlignOnDiscontinuities",(function(){return s})),r.d(t,"findDiscontinuousReferenceFrag",(function(){return u})),r.d(t,"adjustSlidingStart",(function(){return c})),r.d(t,"alignStream",(function(){return d})),r.d(t,"alignPDT",(function(){return f})),r.d(t,"alignFragmentByPDTDelta",(function(){return h})),r.d(t,"alignMediaPlaylistByPDT",(function(){return p}));var n=r("./src/polyfills/number.ts"),i=r("./src/utils/logger.ts"),a=r("./src/controller/level-helper.ts");function o(e,t){for(var r=null,n=0,i=e.length;n<i;n++){var a=e[n];if(a&&a.cc===t){r=a;break}}return r}function s(e,t,r){return!(!t.details||!(r.endCC>r.startCC||e&&e.cc<r.startCC))}function u(e,t){var r=e.fragments,n=t.fragments;if(n.length&&r.length){var a=o(r,n[0].cc);if(a&&(!a||a.startPTS))return a;i.logger.log("No frag in previous level to align on")}else i.logger.log("No fragments to align")}function l(e,t){if(e){var r=e.start+t;e.start=e.startPTS=r,e.endPTS=r+e.duration}}function c(e,t){for(var r=t.fragments,n=0,i=r.length;n<i;n++)l(r[n],e);t.fragmentHint&&l(t.fragmentHint,e),t.alignedSliding=!0}function d(e,t,r){t&&(function(e,t,r){if(s(e,r,t)){var a=u(r.details,t);a&&Object(n.isFiniteNumber)(a.start)&&(i.logger.log("Adjusting PTS using last level due to CC increase within current level "+t.url),c(a.start,t))}}(e,r,t),!r.alignedSliding&&t.details&&f(r,t.details),r.alignedSliding||!t.details||r.skippedSegments||Object(a.adjustSliding)(t.details,r))}function f(e,t){if(t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime){var r=t.fragments[0].programDateTime,a=e.fragments[0].programDateTime,o=(a-r)/1e3+t.fragments[0].start;o&&Object(n.isFiniteNumber)(o)&&(i.logger.log("Adjusting PTS using programDateTime delta "+(a-r)+"ms, sliding:"+o.toFixed(3)+" "+e.url+" "),c(o,e))}}function h(e,t){var r=e.programDateTime;if(r){var n=(r-t)/1e3;e.start=e.startPTS=n,e.endPTS=n+e.duration}}function p(e,t){if(t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime){var r=t.fragments[0].programDateTime-1e3*t.fragments[0].start;e.fragments.forEach((function(e){h(e,r)})),e.fragmentHint&&h(e.fragmentHint,r),e.alignedSliding=!0}}},"./src/utils/ewma-bandwidth-estimator.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/utils/ewma.ts"),i=function(){function e(e,t,r){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new n.default(e),this.fast_=new n.default(t)}var t=e.prototype;return t.update=function(e,t){var r=this.slow_,i=this.fast_;this.slow_.halfLife!==e&&(this.slow_=new n.default(e,r.getEstimate(),r.getTotalWeight())),this.fast_.halfLife!==t&&(this.fast_=new n.default(t,i.getEstimate(),i.getTotalWeight()))},t.sample=function(e,t){var r=(e=Math.max(e,this.minDelayMs_))/1e3,n=8*t/r;this.fast_.sample(r,n),this.slow_.sample(r,n)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();t.default=i},"./src/utils/ewma.ts":function(e,t,r){"use strict";r.r(t);var n=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=r}var t=e.prototype;return t.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},e}();t.default=n},"./src/utils/fetch-loader.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"fetchSupported",(function(){return f}));var n=r("./src/polyfills/number.ts"),i=r("./src/loader/load-stats.ts"),a=r("./src/demux/chunk-cache.ts");function o(e){var t="function"===typeof Map?new Map:void 0;return o=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return s(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)},o(e)}function s(e,t,r){return s=u()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&l(i,r.prototype),i},s.apply(null,arguments)}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function f(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}var h=function(){function e(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||p,this.controller=new self.AbortController,this.stats=new i.LoadStats}var t=e.prototype;return t.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},t.abortInternal=function(){var e=this.response;e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},t.load=function(e,t,r){var i=this,a=this.stats;if(a.loading.start)throw new Error("Loader can only be used once.");a.loading.start=self.performance.now();var o=function(e,t){var r={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(d({},e.headers))};return e.rangeEnd&&r.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),r}(e,this.controller.signal),s=r.onProgress,u="arraybuffer"===e.responseType,l=u?"byteLength":"length";this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,o),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){i.abortInternal(),r.onTimeout(a,e,i.response)}),t.timeout),self.fetch(this.request).then((function(r){if(i.response=i.loader=r,!r.ok){var o=r.status,l=r.statusText;throw new v(l||"fetch, bad network response",o,r)}return a.loading.first=Math.max(self.performance.now(),a.loading.start),a.total=parseInt(r.headers.get("Content-Length")||"0"),s&&Object(n.isFiniteNumber)(t.highWaterMark)?i.loadProgressively(r,a,e,t.highWaterMark,s):u?r.arrayBuffer():r.text()})).then((function(o){var u=i.response;self.clearTimeout(i.requestTimeout),a.loading.end=Math.max(self.performance.now(),a.loading.first),a.loaded=a.total=o[l];var c={url:u.url,data:o};s&&!Object(n.isFiniteNumber)(t.highWaterMark)&&s(a,e,o,u),r.onSuccess(c,a,e,u)})).catch((function(t){if(self.clearTimeout(i.requestTimeout),!a.aborted){var n=t.code||0;r.onError({code:n,text:t.message},e,t.details)}}))},t.getCacheAge=function(){var e=null;if(this.response){var t=this.response.headers.get("age");e=t?parseFloat(t):null}return e},t.loadProgressively=function(e,t,r,n,i){void 0===n&&(n=0);var o=new a.default,s=e.body.getReader();return function a(){return s.read().then((function(s){if(s.done)return o.dataLength&&i(t,r,o.flush(),e),Promise.resolve(new ArrayBuffer(0));var u=s.value,l=u.length;return t.loaded+=l,l<n||o.dataLength?(o.push(u),o.dataLength>=n&&i(t,r,o.flush(),e)):i(t,r,u,e),a()})).catch((function(){return Promise.reject()}))}()},e}();function p(e,t){return new self.Request(e.url,t)}var v=function(e){var t,r;function n(t,r,n){var i;return(i=e.call(this,t)||this).code=void 0,i.details=void 0,i.code=r,i.details=n,i}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,l(t,r),n}(o(Error));t.default=h},"./src/utils/imsc1-ttml-parser.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"IMSC1_CODEC",(function(){return c})),r.d(t,"parseIMSC1",(function(){return p}));var n=r("./src/utils/mp4-tools.ts"),i=r("./src/utils/vttparser.ts"),a=r("./src/utils/vttcue.ts"),o=r("./src/demux/id3.ts"),s=r("./src/utils/timescale-conversion.ts"),u=r("./src/utils/webvtt-parser.ts");function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}var c="stpp.ttml.im1t",d=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,f=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,h={left:"start",center:"center",right:"end",start:"start",end:"end"};function p(e,t,r,i,c){var d=Object(n.findBox)(new Uint8Array(e),["mdat"]);if(0!==d.length){var f=d[0],p=Object(o.utf8ArrayToStr)(new Uint8Array(e,f.start,f.end-f.start)),_=Object(s.toTimescaleFromScale)(t,1,r);try{i(function(e,t){var r=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");var n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(n).reduce((function(e,t){return e[t]=r.getAttribute("ttp:"+t)||n[t],e}),{}),o="preserve"!==r.getAttribute("xml:space"),s=g(v(r,"styling","style")),c=g(v(r,"layout","region")),d=v(r,"body","[begin]");return[].map.call(d,(function(e){var r=m(e,o);if(!r||!e.hasAttribute("begin"))return null;var n=b(e.getAttribute("begin"),i),d=b(e.getAttribute("dur"),i),f=b(e.getAttribute("end"),i);if(null===n)throw E(e);if(null===f){if(null===d)throw E(e);f=n+d}var p=new a.default(n-t,f-t,r);p.id=Object(u.generateCueId)(p.startTime,p.endTime,p.text);var v=c[e.getAttribute("region")],g=s[e.getAttribute("style")];p.position=10,p.size=80;var _=function(e,t){var r="http://www.w3.org/ns/ttml#styling";return["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(n,i){var a=y(t,r,i)||y(e,r,i);return a&&(n[i]=a),n}),{})}(v,g),D=_.textAlign;if(D){var S=h[D];S&&(p.lineAlign=S),p.align=D}return l(p,_),p})).filter((function(e){return null!==e}))}(p,_))}catch(D){c(D)}}else c(new Error("Could not parse IMSC1 mdat"))}function v(e,t,r){var n=e.getElementsByTagName(t)[0];return n?[].slice.call(n.querySelectorAll(r)):[]}function g(e){return e.reduce((function(e,t){var r=t.getAttribute("xml:id");return r&&(e[r]=t),e}),{})}function m(e,t){return[].slice.call(e.childNodes).reduce((function(e,r,n){var i;return"br"===r.nodeName&&n?e+"\n":null!==(i=r.childNodes)&&void 0!==i&&i.length?m(r,t):t?e+r.textContent.trim().replace(/\s+/g," "):e+r.textContent}),"")}function y(e,t,r){return e.hasAttributeNS(t,r)?e.getAttributeNS(t,r):null}function E(e){return new Error("Could not parse ttml timestamp "+e)}function b(e,t){if(!e)return null;var r=Object(i.parseTimeStamp)(e);return null===r&&(d.test(e)?r=function(e,t){var r=d.exec(e),n=(0|r[4])+(0|r[5])/t.subFrameRate;return 3600*(0|r[1])+60*(0|r[2])+(0|r[3])+n/t.frameRate}(e,t):f.test(e)&&(r=function(e,t){var r=f.exec(e),n=Number(r[1]);switch(r[2]){case"h":return 3600*n;case"m":return 60*n;case"ms":return 1e3*n;case"f":return n/t.frameRate;case"t":return n/t.tickRate}return n}(e,t))),r}},"./src/utils/logger.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"enableLogs",(function(){return s})),r.d(t,"logger",(function(){return u}));var n=function(){},i={trace:n,debug:n,log:n,warn:n,info:n,error:n},a=i;function o(e){var t=self.console[e];return t?t.bind(self.console,"["+e+"] >"):n}function s(e){if(self.console&&!0===e||"object"===typeof e){!function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach((function(t){a[t]=e[t]?e[t].bind(e):o(t)}))}(e,"debug","log","info","warn","error");try{a.log()}catch(t){a=i}}else a=i}var u=i},"./src/utils/mediakeys-helper.ts":function(e,t,r){"use strict";var n;r.r(t),r.d(t,"KeySystems",(function(){return n})),r.d(t,"requestMediaKeySystemAccess",(function(){return i})),function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(n||(n={}));var i="undefined"!==typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null},"./src/utils/mediasource-helper.ts":function(e,t,r){"use strict";function n(){return self.MediaSource||self.WebKitMediaSource}r.r(t),r.d(t,"getMediaSource",(function(){return n}))},"./src/utils/mp4-tools.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"bin2str",(function(){return s})),r.d(t,"readUint16",(function(){return u})),r.d(t,"readUint32",(function(){return l})),r.d(t,"writeUint32",(function(){return c})),r.d(t,"findBox",(function(){return d})),r.d(t,"parseSegmentIndex",(function(){return f})),r.d(t,"parseInitSegment",(function(){return h})),r.d(t,"getStartDTS",(function(){return p})),r.d(t,"getDuration",(function(){return v})),r.d(t,"computeRawDurationFromSamples",(function(){return g})),r.d(t,"offsetStartDTS",(function(){return m})),r.d(t,"segmentValidRange",(function(){return y})),r.d(t,"appendUint8Array",(function(){return E}));var n=r("./src/utils/typed-array.ts"),i=r("./src/loader/fragment.ts"),a=Math.pow(2,32)-1,o=[].push;function s(e){return String.fromCharCode.apply(null,e)}function u(e,t){"data"in e&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r}function l(e,t){"data"in e&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r}function c(e,t,r){"data"in e&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}function d(e,t){var r,n,i,a=[];if(!t.length)return a;"data"in e?(r=e.data,n=e.start,i=e.end):(n=0,i=(r=e).byteLength);for(var u=n;u<i;){var c=l(r,u),f=c>1?u+c:i;if(s(r.subarray(u+4,u+8))===t[0])if(1===t.length)a.push({data:r,start:u+8,end:f});else{var h=d({data:r,start:u+8,end:f},t.slice(1));h.length&&o.apply(a,h)}u=f}return a}function f(e){var t=d(e,["moov"])[0],r=t?t.end:null,n=d(e,["sidx"]);if(!n||!n[0])return null;var i=[],a=n[0],o=a.data[0],s=0===o?8:16,c=l(a,s);s+=4,s+=0===o?8:16,s+=2;var f=a.end+0,h=u(a,s);s+=2;for(var p=0;p<h;p++){var v=s,g=l(a,v);v+=4;var m=2147483647&g;if(1===(2147483648&g)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var y=l(a,v);v+=4,i.push({referenceSize:m,subsegmentDuration:y,info:{duration:y/c,start:f,end:f+m-1}}),f+=m,s=v+=4}return{earliestPresentationTime:0,timescale:c,version:o,referencesCount:h,references:i,moovEndOffset:r}}function h(e){for(var t=[],r=d(e,["moov","trak"]),n=0;n<r.length;n++){var a=r[n],o=d(a,["tkhd"])[0];if(o){var u=o.data[o.start],c=0===u?12:20,f=l(o,c),h=d(a,["mdia","mdhd"])[0];if(h){var p=l(h,c=0===(u=h.data[h.start])?12:20),v=d(a,["mdia","hdlr"])[0];if(v){var g=s(v.data.subarray(v.start+8,v.start+12)),m={soun:i.ElementaryStreamTypes.AUDIO,vide:i.ElementaryStreamTypes.VIDEO}[g];if(m){var y=d(a,["mdia","minf","stbl","stsd"])[0],E=void 0;y&&(E=s(y.data.subarray(y.start+12,y.start+16))),t[f]={timescale:p,type:m},t[m]={timescale:p,id:f,codec:E}}}}}}return d(e,["moov","mvex","trex"]).forEach((function(e){var r=l(e,4),n=t[r];n&&(n.default={duration:l(e,12),flags:l(e,20)})})),t}function p(e,t){return d(t,["moof","traf"]).reduce((function(t,r){var n=d(r,["tfdt"])[0],i=n.data[n.start],a=d(r,["tfhd"]).reduce((function(t,r){var a=l(r,4),o=e[a];if(o){var s=l(n,4);1===i&&(s*=Math.pow(2,32),s+=l(n,8));var u=s/(o.timescale||9e4);if(isFinite(u)&&(null===t||u<t))return u}return t}),null);return null!==a&&isFinite(a)&&(null===t||a<t)?a:t}),null)||0}function v(e,t){for(var r=0,n=0,a=0,o=d(e,["moof","traf"]),s=0;s<o.length;s++){var u=o[s],c=d(u,["tfhd"])[0],h=t[l(c,4)];if(h){var p=h.default,v=l(c,0)|(null===p||void 0===p?void 0:p.flags),m=null===p||void 0===p?void 0:p.duration;8&v&&(m=l(c,2&v?12:8));for(var y=h.timescale||9e4,E=d(u,["trun"]),b=0;b<E.length;b++)!(r=g(E[b]))&&m&&(r=m*l(E[b],4)),h.type===i.ElementaryStreamTypes.VIDEO?n+=r/y:h.type===i.ElementaryStreamTypes.AUDIO&&(a+=r/y)}}if(0===n&&0===a){var _=f(e);if(null!==_&&void 0!==_&&_.references)return _.references.reduce((function(e,t){return e+t.info.duration||0}),0)}return n||a}function g(e){var t=l(e,0),r=8;1&t&&(r+=4),4&t&&(r+=4);for(var n=0,i=l(e,4),a=0;a<i;a++)256&t&&(n+=l(e,r),r+=4),512&t&&(r+=4),1024&t&&(r+=4),2048&t&&(r+=4);return n}function m(e,t,r){d(t,["moof","traf"]).forEach((function(t){d(t,["tfhd"]).forEach((function(n){var i=l(n,4),o=e[i];if(o){var s=o.timescale||9e4;d(t,["tfdt"]).forEach((function(e){var t=e.data[e.start],n=l(e,4);if(0===t)c(e,4,n-r*s);else{n*=Math.pow(2,32),n+=l(e,8),n-=r*s,n=Math.max(n,0);var i=Math.floor(n/(a+1)),o=Math.floor(n%(a+1));c(e,4,i),c(e,8,o)}}))}}))}))}function y(e){var t={valid:null,remainder:null},r=d(e,["moof"]);if(!r)return t;if(r.length<2)return t.remainder=e,t;var i=r[r.length-1];return t.valid=Object(n.sliceUint8)(e,0,i.start-8),t.remainder=Object(n.sliceUint8)(e,i.start-8),t}function E(e,t){var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}},"./src/utils/output-filter.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return n}));var n=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[],this.startTime=null},e}()},"./src/utils/texttrack-utils.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"sendAddTrackEvent",(function(){return i})),r.d(t,"addCueToTrack",(function(){return a})),r.d(t,"clearCurrentCues",(function(){return o})),r.d(t,"removeCuesInRange",(function(){return s})),r.d(t,"getCuesInRange",(function(){return u}));var n=r("./src/utils/logger.ts");function i(e,t){var r;try{r=new Event("addtrack")}catch(n){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function a(e,t){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(a){n.logger.debug("[texttrack-utils]: "+a);var i=new self.TextTrackCue(t.startTime,t.endTime,t.text);i.id=t.id,e.addCue(i)}"disabled"===r&&(e.mode=r)}function o(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var r=e.cues.length;r--;)e.removeCue(e.cues[r]);"disabled"===t&&(e.mode=t)}function s(e,t,r){var n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&e.cues.length>0)for(var i=u(e.cues,t,r),a=0;a<i.length;a++)e.removeCue(i[a]);"disabled"===n&&(e.mode=n)}function u(e,t,r){var n=[],i=function(e,t){if(t<e[0].startTime)return 0;var r=e.length-1;if(t>e[r].endTime)return-1;for(var n=0,i=r;n<=i;){var a=Math.floor((i+n)/2);if(t<e[a].startTime)i=a-1;else{if(!(t>e[a].startTime&&n<r))return a;n=a+1}}return e[n].startTime-t<t-e[i].startTime?n:i}(e,t);if(i>-1)for(var a=i,o=e.length;a<o;a++){var s=e[a];if(s.startTime>=t&&s.endTime<=r)n.push(s);else if(s.startTime>r)return n}return n}},"./src/utils/time-ranges.ts":function(e,t,r){"use strict";r.r(t),t.default={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}}},"./src/utils/timescale-conversion.ts":function(e,t,r){"use strict";function n(e,t,r,n){void 0===r&&(r=1),void 0===n&&(n=!1);var i=e*t*r;return n?Math.round(i):i}function i(e,t,r,i){return void 0===r&&(r=1),void 0===i&&(i=!1),n(e,t,1/r,i)}function a(e,t){return void 0===t&&(t=!1),n(e,1e3,1/9e4,t)}function o(e,t){return void 0===t&&(t=1),n(e,9e4,1/t)}r.r(t),r.d(t,"toTimescaleFromBase",(function(){return n})),r.d(t,"toTimescaleFromScale",(function(){return i})),r.d(t,"toMsFromMpegTsClock",(function(){return a})),r.d(t,"toMpegTsClockFromTimescale",(function(){return o}))},"./src/utils/typed-array.ts":function(e,t,r){"use strict";function n(e,t,r){return Uint8Array.prototype.slice?e.slice(t,r):new Uint8Array(Array.prototype.slice.call(e,t,r))}r.r(t),r.d(t,"sliceUint8",(function(){return n}))},"./src/utils/vttcue.ts":function(e,t,r){"use strict";r.r(t),t.default=function(){if("undefined"!==typeof self&&self.VTTCue)return self.VTTCue;var e=["","lr","rl"],t=["start","middle","end","left","right"];function r(e,t){if("string"!==typeof t)return!1;if(!Array.isArray(e))return!1;var r=t.toLowerCase();return!!~e.indexOf(r)&&r}function n(e){return r(t,e)}function i(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var o in a)e[o]=a[o]}return e}function a(t,a,o){var s=this,u={enumerable:!0};s.hasBeenReset=!1;var l="",c=!1,d=t,f=a,h=o,p=null,v="",g=!0,m="auto",y="start",E=50,b="middle",_=50,D="middle";Object.defineProperty(s,"id",i({},u,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},u,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(s,"startTime",i({},u,{get:function(){return d},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},u,{get:function(){return f},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},u,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},u,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},u,{get:function(){return v},set:function(t){var n=function(t){return r(e,t)}(t);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");v=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},u,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},u,{get:function(){return m},set:function(e){if("number"!==typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},u,{get:function(){return y},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},u,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},u,{get:function(){return b},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},u,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},u,{get:function(){return D},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");D=t,this.hasBeenReset=!0}})),s.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}()},"./src/utils/vttparser.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"parseTimeStamp",(function(){return a})),r.d(t,"fixLineBreaks",(function(){return d})),r.d(t,"VTTParser",(function(){return f}));var n=r("./src/utils/vttcue.ts"),i=function(){function e(){}return e.prototype.decode=function(e,t){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},e}();function a(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+parseFloat(n||0)}var r=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?t(r[2],r[3],0,r[4]):t(r[1],r[2],r[3],r[4]):null}var o=function(){function e(){this.values=Object.create(null)}var t=e.prototype;return t.set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},t.get=function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},t.has=function(e){return e in this.values},t.alt=function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},t.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},t.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){var r=parseFloat(t);if(r>=0&&r<=100)return this.set(e,r),!0}return!1},e}();function s(e,t,r,n){var i=n?e.split(n):[e];for(var a in i)if("string"===typeof i[a]){var o=i[a].split(r);2===o.length&&t(o[0],o[1])}}var u=new n.default(0,0,""),l="middle"===u.align?"middle":"center";function c(e,t,r){var n=e;function i(){var t=a(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function c(){e=e.replace(/^\s+/,"")}if(c(),t.startTime=i(),c(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),c(),t.endTime=i(),c(),function(e,t){var n=new o;s(e,(function(e,t){var i;switch(e){case"region":for(var a=r.length-1;a>=0;a--)if(r[a].id===t){n.set(e,r[a].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),n.integer(e,i[0]),n.percent(e,i[0])&&n.set("snapToLines",!1),n.alt(e,i[0],["auto"]),2===i.length&&n.alt("lineAlign",i[1],["start",l,"end"]);break;case"position":i=t.split(","),n.percent(e,i[0]),2===i.length&&n.alt("positionAlign",i[1],["start",l,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",l,"end","left","right"])}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&-1===u.line&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",l);var a=n.get("position","auto");"auto"===a&&50===u.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function d(e){return e.replace(/<br(?: \/)?>/gi,"\n")}var f=function(){function e(){this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var t=e.prototype;return t.parse=function(e){var t=this;function r(){var e=t.buffer,r=0;for(e=d(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var n=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),n}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(i=r()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var o=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:i=r(),t.state){case"HEADER":/:/.test(i)?s(i,(function(e,t){}),/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new n.default(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{c(i,t.cue,t.regionList)}catch(l){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var u=-1!==i.indexOf("--\x3e");if(!i||u&&(o=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID")}}}catch(l){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},t.flush=function(){var e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this},e}()},"./src/utils/webvtt-parser.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"generateCueId",(function(){return d})),r.d(t,"parseWebVTT",(function(){return f}));var n=r("./src/polyfills/number.ts"),i=r("./src/utils/vttparser.ts"),a=r("./src/demux/id3.ts"),o=r("./src/utils/timescale-conversion.ts"),s=r("./src/remux/mp4-remuxer.ts"),u=/\r\n|\n\r|\n|\r/g,l=function(e,t,r){return void 0===r&&(r=0),e.substr(r,t.length)===t},c=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()};function d(e,t,r){return c(e.toString())+c(t.toString())+c(r)}function f(e,t,r,c,f,h,p,v){var g,m=new i.VTTParser,y=Object(a.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(u,"\n").split("\n"),E=[],b=Object(o.toMpegTsClockFromTimescale)(t,r),_="00:00.000",D=0,S=0,w=!0,T=!1;m.oncue=function(e){var t=c[f],r=c.ccOffset,n=(D-b)/9e4;if(null!==t&&void 0!==t&&t.new&&(void 0!==S?r=c.ccOffset=t.start:function(e,t,r){var n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;null!==(a=i)&&void 0!==a&&a.new;){var a;e.ccOffset+=n.start-i.start,n.new=!1,i=e[(n=i).prevCC]}e.presentationOffset=r}(c,f,n)),n&&(r=n-c.presentationOffset),T){var i=e.endTime-e.startTime,a=Object(s.normalizePts)(9e4*(e.startTime+r-S),9e4*h)/9e4;e.startTime=a,e.endTime=a+i}var o=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(o)),e.id||(e.id=d(e.startTime,e.endTime,o)),e.endTime>0&&E.push(e)},m.onparsingerror=function(e){g=e},m.onflush=function(){g?v(g):p(E)},y.forEach((function(e){if(w){if(l(e,"X-TIMESTAMP-MAP=")){w=!1,T=!0,e.substr(16).split(",").forEach((function(e){l(e,"LOCAL:")?_=e.substr(6):l(e,"MPEGTS:")&&(D=parseInt(e.substr(7)))}));try{S=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),a=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!Object(n.isFiniteNumber)(t)||!Object(n.isFiniteNumber)(r)||!Object(n.isFiniteNumber)(i)||!Object(n.isFiniteNumber)(a))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*r,(t+=6e4*i)+36e5*a}(_)/1e3}catch(t){T=!1,g=t}return}""===e&&(w=!1)}m.parse(e+"\n")})),m.flush()}},"./src/utils/xhr-loader.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/utils/logger.ts"),i=r("./src/loader/load-stats.ts"),a=/^age:\s*[\d.]+\s*$/m,o=function(){function e(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e?e.xhrSetup:null,this.stats=new i.LoadStats,this.retryDelay=0}var t=e.prototype;return t.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},t.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},t.load=function(e,t,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=r,this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e=this.config,t=this.context;if(e){var r=this.loader=new self.XMLHttpRequest,n=this.stats;n.loading.first=0,n.loaded=0;var i=this.xhrSetup;try{if(i)try{i(r,t.url)}catch(s){r.open("GET",t.url,!0),i(r,t.url)}r.readyState||r.open("GET",t.url,!0);var a=this.context.headers;if(a)for(var o in a)r.setRequestHeader(o,a[o])}catch(s){return void this.callbacks.onError({code:r.status,text:s.message},t,r)}t.rangeEnd&&r.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),r.onreadystatechange=this.readystatechange.bind(this),r.onprogress=this.loadprogress.bind(this),r.responseType=t.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout),r.send()}},t.readystatechange=function(){var e=this.context,t=this.loader,r=this.stats;if(e&&t){var i=t.readyState,a=this.config;if(!r.aborted&&i>=2)if(self.clearTimeout(this.requestTimeout),0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start)),4===i){t.onreadystatechange=null,t.onprogress=null;var o=t.status;if(o>=200&&o<300){var s,u;if(r.loading.end=Math.max(self.performance.now(),r.loading.first),u="arraybuffer"===e.responseType?(s=t.response).byteLength:(s=t.responseText).length,r.loaded=r.total=u,!this.callbacks)return;var l=this.callbacks.onProgress;if(l&&l(r,e,s,t),!this.callbacks)return;var c={url:t.responseURL,data:s};this.callbacks.onSuccess(c,r,e,t)}else r.retry>=a.maxRetry||o>=400&&o<499?(n.logger.error(o+" while loading "+e.url),this.callbacks.onError({code:o,text:t.statusText},e,t)):(n.logger.warn(o+" while loading "+e.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout)}},t.loadtimeout=function(){n.logger.warn("timeout while loading "+this.context.url);var e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))},t.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},t.getCacheAge=function(){var e=null;if(this.loader&&a.test(this.loader.getAllResponseHeaders())){var t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e},e}();t.default=o}}).default},e.exports=t())},7861:function(e,t,r){"use strict";var n=r(6214),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return n.isMemo(e)?o:s[e.$$typeof]||i}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,r,n){if("string"!==typeof r){if(p){var i=h(r);i&&i!==p&&e(t,i,n)}var o=c(r);d&&(o=o.concat(d(r)));for(var s=u(t),v=u(r),g=0;g<o.length;++g){var m=o[g];if(!a[m]&&(!n||!n[m])&&(!v||!v[m])&&(!s||!s[m])){var y=f(r,m);try{l(t,m,y)}catch(E){}}}}return t}},7146:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},1692:function(e){e.exports=function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}var t=e((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),r=e((function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)})),n=(r.version,function(e){return"object"===typeof e?null!==e:"function"===typeof e}),i=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e},a=function(e){try{return!!e()}catch(t){return!0}},o=!a((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),s=t.document,u=n(s)&&n(s.createElement),l=function(e){return u?s.createElement(e):{}},c=!o&&!a((function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a})),d=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")},f=Object.defineProperty,h={f:o?Object.defineProperty:function(e,t,r){if(i(e),t=d(t,!0),i(r),c)try{return f(e,t,r)}catch(n){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},p=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},v=o?function(e,t,r){return h.f(e,t,p(1,r))}:function(e,t,r){return e[t]=r,e},g={}.hasOwnProperty,m=function(e,t){return g.call(e,t)},y=0,E=Math.random(),b=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++y+E).toString(36))},_=!1,D=e((function(e){var n="__core-js_shared__",i=t[n]||(t[n]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:_?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})})),S=D("native-function-to-string",Function.toString),w=e((function(e){var n=b("src"),i="toString",a=(""+S).split(i);r.inspectSource=function(e){return S.call(e)},(e.exports=function(e,r,i,o){var s="function"==typeof i;s&&(m(i,"name")||v(i,"name",r)),e[r]!==i&&(s&&(m(i,n)||v(i,n,e[r]?""+e[r]:a.join(String(r)))),e===t?e[r]=i:o?e[r]?e[r]=i:v(e,r,i):(delete e[r],v(e,r,i)))})(Function.prototype,i,(function(){return"function"==typeof this&&this[n]||S.call(this)}))})),T=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},C=function(e,t,r){if(T(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},A="prototype",x=function e(n,i,a){var o,s,u,l,c=n&e.F,d=n&e.G,f=n&e.P,h=n&e.B,p=d?t:n&e.S?t[i]||(t[i]={}):(t[i]||{})[A],g=d?r:r[i]||(r[i]={}),m=g[A]||(g[A]={});for(o in d&&(a=i),a)u=((s=!c&&p&&void 0!==p[o])?p:a)[o],l=h&&s?C(u,t):f&&"function"==typeof u?C(Function.call,u):u,p&&w(p,o,u,n&e.U),g[o]!=u&&v(g,o,l),f&&m[o]!=u&&(m[o]=u)};t.core=r,x.F=1,x.G=2,x.S=4,x.P=8,x.B=16,x.W=32,x.U=64,x.R=128;var k=x,L=Math.ceil,F=Math.floor,R=function(e){return isNaN(e=+e)?0:(e>0?F:L)(e)},I=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},O=function(e){return function(t,r){var n,i,a=String(I(t)),o=R(r),s=a.length;return o<0||o>=s?e?"":void 0:(n=a.charCodeAt(o))<55296||n>56319||o+1===s||(i=a.charCodeAt(o+1))<56320||i>57343?e?a.charAt(o):n:e?a.slice(o,o+2):i-56320+(n-55296<<10)+65536}},P=O(!1);k(k.P,"String",{codePointAt:function(e){return P(this,e)}}),r.String.codePointAt;var M=Math.max,B=Math.min,N=function(e,t){return(e=R(e))<0?M(e+t,0):B(e,t)},U=String.fromCharCode,j=String.fromCodePoint;k(k.S+k.F*(!!j&&1!=j.length),"String",{fromCodePoint:function(e){for(var t,r=arguments,n=[],i=arguments.length,a=0;i>a;){if(t=+r[a++],N(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?U(t):U(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}}),r.String.fromCodePoint;var H,G,K,z,V,W,q,Z,Y,$,X,Q,J,ee,te={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},re={isSpaceSeparator:function(e){return"string"===typeof e&&te.Space_Separator.test(e)},isIdStartChar:function(e){return"string"===typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||te.ID_Start.test(e))},isIdContinueChar:function(e){return"string"===typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||"\u200c"===e||"\u200d"===e||te.ID_Continue.test(e))},isDigit:function(e){return"string"===typeof e&&/[0-9]/.test(e)},isHexDigit:function(e){return"string"===typeof e&&/[0-9A-Fa-f]/.test(e)}},ne=function(e,t){H=String(e),G="start",K=[],z=0,V=1,W=0,q=void 0,Z=void 0,Y=void 0;do{q=ae(),pe[G]()}while("eof"!==q.type);return"function"===typeof t?ie({"":Y},"",t):Y};function ie(e,t,r){var n=e[t];if(null!=n&&"object"===typeof n)for(var i in n){var a=ie(n,i,r);void 0===a?delete n[i]:n[i]=a}return r.call(e,t,n)}function ae(){for($="default",X="",Q=!1,J=1;;){ee=oe();var e=ue[$]();if(e)return e}}function oe(){if(H[z])return String.fromCodePoint(H.codePointAt(z))}function se(){var e=oe();return"\n"===e?(V++,W=0):e?W+=e.length:W++,e&&(z+=e.length),e}var ue={default:function(){switch(ee){case"\t":case"\v":case"\f":case" ":case"\xa0":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void se();case"/":return se(),void($="comment");case void 0:return se(),le("eof")}if(!re.isSpaceSeparator(ee))return ue[G]();se()},comment:function(){switch(ee){case"*":return se(),void($="multiLineComment");case"/":return se(),void($="singleLineComment")}throw me(se())},multiLineComment:function(){switch(ee){case"*":return se(),void($="multiLineCommentAsterisk");case void 0:throw me(se())}se()},multiLineCommentAsterisk:function(){switch(ee){case"*":return void se();case"/":return se(),void($="default");case void 0:throw me(se())}se(),$="multiLineComment"},singleLineComment:function(){switch(ee){case"\n":case"\r":case"\u2028":case"\u2029":return se(),void($="default");case void 0:return se(),le("eof")}se()},value:function(){switch(ee){case"{":case"[":return le("punctuator",se());case"n":return se(),ce("ull"),le("null",null);case"t":return se(),ce("rue"),le("boolean",!0);case"f":return se(),ce("alse"),le("boolean",!1);case"-":case"+":return"-"===se()&&(J=-1),void($="sign");case".":return X=se(),void($="decimalPointLeading");case"0":return X=se(),void($="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return X=se(),void($="decimalInteger");case"I":return se(),ce("nfinity"),le("numeric",1/0);case"N":return se(),ce("aN"),le("numeric",NaN);case'"':case"'":return Q='"'===se(),X="",void($="string")}throw me(se())},identifierNameStartEscape:function(){if("u"!==ee)throw me(se());se();var e=he();switch(e){case"$":case"_":break;default:if(!re.isIdStartChar(e))throw Ee()}X+=e,$="identifierName"},identifierName:function(){switch(ee){case"$":case"_":case"\u200c":case"\u200d":return void(X+=se());case"\\":return se(),void($="identifierNameEscape")}if(!re.isIdContinueChar(ee))return le("identifier",X);X+=se()},identifierNameEscape:function(){if("u"!==ee)throw me(se());se();var e=he();switch(e){case"$":case"_":case"\u200c":case"\u200d":break;default:if(!re.isIdContinueChar(e))throw Ee()}X+=e,$="identifierName"},sign:function(){switch(ee){case".":return X=se(),void($="decimalPointLeading");case"0":return X=se(),void($="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return X=se(),void($="decimalInteger");case"I":return se(),ce("nfinity"),le("numeric",J*(1/0));case"N":return se(),ce("aN"),le("numeric",NaN)}throw me(se())},zero:function(){switch(ee){case".":return X+=se(),void($="decimalPoint");case"e":case"E":return X+=se(),void($="decimalExponent");case"x":case"X":return X+=se(),void($="hexadecimal")}return le("numeric",0*J)},decimalInteger:function(){switch(ee){case".":return X+=se(),void($="decimalPoint");case"e":case"E":return X+=se(),void($="decimalExponent")}if(!re.isDigit(ee))return le("numeric",J*Number(X));X+=se()},decimalPointLeading:function(){if(re.isDigit(ee))return X+=se(),void($="decimalFraction");throw me(se())},decimalPoint:function(){switch(ee){case"e":case"E":return X+=se(),void($="decimalExponent")}return re.isDigit(ee)?(X+=se(),void($="decimalFraction")):le("numeric",J*Number(X))},decimalFraction:function(){switch(ee){case"e":case"E":return X+=se(),void($="decimalExponent")}if(!re.isDigit(ee))return le("numeric",J*Number(X));X+=se()},decimalExponent:function(){switch(ee){case"+":case"-":return X+=se(),void($="decimalExponentSign")}if(re.isDigit(ee))return X+=se(),void($="decimalExponentInteger");throw me(se())},decimalExponentSign:function(){if(re.isDigit(ee))return X+=se(),void($="decimalExponentInteger");throw me(se())},decimalExponentInteger:function(){if(!re.isDigit(ee))return le("numeric",J*Number(X));X+=se()},hexadecimal:function(){if(re.isHexDigit(ee))return X+=se(),void($="hexadecimalInteger");throw me(se())},hexadecimalInteger:function(){if(!re.isHexDigit(ee))return le("numeric",J*Number(X));X+=se()},string:function(){switch(ee){case"\\":return se(),void(X+=de());case'"':return Q?(se(),le("string",X)):void(X+=se());case"'":return Q?void(X+=se()):(se(),le("string",X));case"\n":case"\r":throw me(se());case"\u2028":case"\u2029":be(ee);break;case void 0:throw me(se())}X+=se()},start:function(){switch(ee){case"{":case"[":return le("punctuator",se())}$="value"},beforePropertyName:function(){switch(ee){case"$":case"_":return X=se(),void($="identifierName");case"\\":return se(),void($="identifierNameStartEscape");case"}":return le("punctuator",se());case'"':case"'":return Q='"'===se(),void($="string")}if(re.isIdStartChar(ee))return X+=se(),void($="identifierName");throw me(se())},afterPropertyName:function(){if(":"===ee)return le("punctuator",se());throw me(se())},beforePropertyValue:function(){$="value"},afterPropertyValue:function(){switch(ee){case",":case"}":return le("punctuator",se())}throw me(se())},beforeArrayValue:function(){if("]"===ee)return le("punctuator",se());$="value"},afterArrayValue:function(){switch(ee){case",":case"]":return le("punctuator",se())}throw me(se())},end:function(){throw me(se())}};function le(e,t){return{type:e,value:t,line:V,column:W}}function ce(e){for(var t=0,r=e;t<r.length;t+=1){var n=r[t];if(oe()!==n)throw me(se());se()}}function de(){switch(oe()){case"b":return se(),"\b";case"f":return se(),"\f";case"n":return se(),"\n";case"r":return se(),"\r";case"t":return se(),"\t";case"v":return se(),"\v";case"0":if(se(),re.isDigit(oe()))throw me(se());return"\0";case"x":return se(),fe();case"u":return se(),he();case"\n":case"\u2028":case"\u2029":return se(),"";case"\r":return se(),"\n"===oe()&&se(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw me(se())}return se()}function fe(){var e="",t=oe();if(!re.isHexDigit(t))throw me(se());if(e+=se(),t=oe(),!re.isHexDigit(t))throw me(se());return e+=se(),String.fromCodePoint(parseInt(e,16))}function he(){for(var e="",t=4;t-- >0;){var r=oe();if(!re.isHexDigit(r))throw me(se());e+=se()}return String.fromCodePoint(parseInt(e,16))}var pe={start:function(){if("eof"===q.type)throw ye();ve()},beforePropertyName:function(){switch(q.type){case"identifier":case"string":return Z=q.value,void(G="afterPropertyName");case"punctuator":return void ge();case"eof":throw ye()}},afterPropertyName:function(){if("eof"===q.type)throw ye();G="beforePropertyValue"},beforePropertyValue:function(){if("eof"===q.type)throw ye();ve()},beforeArrayValue:function(){if("eof"===q.type)throw ye();"punctuator"!==q.type||"]"!==q.value?ve():ge()},afterPropertyValue:function(){if("eof"===q.type)throw ye();switch(q.value){case",":return void(G="beforePropertyName");case"}":ge()}},afterArrayValue:function(){if("eof"===q.type)throw ye();switch(q.value){case",":return void(G="beforeArrayValue");case"]":ge()}},end:function(){}};function ve(){var e;switch(q.type){case"punctuator":switch(q.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=q.value}if(void 0===Y)Y=e;else{var t=K[K.length-1];Array.isArray(t)?t.push(e):t[Z]=e}if(null!==e&&"object"===typeof e)K.push(e),G=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{var r=K[K.length-1];G=null==r?"end":Array.isArray(r)?"afterArrayValue":"afterPropertyValue"}}function ge(){K.pop();var e=K[K.length-1];G=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}function me(e){return De(void 0===e?"JSON5: invalid end of input at "+V+":"+W:"JSON5: invalid character '"+_e(e)+"' at "+V+":"+W)}function ye(){return De("JSON5: invalid end of input at "+V+":"+W)}function Ee(){return De("JSON5: invalid identifier character at "+V+":"+(W-=5))}function be(e){console.warn("JSON5: '"+_e(e)+"' in strings is not valid ECMAScript; consider escaping")}function _e(e){var t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){var r=e.charCodeAt(0).toString(16);return"\\x"+("00"+r).substring(r.length)}return e}function De(e){var t=new SyntaxError(e);return t.lineNumber=V,t.columnNumber=W,t}var Se=function(e,t,r){var n,i,a,o=[],s="",u="";if(null==t||"object"!==typeof t||Array.isArray(t)||(r=t.space,a=t.quote,t=t.replacer),"function"===typeof t)i=t;else if(Array.isArray(t)){n=[];for(var l=0,c=t;l<c.length;l+=1){var d=c[l],f=void 0;"string"===typeof d?f=d:("number"===typeof d||d instanceof String||d instanceof Number)&&(f=String(d)),void 0!==f&&n.indexOf(f)<0&&n.push(f)}}return r instanceof Number?r=Number(r):r instanceof String&&(r=String(r)),"number"===typeof r?r>0&&(r=Math.min(10,Math.floor(r)),u="          ".substr(0,r)):"string"===typeof r&&(u=r.substr(0,10)),h("",{"":e});function h(e,t){var r=t[e];switch(null!=r&&("function"===typeof r.toJSON5?r=r.toJSON5(e):"function"===typeof r.toJSON&&(r=r.toJSON(e))),i&&(r=i.call(t,e,r)),r instanceof Number?r=Number(r):r instanceof String?r=String(r):r instanceof Boolean&&(r=r.valueOf()),r){case null:return"null";case!0:return"true";case!1:return"false"}return"string"===typeof r?p(r,!1):"number"===typeof r?String(r):"object"===typeof r?Array.isArray(r)?m(r):v(r):void 0}function p(e){for(var t={"'":.1,'"':.2},r={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},n="",i=0;i<e.length;i++){var o=e[i];switch(o){case"'":case'"':t[o]++,n+=o;continue;case"\0":if(re.isDigit(e[i+1])){n+="\\x00";continue}}if(r[o])n+=r[o];else if(o<" "){var s=o.charCodeAt(0).toString(16);n+="\\x"+("00"+s).substring(s.length)}else n+=o}var u=a||Object.keys(t).reduce((function(e,r){return t[e]<t[r]?e:r}));return u+(n=n.replace(new RegExp(u,"g"),r[u]))+u}function v(e){if(o.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");o.push(e);var t=s;s+=u;for(var r,i,a=[],l=0,c=n||Object.keys(e);l<c.length;l+=1){var d=c[l],f=h(d,e);if(void 0!==f){var p=g(d)+":";""!==u&&(p+=" "),p+=f,a.push(p)}}if(0===a.length)r="{}";else if(""===u)r="{"+(i=a.join(","))+"}";else{var v=",\n"+s;i=a.join(v),r="{\n"+s+i+",\n"+t+"}"}return o.pop(),s=t,r}function g(e){if(0===e.length)return p(e,!0);var t=String.fromCodePoint(e.codePointAt(0));if(!re.isIdStartChar(t))return p(e,!0);for(var r=t.length;r<e.length;r++)if(!re.isIdContinueChar(String.fromCodePoint(e.codePointAt(r))))return p(e,!0);return e}function m(e){if(o.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");o.push(e);var t=s;s+=u;for(var r,n=[],i=0;i<e.length;i++){var a=h(String(i),e);n.push(void 0!==a?a:"null")}if(0===n.length)r="[]";else if(""===u)r="["+n.join(",")+"]";else{var l=",\n"+s,c=n.join(l);r="[\n"+s+c+",\n"+t+"]"}return o.pop(),s=t,r}};return{parse:ne,stringify:Se}}()},1843:function(e){"use strict";var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))r.call(o,c)&&(u[c]=o[c]);if(t){s=t(o);for(var d=0;d<s.length;d++)n.call(o,s[d])&&(u[s[d]]=o[s[d]])}}return u}},4883:function(e,t,r){var n=r(7146);e.exports=h,e.exports.parse=a,e.exports.compile=function(e,t){return s(a(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var r,n=[],a=0,o=0,s="",c=t&&t.delimiter||"/";null!=(r=i.exec(e));){var d=r[0],f=r[1],h=r.index;if(s+=e.slice(o,h),o=h+d.length,f)s+=f[1];else{var p=e[o],v=r[2],g=r[3],m=r[4],y=r[5],E=r[6],b=r[7];s&&(n.push(s),s="");var _=null!=v&&null!=p&&p!==v,D="+"===E||"*"===E,S="?"===E||"*"===E,w=r[2]||c,T=m||y;n.push({name:g||a++,prefix:v||"",delimiter:w,optional:S,repeat:D,partial:_,asterisk:!!b,pattern:T?l(T):b?".*":"[^"+u(w)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&n.push(s),n}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var r=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(r[i]=new RegExp("^(?:"+e[i].pattern+")$",d(t)));return function(t,i){for(var a="",s=t||{},u=(i||{}).pretty?o:encodeURIComponent,l=0;l<e.length;l++){var c=e[l];if("string"!==typeof c){var d,f=s[c.name];if(null==f){if(c.optional){c.partial&&(a+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(n(f)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var h=0;h<f.length;h++){if(d=u(f[h]),!r[l].test(d))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(d)+"`");a+=(0===h?c.prefix:c.delimiter)+d}}else{if(d=c.asterisk?encodeURI(f).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(f),!r[l].test(d))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+d+'"');a+=c.prefix+d}}else a+=c}return a}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function f(e,t,r){n(t)||(r=t||r,t=[]);for(var i=(r=r||{}).strict,a=!1!==r.end,o="",s=0;s<e.length;s++){var l=e[s];if("string"===typeof l)o+=u(l);else{var f=u(l.prefix),h="(?:"+l.pattern+")";t.push(l),l.repeat&&(h+="(?:"+f+h+")*"),o+=h=l.optional?l.partial?f+"("+h+")?":"(?:"+f+"("+h+"))?":f+"("+h+")"}}var p=u(r.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",c(new RegExp("^"+o,d(r)),t)}function h(e,t,r){return n(t)||(r=t||r,t=[]),r=r||{},e instanceof RegExp?function(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}(e,t):n(e)?function(e,t,r){for(var n=[],i=0;i<e.length;i++)n.push(h(e[i],t,r).source);return c(new RegExp("(?:"+n.join("|")+")",d(r)),t)}(e,t,r):function(e,t,r){return f(a(e,r),t,r)}(e,t,r)}},1729:function(e,t,r){"use strict";var n=r(9165);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,a,o){if(o!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return r.PropTypes=r,r}},5192:function(e,t,r){e.exports=r(1729)()},9165:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},534:function(e,t,r){"use strict";var n=r(7313),i=r(1843),a=r(2224);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error(o(227));var s=new Set,u={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h=Object.prototype.hasOwnProperty,p={},v={};function g(e,t,r,n,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function E(e){return e[1].toUpperCase()}function b(e,t,r,n){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!h.call(v,e)||!h.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,E);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,E);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,E);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=60103,S=60106,w=60107,T=60108,C=60114,A=60109,x=60110,k=60112,L=60113,F=60120,R=60115,I=60116,O=60121,P=60128,M=60129,B=60130,N=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;D=U("react.element"),S=U("react.portal"),w=U("react.fragment"),T=U("react.strict_mode"),C=U("react.profiler"),A=U("react.provider"),x=U("react.context"),k=U("react.forward_ref"),L=U("react.suspense"),F=U("react.suspense_list"),R=U("react.memo"),I=U("react.lazy"),O=U("react.block"),U("react.scope"),P=U("react.opaque.id"),M=U("react.debug_trace_mode"),B=U("react.offscreen"),N=U("react.legacy_hidden")}var j,H="function"===typeof Symbol&&Symbol.iterator;function G(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=H&&e[H]||e["@@iterator"])?e:null}function K(e){if(void 0===j)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var z=!1;function V(e,t){if(!e||z)return"";z=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=n.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?K(e):""}function W(e){switch(e.tag){case 5:return K(e.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 22:return e=V(e.type._render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case S:return"Portal";case C:return"Profiler";case T:return"StrictMode";case L:return"Suspense";case F:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return q(e.type);case O:return q(e._render);case I:t=e._payload,e=e._init;try{return q(e(t))}catch(r){}}return null}function Z(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Y(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var r=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function ee(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=Z(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function re(e,t){te(e,t);var r=Z(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,r):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ne(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ie(e,t,r){"number"===t&&Q(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return n.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Z(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(o(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(o(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:Z(r)}}function le(e,t){var r=Z(t.value),n=Z(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ge,me=(ge=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function ye(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var Ee={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function _e(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||Ee.hasOwnProperty(e)&&Ee[e]?(""+t).trim():t+"px"}function De(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=_e(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(Ee).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ee[t]=Ee[e]}))}));var Se=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function we(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ce(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ae=null,xe=null,ke=null;function Le(e){if(e=ni(e)){if("function"!==typeof Ae)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Ae(e.stateNode,e.type,t))}}function Fe(e){xe?ke?ke.push(e):ke=[e]:xe=e}function Re(){if(xe){var e=xe,t=ke;if(ke=xe=null,Le(e),t)for(e=0;e<t.length;e++)Le(t[e])}}function Ie(e,t){return e(t)}function Oe(e,t,r,n,i){return e(t,r,n,i)}function Pe(){}var Me=Ie,Be=!1,Ne=!1;function Ue(){null===xe&&null===ke||(Pe(),Re())}function je(e,t){var r=e.stateNode;if(null===r)return null;var n=ai(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(o(231,t,typeof r));return r}var He=!1;if(d)try{var Ge={};Object.defineProperty(Ge,"passive",{get:function(){He=!0}}),window.addEventListener("test",Ge,Ge),window.removeEventListener("test",Ge,Ge)}catch(ge){He=!1}function Ke(e,t,r,n,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(r,l)}catch(c){this.onError(c)}}var ze=!1,Ve=null,We=!1,qe=null,Ze={onError:function(e){ze=!0,Ve=e}};function Ye(e,t,r,n,i,a,o,s,u){ze=!1,Ve=null,Ke.apply(Ze,arguments)}function $e(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if($e(e)!==e)throw Error(o(188))}function Je(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(n=i.return)){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Qe(i),e;if(a===n)return Qe(i),t;a=a.sibling}throw Error(o(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,u=i.child;u;){if(u===r){s=!0,r=i,n=a;break}if(u===n){s=!0,n=i,r=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===r){s=!0,r=a,n=i;break}if(u===n){s=!0,n=a,r=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var r=e.alternate;null!==t;){if(t===e||t===r)return!0;t=t.return}return!1}var tt,rt,nt,it,at=!1,ot=[],st=null,ut=null,lt=null,ct=new Map,dt=new Map,ft=[],ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,r,n,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|r,nativeEvent:i,targetContainers:[n]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function gt(e,t,r,n,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,r,n,i,a),null!==t&&(null!==(t=ni(t))&&rt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ri(e.target);if(null!==t){var r=$e(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Xe(r)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){nt(r)}))}))}else if(3===t&&r.stateNode.hydrate)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ni(r))&&rt(t),e.blockedOn=r,!1;t.shift()}return!0}function Et(e,t,r){yt(e)&&r.delete(t)}function bt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r){e.blockedOn=r;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&yt(st)&&(st=null),null!==ut&&yt(ut)&&(ut=null),null!==lt&&yt(lt)&&(lt=null),ct.forEach(Et),dt.forEach(Et)}function _t(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,bt)))}function Dt(e){function t(t){return _t(t,e)}if(0<ot.length){_t(ot[0],e);for(var r=1;r<ot.length;r++){var n=ot[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==st&&_t(st,e),null!==ut&&_t(ut,e),null!==lt&&_t(lt,e),ct.forEach(t),dt.forEach(t),r=0;r<ft.length;r++)(n=ft[r]).blockedOn===e&&(n.blockedOn=null);for(;0<ft.length&&null===(r=ft[0]).blockedOn;)mt(r),null===r.blockedOn&&ft.shift()}function St(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var wt={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},Tt={},Ct={};function At(e){if(Tt[e])return Tt[e];if(!wt[e])return e;var t,r=wt[e];for(t in r)if(r.hasOwnProperty(t)&&t in Ct)return Tt[e]=r[t];return e}d&&(Ct=document.createElement("div").style,"AnimationEvent"in window||(delete wt.animationend.animation,delete wt.animationiteration.animation,delete wt.animationstart.animation),"TransitionEvent"in window||delete wt.transitionend.transition);var xt=At("animationend"),kt=At("animationiteration"),Lt=At("animationstart"),Ft=At("transitionend"),Rt=new Map,It=new Map,Ot=["abort","abort",xt,"animationEnd",kt,"animationIteration",Lt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ft,"transitionEnd","waiting","waiting"];function Pt(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),It.set(n,t),Rt.set(n,i),l(i,[n])}}(0,a.unstable_now)();var Mt=8;function Bt(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Nt(e,t){var r=e.pendingLanes;if(0===r)return Mt=0;var n=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)n=a,i=Mt=15;else if(0!==(a=134217727&r)){var u=a&~o;0!==u?(n=Bt(u),i=Mt):0!==(s&=a)&&(n=Bt(s),i=Mt)}else 0!==(a=r&~o)?(n=Bt(a),i=Mt):0!==s&&(n=Bt(s),i=Mt);if(0===n)return 0;if(n=r&((0>(n=31-zt(n))?0:1<<n)<<1)-1,0!==t&&t!==n&&0===(t&o)){if(Bt(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-zt(t)),n|=e[r],t&=~i;return n}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ht(24&~t))?jt(10,t):e;case 10:return 0===(e=Ht(192&~t))?jt(8,t):e;case 8:return 0===(e=Ht(3584&~t))&&(0===(e=Ht(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ht(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Ht(e){return e&-e}function Gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Kt(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,(e=e.eventTimes)[t=31-zt(t)]=r}var zt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Vt(e)/Wt|0)|0},Vt=Math.log,Wt=Math.LN2;var qt=a.unstable_UserBlockingPriority,Zt=a.unstable_runWithPriority,Yt=!0;function $t(e,t,r,n){Be||Pe();var i=Qt,a=Be;Be=!0;try{Oe(i,e,t,r,n)}finally{(Be=a)||Ue()}}function Xt(e,t,r,n){Zt(qt,Qt.bind(null,e,t,r,n))}function Qt(e,t,r,n){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<ht.indexOf(e))e=pt(null,e,t,r,n),ot.push(e);else{var a=Jt(e,t,r,n);if(null===a)i&&vt(e,n);else{if(i){if(-1<ht.indexOf(e))return e=pt(a,e,t,r,n),void ot.push(e);if(function(e,t,r,n,i){switch(t){case"focusin":return st=gt(st,e,t,r,n,i),!0;case"dragenter":return ut=gt(ut,e,t,r,n,i),!0;case"mouseover":return lt=gt(lt,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return ct.set(a,gt(ct.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,dt.set(a,gt(dt.get(a)||null,e,t,r,n,i)),!0}return!1}(a,e,t,r,n))return;vt(e,n)}Pn(e,t,n,null,r)}}}function Jt(e,t,r,n){var i=Ce(n);if(null!==(i=ri(i))){var a=$e(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Pn(e,t,n,i,r),null}var er=null,tr=null,rr=null;function nr(){if(rr)return rr;var e,t,r=tr,n=r.length,i="value"in er?er.value:er.textContent,a=i.length;for(e=0;e<n&&r[e]===i[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===i[a-t];t++);return rr=i.slice(e,1<t?1-t:void 0)}function ir(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ar(){return!0}function or(){return!1}function sr(e){function t(t,r,n,i,a){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?ar:or,this.isPropagationStopped=or,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),t}var ur,lr,cr,dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fr=sr(dr),hr=i({},dr,{view:0,detail:0}),pr=sr(hr),vr=i({},hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ar,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cr&&(cr&&"mousemove"===e.type?(ur=e.screenX-cr.screenX,lr=e.screenY-cr.screenY):lr=ur=0,cr=e),ur)},movementY:function(e){return"movementY"in e?e.movementY:lr}}),gr=sr(vr),mr=sr(i({},vr,{dataTransfer:0})),yr=sr(i({},hr,{relatedTarget:0})),Er=sr(i({},dr,{animationName:0,elapsedTime:0,pseudoElement:0})),br=i({},dr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_r=sr(br),Dr=sr(i({},dr,{data:0})),Sr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tr[e])&&!!t[e]}function Ar(){return Cr}var xr=i({},hr,{key:function(e){if(e.key){var t=Sr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ir(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ar,charCode:function(e){return"keypress"===e.type?ir(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ir(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kr=sr(xr),Lr=sr(i({},vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Fr=sr(i({},hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ar})),Rr=sr(i({},dr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ir=i({},vr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Or=sr(Ir),Pr=[9,13,27,32],Mr=d&&"CompositionEvent"in window,Br=null;d&&"documentMode"in document&&(Br=document.documentMode);var Nr=d&&"TextEvent"in window&&!Br,Ur=d&&(!Mr||Br&&8<Br&&11>=Br),jr=String.fromCharCode(32),Hr=!1;function Gr(e,t){switch(e){case"keyup":return-1!==Pr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zr=!1;var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vr[e.type]:"textarea"===t}function qr(e,t,r,n){Fe(n),0<(t=Bn(t,"onChange")).length&&(r=new fr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Zr=null,Yr=null;function $r(e){kn(e,0)}function Xr(e){if(X(ii(e)))return e}function Qr(e,t){if("change"===e)return t}var Jr=!1;if(d){var en;if(d){var tn="oninput"in document;if(!tn){var rn=document.createElement("div");rn.setAttribute("oninput","return;"),tn="function"===typeof rn.oninput}en=tn}else en=!1;Jr=en&&(!document.documentMode||9<document.documentMode)}function nn(){Zr&&(Zr.detachEvent("onpropertychange",an),Yr=Zr=null)}function an(e){if("value"===e.propertyName&&Xr(Yr)){var t=[];if(qr(t,Yr,e,Ce(e)),e=$r,Be)e(t);else{Be=!0;try{Ie(e,t)}finally{Be=!1,Ue()}}}}function on(e,t,r){"focusin"===e?(nn(),Yr=r,(Zr=t).attachEvent("onpropertychange",an)):"focusout"===e&&nn()}function sn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xr(Yr)}function un(e,t){if("click"===e)return Xr(t)}function ln(e,t){if("input"===e||"change"===e)return Xr(t)}var cn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},dn=Object.prototype.hasOwnProperty;function fn(e,t){if(cn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!dn.call(t,r[n])||!cn(e[r[n]],t[r[n]]))return!1;return!0}function hn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pn(e,t){var r,n=hn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hn(n)}}function vn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gn(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Q((e=t.contentWindow).document)}return t}function mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yn=d&&"documentMode"in document&&11>=document.documentMode,En=null,bn=null,_n=null,Dn=!1;function Sn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;Dn||null==En||En!==Q(n)||("selectionStart"in(n=En)&&mn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},_n&&fn(_n,n)||(_n=n,0<(n=Bn(bn,"onSelect")).length&&(t=new fr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=En)))}Pt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Pt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Pt(Ot,2);for(var wn="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Tn=0;Tn<wn.length;Tn++)It.set(wn[Tn],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),An=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cn));function xn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,a,s,u,l){if(Ye.apply(this,arguments),ze){if(!ze)throw Error(o(198));var c=Ve;ze=!1,Ve=null,We||(We=!0,qe=c)}}(n,t,void 0,e),e.currentTarget=null}function kn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;xn(i,s,l),a=u}else for(o=0;o<n.length;o++){if(u=(s=n[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;xn(i,s,l),a=u}}}if(We)throw e=qe,We=!1,qe=null,e}function Ln(e,t){var r=oi(t),n=e+"__bubble";r.has(n)||(On(t,e,2,!1),r.add(n))}var Fn="_reactListening"+Math.random().toString(36).slice(2);function Rn(e){e[Fn]||(e[Fn]=!0,s.forEach((function(t){An.has(t)||In(t,!1,e,null),In(t,!0,e,null)})))}function In(e,t,r,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=r;if("selectionchange"===e&&9!==r.nodeType&&(a=r.ownerDocument),null!==n&&!t&&An.has(e)){if("scroll"!==e)return;i|=2,a=n}var o=oi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),On(a,e,i,t),o.add(s))}function On(e,t,r,n){var i=It.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Xt;break;default:i=Qt}r=i.bind(null,t,r,e),i=void 0,!He||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Pn(e,t,r,n,i){var a=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var s=n.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=n.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ri(s)))return;if(5===(u=o.tag)||6===u){n=a=o;continue e}s=s.parentNode}}n=n.return}!function(e,t,r){if(Ne)return e(t,r);Ne=!0;try{Me(e,t,r)}finally{Ne=!1,Ue()}}((function(){var n=a,i=Ce(r),o=[];e:{var s=Rt.get(e);if(void 0!==s){var u=fr,l=e;switch(e){case"keypress":if(0===ir(r))break e;case"keydown":case"keyup":u=kr;break;case"focusin":l="focus",u=yr;break;case"focusout":l="blur",u=yr;break;case"beforeblur":case"afterblur":u=yr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Fr;break;case xt:case kt:case Lt:u=Er;break;case Ft:u=Rr;break;case"scroll":u=pr;break;case"wheel":u=Or;break;case"copy":case"cut":case"paste":u=_r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Lr}var c=0!==(4&t),d=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=n;null!==p;){var v=(h=p).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==f&&(null!=(v=je(p,f))&&c.push(Mn(p,v,h)))),d)break;p=p.return}0<c.length&&(s=new u(s,l,null,r,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(l=r.relatedTarget||r.fromElement)||!ri(l)&&!l[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=n,null!==(l=(l=r.relatedTarget||r.toElement)?ri(l):null)&&(l!==(d=$e(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=n),u!==l)){if(c=gr,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Lr,v="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==u?s:ii(u),h=null==l?s:ii(l),(s=new c(v,p+"leave",u,r,i)).target=d,s.relatedTarget=h,v=null,ri(i)===n&&((c=new c(f,p+"enter",l,r,i)).target=h,c.relatedTarget=d,v=c),d=v,u&&l)e:{for(f=l,p=0,h=c=u;h;h=Nn(h))p++;for(h=0,v=f;v;v=Nn(v))h++;for(;0<p-h;)c=Nn(c),p--;for(;0<h-p;)f=Nn(f),h--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Nn(c),f=Nn(f)}c=null}else c=null;null!==u&&Un(o,s,u,c,!1),null!==l&&null!==d&&Un(o,d,l,c,!0)}if("select"===(u=(s=n?ii(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Qr;else if(Wr(s))if(Jr)g=ln;else{g=sn;var m=on}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=un);switch(g&&(g=g(e,n))?qr(o,g,r,i):(m&&m(e,s,n),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ie(s,"number",s.value)),m=n?ii(n):window,e){case"focusin":(Wr(m)||"true"===m.contentEditable)&&(En=m,bn=n,_n=null);break;case"focusout":_n=bn=En=null;break;case"mousedown":Dn=!0;break;case"contextmenu":case"mouseup":case"dragend":Dn=!1,Sn(o,r,i);break;case"selectionchange":if(yn)break;case"keydown":case"keyup":Sn(o,r,i)}var y;if(Mr)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else zr?Gr(e,r)&&(E="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(E="onCompositionStart");E&&(Ur&&"ko"!==r.locale&&(zr||"onCompositionStart"!==E?"onCompositionEnd"===E&&zr&&(y=nr()):(tr="value"in(er=i)?er.value:er.textContent,zr=!0)),0<(m=Bn(n,E)).length&&(E=new Dr(E,e,null,r,i),o.push({event:E,listeners:m}),y?E.data=y:null!==(y=Kr(r))&&(E.data=y))),(y=Nr?function(e,t){switch(e){case"compositionend":return Kr(t);case"keypress":return 32!==t.which?null:(Hr=!0,jr);case"textInput":return(e=t.data)===jr&&Hr?null:e;default:return null}}(e,r):function(e,t){if(zr)return"compositionend"===e||!Mr&&Gr(e,t)?(e=nr(),rr=tr=er=null,zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ur&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Bn(n,"onBeforeInput")).length&&(i=new Dr("onBeforeInput","beforeinput",null,r,i),o.push({event:i,listeners:n}),i.data=y))}kn(o,t)}))}function Mn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Bn(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=je(e,r))&&n.unshift(Mn(e,a,i)),null!=(a=je(e,t))&&n.push(Mn(e,a,i))),e=e.return}return n}function Nn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Un(e,t,r,n,i){for(var a=t._reactName,o=[];null!==r&&r!==n;){var s=r,u=s.alternate,l=s.stateNode;if(null!==u&&u===n)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=je(r,a))&&o.unshift(Mn(r,u,s)):i||null!=(u=je(r,a))&&o.push(Mn(r,u,s))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}function jn(){}var Hn=null,Gn=null;function Kn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function zn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Vn="function"===typeof setTimeout?setTimeout:void 0,Wn="function"===typeof clearTimeout?clearTimeout:void 0;function qn(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Zn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var $n=0;var Xn=Math.random().toString(36).slice(2),Qn="__reactFiber$"+Xn,Jn="__reactProps$"+Xn,ei="__reactContainer$"+Xn,ti="__reactEvents$"+Xn;function ri(e){var t=e[Qn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ei]||r[Qn]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=Yn(e);null!==e;){if(r=e[Qn])return r;e=Yn(e)}return t}r=(e=r).parentNode}return null}function ni(e){return!(e=e[Qn]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Jn]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function li(e){return{current:e}}function ci(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function di(e,t){ui++,si[ui]=e.current,e.current=t}var fi={},hi=li(fi),pi=li(!1),vi=fi;function gi(e,t){var r=e.type.contextTypes;if(!r)return fi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in r)a[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){ci(pi),ci(hi)}function Ei(e,t,r){if(hi.current!==fi)throw Error(o(168));di(hi,t),di(pi,r)}function bi(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in e))throw Error(o(108,q(t)||"Unknown",a));return i({},r,n)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fi,vi=hi.current,di(hi,e),di(pi,pi.current),!0}function Di(e,t,r){var n=e.stateNode;if(!n)throw Error(o(169));r?(e=bi(e,t,vi),n.__reactInternalMemoizedMergedChildContext=e,ci(pi),ci(hi),di(hi,e)):ci(pi),di(pi,r)}var Si=null,wi=null,Ti=a.unstable_runWithPriority,Ci=a.unstable_scheduleCallback,Ai=a.unstable_cancelCallback,xi=a.unstable_shouldYield,ki=a.unstable_requestPaint,Li=a.unstable_now,Fi=a.unstable_getCurrentPriorityLevel,Ri=a.unstable_ImmediatePriority,Ii=a.unstable_UserBlockingPriority,Oi=a.unstable_NormalPriority,Pi=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Bi={},Ni=void 0!==ki?ki:function(){},Ui=null,ji=null,Hi=!1,Gi=Li(),Ki=1e4>Gi?Li:function(){return Li()-Gi};function zi(){switch(Fi()){case Ri:return 99;case Ii:return 98;case Oi:return 97;case Pi:return 96;case Mi:return 95;default:throw Error(o(332))}}function Vi(e){switch(e){case 99:return Ri;case 98:return Ii;case 97:return Oi;case 96:return Pi;case 95:return Mi;default:throw Error(o(332))}}function Wi(e,t){return e=Vi(e),Ti(e,t)}function qi(e,t,r){return e=Vi(e),Ci(e,t,r)}function Zi(){if(null!==ji){var e=ji;ji=null,Ai(e)}Yi()}function Yi(){if(!Hi&&null!==Ui){Hi=!0;var e=0;try{var t=Ui;Wi(99,(function(){for(;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}})),Ui=null}catch(r){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ci(Ri,Zi),r}finally{Hi=!1}}}var $i=_.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var r in t=i({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var Qi=li(null),Ji=null,ea=null,ta=null;function ra(){ta=ea=Ji=null}function na(e){var t=Qi.current;ci(Qi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)===t){if(null===r||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,null!==r&&(r.childLanes|=t);e=e.return}}function aa(e,t){Ji=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Bo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Ji)throw Error(o(308));ea=t,Ji.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function la(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ca(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function da(e,t){if(null!==(e=e.updateQueue)){var r=(e=e.shared).pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function fa(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?i=a=o:a=a.next=o,r=r.next}while(null!==r);null===a?i=a=t:a=a.next=t}else i=a=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ha(e,t,r,n){var a=e.updateQueue;sa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var d=e.alternate;if(null!==d){var f=(d=d.updateQueue).lastBaseUpdate;f!==s&&(null===f?d.firstBaseUpdate=c:f.next=c,d.lastBaseUpdate=l)}}if(null!==o){for(f=a.baseState,s=0,d=c=l=null;;){u=o.lane;var h=o.eventTime;if((n&u)===u){null!==d&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,h=r,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(h,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(h,f,u):p)||void 0===u)break e;f=i({},f,u);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else h={eventTime:h,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=h,l=f):d=d.next=h,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===d&&(l=f),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,Hs|=s,e.lanes=s,e.memoizedState=f}}function pa(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!==typeof i)throw Error(o(191,i));i.call(n)}}}var va=(new n.Component).refs;function ga(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:i({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=fu(),i=hu(e),a=ca(n,i);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),da(e,a),pu(e,i,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=fu(),i=hu(e),a=ca(n,i);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),da(e,a),pu(e,i,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=fu(),n=hu(e),i=ca(r,n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),da(e,i),pu(e,n,r)}};function ya(e,t,r,n,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!fn(r,n)||!fn(i,a))}function Ea(e,t,r){var n=!1,i=fi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:hi.current,a=(n=null!==(n=t.contextTypes)&&void 0!==n)?gi(e,i):fi),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ba(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function _a(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=va,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:hi.current,i.context=gi(e,a)),ha(e,r,i,n),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ga(e,t,a,r),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),ha(e,r,i,n),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var Da=Array.isArray;function Sa(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(o(309));var n=r.stateNode}if(!n)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=n.refs;t===va&&(t=n.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!r._owner)throw Error(o(290,e))}return e}function wa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ta(e){function t(t,r){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.flags=8}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Wu(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags=2,r):n:(t.flags=2,r):r}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,r,n){return null===t||6!==t.tag?((t=$u(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function l(e,t,r,n){return null!==t&&t.elementType===r.type?((n=i(t,r.props)).ref=Sa(e,t,r),n.return=e,n):((n=qu(r.type,r.key,r.props,null,e.mode,n)).ref=Sa(e,t,r),n.return=e,n)}function c(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Xu(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function d(e,t,r,n,a){return null===t||7!==t.tag?((t=Zu(r,e.mode,n,a)).return=e,t):((t=i(t,r)).return=e,t)}function f(e,t,r){if("string"===typeof t||"number"===typeof t)return(t=$u(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case D:return(r=qu(t.type,t.key,t.props,null,e.mode,r)).ref=Sa(e,null,t),r.return=e,r;case S:return(t=Xu(t,e.mode,r)).return=e,t}if(Da(t)||G(t))return(t=Zu(t,e.mode,r,null)).return=e,t;wa(e,t)}return null}function h(e,t,r,n){var i=null!==t?t.key:null;if("string"===typeof r||"number"===typeof r)return null!==i?null:u(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case D:return r.key===i?r.type===w?d(e,t,r.props.children,n,i):l(e,t,r,n):null;case S:return r.key===i?c(e,t,r,n):null}if(Da(r)||G(r))return null!==i?null:d(e,t,r,n,null);wa(e,r)}return null}function p(e,t,r,n,i){if("string"===typeof n||"number"===typeof n)return u(t,e=e.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case D:return e=e.get(null===n.key?r:n.key)||null,n.type===w?d(t,e,n.props.children,i,n.key):l(t,e,n,i);case S:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i)}if(Da(n)||G(n))return d(t,e=e.get(r)||null,n,i,null);wa(t,n)}return null}function v(i,o,s,u){for(var l=null,c=null,d=o,v=o=0,g=null;null!==d&&v<s.length;v++){d.index>v?(g=d,d=null):g=d.sibling;var m=h(i,d,s[v],u);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(i,d),o=a(m,o,v),null===c?l=m:c.sibling=m,c=m,d=g}if(v===s.length)return r(i,d),l;if(null===d){for(;v<s.length;v++)null!==(d=f(i,s[v],u))&&(o=a(d,o,v),null===c?l=d:c.sibling=d,c=d);return l}for(d=n(i,d);v<s.length;v++)null!==(g=p(d,i,v,s[v],u))&&(e&&null!==g.alternate&&d.delete(null===g.key?v:g.key),o=a(g,o,v),null===c?l=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),l}function g(i,s,u,l){var c=G(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var d=c=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var E=h(i,v,y.value,l);if(null===E){null===v&&(v=m);break}e&&v&&null===E.alternate&&t(i,v),s=a(E,s,g),null===d?c=E:d.sibling=E,d=E,v=m}if(y.done)return r(i,v),c;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=f(i,y.value,l))&&(s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return c}for(v=n(i,v);!y.done;g++,y=u.next())null!==(y=p(v,i,g,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return e&&v.forEach((function(e){return t(i,e)})),c}return function(e,n,a,u){var l="object"===typeof a&&null!==a&&a.type===w&&null===a.key;l&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case D:e:{for(c=a.key,l=n;null!==l;){if(l.key===c){if(7===l.tag){if(a.type===w){r(e,l.sibling),(n=i(l,a.props.children)).return=e,e=n;break e}}else if(l.elementType===a.type){r(e,l.sibling),(n=i(l,a.props)).ref=Sa(e,l,a),n.return=e,e=n;break e}r(e,l);break}t(e,l),l=l.sibling}a.type===w?((n=Zu(a.props.children,e.mode,u,a.key)).return=e,e=n):((u=qu(a.type,a.key,a.props,null,e.mode,u)).ref=Sa(e,n,a),u.return=e,e=u)}return s(e);case S:e:{for(l=a.key;null!==n;){if(n.key===l){if(4===n.tag&&n.stateNode.containerInfo===a.containerInfo&&n.stateNode.implementation===a.implementation){r(e,n.sibling),(n=i(n,a.children||[])).return=e,e=n;break e}r(e,n);break}t(e,n),n=n.sibling}(n=Xu(a,e.mode,u)).return=e,e=n}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==n&&6===n.tag?(r(e,n.sibling),(n=i(n,a)).return=e,e=n):(r(e,n),(n=$u(a,e.mode,u)).return=e,e=n),s(e);if(Da(a))return v(e,n,a,u);if(G(a))return g(e,n,a,u);if(c&&wa(e,a),"undefined"===typeof a&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,q(e.type)||"Component"))}return r(e,n)}}var Ca=Ta(!0),Aa=Ta(!1),xa={},ka=li(xa),La=li(xa),Fa=li(xa);function Ra(e){if(e===xa)throw Error(o(174));return e}function Ia(e,t){switch(di(Fa,t),di(La,e),di(ka,xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(ka),di(ka,t)}function Oa(){ci(ka),ci(La),ci(Fa)}function Pa(e){Ra(Fa.current);var t=Ra(ka.current),r=pe(t,e.type);t!==r&&(di(La,e),di(ka,r))}function Ma(e){La.current===e&&(ci(ka),ci(La))}var Ba=li(0);function Na(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=null,ja=null,Ha=!1;function Ga(e,t){var r=zu(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function Ka(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function za(e){if(Ha){var t=ja;if(t){var r=t;if(!Ka(e,t)){if(!(t=Zn(r.nextSibling))||!Ka(e,t))return e.flags=-1025&e.flags|2,Ha=!1,void(Ua=e);Ga(Ua,r)}Ua=e,ja=Zn(t.firstChild)}else e.flags=-1025&e.flags|2,Ha=!1,Ua=e}}function Va(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ua=e}function Wa(e){if(e!==Ua)return!1;if(!Ha)return Va(e),Ha=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!zn(t,e.memoizedProps))for(t=ja;t;)Ga(e,t),t=Zn(t.nextSibling);if(Va(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ja=Zn(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ja=null}}else ja=Ua?Zn(e.stateNode.nextSibling):null;return!0}function qa(){ja=Ua=null,Ha=!1}var Za=[];function Ya(){for(var e=0;e<Za.length;e++)Za[e]._workInProgressVersionPrimary=null;Za.length=0}var $a=_.ReactCurrentDispatcher,Xa=_.ReactCurrentBatchConfig,Qa=0,Ja=null,eo=null,to=null,ro=!1,no=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!cn(e[r],t[r]))return!1;return!0}function oo(e,t,r,n,i,a){if(Qa=a,Ja=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=null===e||null===e.memoizedState?Io:Oo,e=r(n,i),no){a=0;do{if(no=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,$a.current=Po,e=r(n,i)}while(no)}if($a.current=Ro,t=null!==eo&&null!==eo.next,Qa=0,to=eo=Ja=null,ro=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Ja.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=Ja.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Ja.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Ja.memoizedState=to=e:to=to.next=e}return to}function lo(e,t){return"function"===typeof t?t(e):t}function co(e){var t=uo(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=eo,i=n.baseQueue,a=r.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(null!==i){i=i.next,n=n.baseState;var u=s=a=null,l=i;do{var c=l.lane;if((Qa&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),n=l.eagerReducer===e?l.eagerState:e(n,l.action);else{var d={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=d,a=n):u=u.next=d,Ja.lanes|=c,Hs|=c}l=l.next}while(null!==l&&l!==i);null===u?a=n:u.next=s,cn(n,t.memoizedState)||(Bo=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=u,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function fo(e){var t=uo(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);cn(a,t.memoizedState)||(Bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function ho(e,t,r){var n=t._getVersion;n=n(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===n:(e=e.mutableReadLanes,(e=(Qa&e)===e)&&(t._workInProgressVersionPrimary=n,Za.push(t))),e)return r(t._source);throw Za.push(t),Error(o(350))}function po(e,t,r,n){var i=Is;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=$a.current,l=u.useState((function(){return ho(i,t,r)})),c=l[1],d=l[0];l=to;var f=e.memoizedState,h=f.refs,p=h.getSnapshot,v=f.source;f=f.subscribe;var g=Ja;return e.memoizedState={refs:h,source:t,subscribe:n},u.useEffect((function(){h.getSnapshot=r,h.setSnapshot=c;var e=a(t._source);if(!cn(s,e)){e=r(t._source),cn(d,e)||(c(e),e=hu(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var n=i.entanglements,o=e;0<o;){var u=31-zt(o),l=1<<u;n[u]|=e,o&=~l}}}),[r,t,n]),u.useEffect((function(){return n(t._source,(function(){var e=h.getSnapshot,r=h.setSnapshot;try{r(e(t._source));var n=hu(g);i.mutableReadLanes|=n&i.pendingLanes}catch(a){r((function(){throw a}))}}))}),[t,n]),cn(p,r)&&cn(v,t)&&cn(f,n)||((e={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:d}).dispatch=c=Fo.bind(null,Ja,e),l.queue=e,l.baseQueue=null,d=ho(i,t,r),l.memoizedState=l.baseState=d),d}function vo(e,t,r){return po(uo(),e,t,r)}function go(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:e}).dispatch=Fo.bind(null,Ja,e),[t.memoizedState,e]}function mo(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=Ja.updateQueue)?(t={lastEffect:null},Ja.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function yo(e){return e={current:e},so().memoizedState=e}function Eo(){return uo().memoizedState}function bo(e,t,r,n){var i=so();Ja.flags|=e,i.memoizedState=mo(1|t,r,void 0,void 0===n?null:n)}function _o(e,t,r,n){var i=uo();n=void 0===n?null:n;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==n&&ao(n,o.deps))return void mo(t,r,a,n)}Ja.flags|=e,i.memoizedState=mo(1|t,r,a,n)}function Do(e,t){return bo(516,4,e,t)}function So(e,t){return _o(516,4,e,t)}function wo(e,t){return _o(4,2,e,t)}function To(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Co(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,_o(4,2,To.bind(null,t,e),r)}function Ao(){}function xo(e,t){var r=uo();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ao(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ko(e,t){var r=uo();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ao(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Lo(e,t){var r=zi();Wi(98>r?98:r,(function(){e(!0)})),Wi(97<r?97:r,(function(){var r=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=r}}))}function Fo(e,t,r){var n=fu(),i=hu(e),a={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Ja||null!==o&&o===Ja)no=ro=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,r);if(a.eagerReducer=o,a.eagerState=u,cn(u,s))return}catch(l){}pu(e,i,n)}}var Ro={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Io={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:Do,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,bo(4,2,To.bind(null,t,e),r)},useLayoutEffect:function(e,t){return bo(4,2,e,t)},useMemo:function(e,t){var r=so();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=so();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Fo.bind(null,Ja,e),[n.memoizedState,e]},useRef:yo,useState:go,useDebugValue:Ao,useDeferredValue:function(e){var t=go(e),r=t[0],n=t[1];return Do((function(){var t=Xa.transition;Xa.transition=1;try{n(e)}finally{Xa.transition=t}}),[e]),r},useTransition:function(){var e=go(!1),t=e[0];return yo(e=Lo.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,r){var n=so();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},po(n,e,t,r)},useOpaqueIdentifier:function(){if(Ha){var e=!1,t=function(e){return{$$typeof:P,toString:e,valueOf:e}}((function(){throw e||(e=!0,r("r:"+($n++).toString(36))),Error(o(355))})),r=go(t)[1];return 0===(2&Ja.mode)&&(Ja.flags|=516,mo(5,(function(){r("r:"+($n++).toString(36))}),void 0,null)),t}return go(t="r:"+($n++).toString(36)),t},unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:xo,useContext:oa,useEffect:So,useImperativeHandle:Co,useLayoutEffect:wo,useMemo:ko,useReducer:co,useRef:Eo,useState:function(){return co(lo)},useDebugValue:Ao,useDeferredValue:function(e){var t=co(lo),r=t[0],n=t[1];return So((function(){var t=Xa.transition;Xa.transition=1;try{n(e)}finally{Xa.transition=t}}),[e]),r},useTransition:function(){var e=co(lo)[0];return[Eo().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return co(lo)[0]},unstable_isNewReconciler:!1},Po={readContext:oa,useCallback:xo,useContext:oa,useEffect:So,useImperativeHandle:Co,useLayoutEffect:wo,useMemo:ko,useReducer:fo,useRef:Eo,useState:function(){return fo(lo)},useDebugValue:Ao,useDeferredValue:function(e){var t=fo(lo),r=t[0],n=t[1];return So((function(){var t=Xa.transition;Xa.transition=1;try{n(e)}finally{Xa.transition=t}}),[e]),r},useTransition:function(){var e=fo(lo)[0];return[Eo().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(lo)[0]},unstable_isNewReconciler:!1},Mo=_.ReactCurrentOwner,Bo=!1;function No(e,t,r,n){t.child=null===e?Aa(t,null,r,n):Ca(t,e.child,r,n)}function Uo(e,t,r,n,i){r=r.render;var a=t.ref;return aa(t,i),n=oo(e,t,r,n,a,i),null===e||Bo?(t.flags|=1,No(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function jo(e,t,r,n,i,a){if(null===e){var o=r.type;return"function"!==typeof o||Vu(o)||void 0!==o.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=qu(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ho(e,t,o,n,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(r=null!==(r=r.compare)?r:fn)(i,n)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Wu(o,n)).ref=t.ref,e.return=t,t.child=e)}function Ho(e,t,r,n,i,a){if(null!==e&&fn(e.memoizedProps,n)&&e.ref===t.ref){if(Bo=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Bo=!0)}return zo(e,t,r,n,a)}function Go(e,t,r){var n=t.pendingProps,i=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode||"unstable-defer-without-hiding"===n.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},Du(t,r);else{if(0===(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Du(t,e),null;t.memoizedState={baseLanes:0},Du(t,null!==a?a.baseLanes:r)}else null!==a?(n=a.baseLanes|r,t.memoizedState=null):n=r,Du(t,n);return No(e,t,i,r),t.child}function Ko(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=128)}function zo(e,t,r,n,i){var a=mi(r)?vi:hi.current;return a=gi(t,a),aa(t,i),r=oo(e,t,r,n,a,i),null===e||Bo?(t.flags|=1,No(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Vo(e,t,r,n,i){if(mi(r)){var a=!0;_i(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Ea(t,r,n),_a(t,r,n,i),n=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=r.contextType;"object"===typeof l&&null!==l?l=oa(l):l=gi(t,l=mi(r)?vi:hi.current);var c=r.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==n||u!==l)&&ba(t,o,n,l),sa=!1;var f=t.memoizedState;o.state=f,ha(t,n,o,i),u=t.memoizedState,s!==n||f!==u||pi.current||sa?("function"===typeof c&&(ga(t,r,c,n),u=t.memoizedState),(s=sa||ya(t,r,s,n,f,u,l))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=u),o.props=n,o.state=u,o.context=l,n=s):("function"===typeof o.componentDidMount&&(t.flags|=4),n=!1)}else{o=t.stateNode,la(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Xi(t.type,s),o.props=l,d=t.pendingProps,f=o.context,"object"===typeof(u=r.contextType)&&null!==u?u=oa(u):u=gi(t,u=mi(r)?vi:hi.current);var h=r.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||f!==u)&&ba(t,o,n,u),sa=!1,f=t.memoizedState,o.state=f,ha(t,n,o,i);var p=t.memoizedState;s!==d||f!==p||pi.current||sa?("function"===typeof h&&(ga(t,r,h,n),p=t.memoizedState),(l=sa||ya(t,r,l,n,f,p,u))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(n,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=u,n=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),n=!1)}return Wo(e,t,r,n,a,i)}function Wo(e,t,r,n,i,a){Ko(e,t);var o=0!==(64&t.flags);if(!n&&!o)return i&&Di(t,r,!1),as(e,t,a);n=t.stateNode,Mo.current=t;var s=o&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=Ca(t,e.child,null,a),t.child=Ca(t,null,s,a)):No(e,t,s,a),t.memoizedState=n.state,i&&Di(t,r,!0),t.child}function qo(e){var t=e.stateNode;t.pendingContext?Ei(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ei(0,t.context,!1),Ia(e,t.containerInfo)}var Zo,Yo,$o,Xo={dehydrated:null,retryLane:0};function Qo(e,t,r){var n,i=t.pendingProps,a=Ba.current,o=!1;return(n=0!==(64&t.flags))||(n=(null===e||null!==e.memoizedState)&&0!==(2&a)),n?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),di(Ba,1&a),null===e?(void 0!==i.fallback&&za(t),e=i.children,a=i.fallback,o?(e=Jo(t,e,a,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Jo(t,e,a,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Xo,t.lanes=33554432,e):((r=Yu({mode:"visible",children:e},t.mode,r,null)).return=t,t.child=r)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,r),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:r}:{baseLanes:a.baseLanes|r},o.childLanes=e.childLanes&~r,t.memoizedState=Xo,i):(r=es(e,t,i.children,r),t.memoizedState=null,r))}function Jo(e,t,r,n){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Yu(t,i,0,null),r=Zu(r,i,n,null),a.return=e,r.return=e,a.sibling=r,e.child=a,r}function es(e,t,r,n){var i=e.child;return e=i.sibling,r=Wu(i,{mode:"visible",children:r}),0===(2&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function ts(e,t,r,n,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:r};return 0===(2&a)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=s,null!==(o=r.lastEffect)?(t.firstEffect=r.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):r=Wu(o,s),null!==e?n=Wu(e,n):(n=Zu(n,a,i,null)).flags|=2,n.return=t,r.return=t,r.sibling=n,t.child=r,n}function rs(e,t){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ia(e.return,t)}function ns(e,t,r,n,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i,o.lastEffect=a)}function is(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(No(e,t,n.children,r),0!==(2&(n=Ba.current)))n=1&n|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&rs(e,r);else if(19===e.tag)rs(e,r);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(di(Ba,n),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===Na(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),ns(t,!1,i,r,a,t.lastEffect);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Na(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}ns(t,!0,r,null,a,t.lastEffect);break;case"together":ns(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Hs|=t.lanes,0!==(r&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=Wu(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Wu(e,e.pendingProps)).return=t;r.sibling=null}return t.child}return null}function os(e,t){if(!Ha)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ss(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&yi(),null;case 3:return Oa(),ci(pi),ci(hi),Ya(),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(Wa(t)?t.flags|=4:n.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Ra(Fa.current);if(r=t.type,null!==e&&null!=t.stateNode)Yo(e,t,r,n),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ra(ka.current),Wa(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[Qn]=t,n[Jn]=s,r){case"dialog":Ln("cancel",n),Ln("close",n);break;case"iframe":case"object":case"embed":Ln("load",n);break;case"video":case"audio":for(e=0;e<Cn.length;e++)Ln(Cn[e],n);break;case"source":Ln("error",n);break;case"img":case"image":case"link":Ln("error",n),Ln("load",n);break;case"details":Ln("toggle",n);break;case"input":ee(n,s),Ln("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Ln("invalid",n);break;case"textarea":ue(n,s),Ln("invalid",n)}for(var l in we(r,s),e=null,s)s.hasOwnProperty(l)&&(a=s[l],"children"===l?"string"===typeof a?n.textContent!==a&&(e=["children",a]):"number"===typeof a&&n.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(l)&&null!=a&&"onScroll"===l&&Ln("scroll",n));switch(r){case"input":$(n),ne(n,s,!0);break;case"textarea":$(n),ce(n);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(n.onclick=jn)}n=e,t.updateQueue=n,null!==n&&(t.flags|=4)}else{switch(l=9===a.nodeType?a:a.ownerDocument,e===de&&(e=he(r)),e===de?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[Qn]=t,e[Jn]=n,Zo(e,t),t.stateNode=e,l=Te(r,n),r){case"dialog":Ln("cancel",e),Ln("close",e),a=n;break;case"iframe":case"object":case"embed":Ln("load",e),a=n;break;case"video":case"audio":for(a=0;a<Cn.length;a++)Ln(Cn[a],e);a=n;break;case"source":Ln("error",e),a=n;break;case"img":case"image":case"link":Ln("error",e),Ln("load",e),a=n;break;case"details":Ln("toggle",e),a=n;break;case"input":ee(e,n),a=J(e,n),Ln("invalid",e);break;case"option":a=ae(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=i({},n,{value:void 0}),Ln("invalid",e);break;case"textarea":ue(e,n),a=se(e,n),Ln("invalid",e);break;default:a=n}we(r,a);var c=a;for(s in c)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?De(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&me(e,d):"children"===s?"string"===typeof d?("textarea"!==r||""!==d)&&ye(e,d):"number"===typeof d&&ye(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Ln("scroll",e):null!=d&&b(e,s,d,l))}switch(r){case"input":$(e),ne(e,n,!1);break;case"textarea":$(e),ce(e);break;case"option":null!=n.value&&e.setAttribute("value",""+Z(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?oe(e,!!n.multiple,s,!1):null!=n.defaultValue&&oe(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=jn)}Kn(r,n)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)$o(0,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(o(166));r=Ra(Fa.current),Ra(ka.current),Wa(t)?(n=t.stateNode,r=t.memoizedProps,n[Qn]=t,n.nodeValue!==r&&(t.flags|=4)):((n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[Qn]=t,t.stateNode=n)}return null;case 13:return ci(Ba),n=t.memoizedState,0!==(64&t.flags)?(t.lanes=r,t):(n=null!==n,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Wa(t):r=null!==e.memoizedState,n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ba.current)?0===Ns&&(Ns=3):(0!==Ns&&3!==Ns||(Ns=4),null===Is||0===(134217727&Hs)&&0===(134217727&Gs)||yu(Is,Ps))),(n||r)&&(t.flags|=4),null);case 4:return Oa(),null===e&&Rn(t.stateNode.containerInfo),null;case 10:return na(t),null;case 19:if(ci(Ba),null===(n=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(l=n.rendering))if(s)os(n,!1);else{if(0!==Ns||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=Na(e))){for(t.flags|=64,os(n,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===n.lastEffect&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;null!==r;)e=n,(s=r).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return di(Ba,1&Ba.current|2),t.child}e=e.sibling}null!==n.tail&&Ki()>Ws&&(t.flags|=64,s=!0,os(n,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Na(l))){if(t.flags|=64,s=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),os(n,!0),null===n.tail&&"hidden"===n.tailMode&&!l.alternate&&!Ha)return null!==(t=t.lastEffect=n.lastEffect)&&(t.nextEffect=null),null}else 2*Ki()-n.renderingStartTime>Ws&&1073741824!==r&&(t.flags|=64,s=!0,os(n,!1),t.lanes=33554432);n.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=n.last)?r.sibling=l:t.child=l,n.last=l)}return null!==n.tail?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Ki(),r.sibling=null,t=Ba.current,di(Ba,s?1&t|2:1&t),r):null;case 23:case 24:return Su(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==n.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:mi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Oa(),ci(pi),ci(hi),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return ci(Ba),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ci(Ba),null;case 4:return Oa(),null;case 10:return na(e),null;case 23:case 24:return Su(),null;default:return null}}function ls(e,t){try{var r="",n=t;do{r+=W(n),n=n.return}while(n);var i=r}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function cs(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}Zo=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Yo=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ra(ka.current);var o,s=null;switch(r){case"input":a=J(e,a),n=J(e,n),s=[];break;case"option":a=ae(e,a),n=ae(e,n),s=[];break;case"select":a=i({},a,{value:void 0}),n=i({},n,{value:void 0}),s=[];break;case"textarea":a=se(e,a),n=se(e,n),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=jn)}for(d in we(r,n),r=null,a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(u.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in n){var c=n[d];if(l=null!=a?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(u.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Ln("scroll",e),s||l===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===P?c.toString():(s=s||[]).push(d,c))}r&&(s=s||[]).push("style",r);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},$o=function(e,t,r,n){r!==n&&(t.flags|=4)};var ds="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,r){(r=ca(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){$s||($s=!0,Xs=n),cs(0,t)},r}function hs(e,t,r){(r=ca(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var i=t.value;r.payload=function(){return cs(0,t),n(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(r.callback=function(){"function"!==typeof n&&(null===Qs?Qs=new Set([this]):Qs.add(this),cs(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(r){ju(e,r)}else t.current=null}function gs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var r=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?r:Xi(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&qn(t.stateNode.containerInfo))}throw Error(o(163))}function ms(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=r.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=r.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;n=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Bu(r,e),Mu(r,e)),e=n}while(e!==t)}return;case 1:return e=r.stateNode,4&r.flags&&(null===t?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:Xi(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=r.updateQueue)&&pa(r,t,e));case 3:if(null!==(t=r.updateQueue)){if(e=null,null!==r.child)switch(r.child.tag){case 5:case 1:e=r.child.stateNode}pa(r,t,e)}return;case 5:return e=r.stateNode,void(null===t&&4&r.flags&&Kn(r.type,r.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===r.memoizedState&&(r=r.alternate,null!==r&&(r=r.memoizedState,null!==r&&(r=r.dehydrated,null!==r&&Dt(r)))))}throw Error(o(163))}function ys(e,t){for(var r=e;;){if(5===r.tag){var n=r.stateNode;if(t)"function"===typeof(n=n.style).setProperty?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,n.style.display=_e("display",i)}}else if(6===r.tag)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((23!==r.tag&&24!==r.tag||null===r.memoizedState||r===e)&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function Es(e,t){if(wi&&"function"===typeof wi.onCommitFiberUnmount)try{wi.onCommitFiberUnmount(Si,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var n=r,i=n.destroy;if(n=n.tag,void 0!==i)if(0!==(4&n))Bu(t,r);else{n=t;try{i()}catch(a){ju(n,a)}}r=r.next}while(r!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){ju(t,a)}break;case 5:vs(t);break;case 4:Ts(e,t)}}function bs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function _s(e){return 5===e.tag||3===e.tag||4===e.tag}function Ds(e){e:{for(var t=e.return;null!==t;){if(_s(t))break e;t=t.return}throw Error(o(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:case 4:t=t.containerInfo,n=!0;break;default:throw Error(o(161))}16&r.flags&&(ye(t,""),r.flags&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||_s(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.flags)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.flags)){r=r.stateNode;break e}}n?Ss(e,r,t):ws(e,r,t)}function Ss(e,t,r){var n=e.tag,i=5===n||6===n;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=jn));else if(4!==n&&null!==(e=e.child))for(Ss(e,t,r),e=e.sibling;null!==e;)Ss(e,t,r),e=e.sibling}function ws(e,t,r){var n=e.tag,i=5===n||6===n;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(ws(e,t,r),e=e.sibling;null!==e;)ws(e,t,r),e=e.sibling}function Ts(e,t){for(var r,n,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(r=a.stateNode,a.tag){case 5:n=!1;break e;case 3:case 4:r=r.containerInfo,n=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,l=u;;)if(Es(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}n?(s=r,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):r.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){r=i.stateNode.containerInfo,n=!0,i.child.return=i,i=i.child;continue}}else if(Es(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Cs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var n=r=r.next;do{3===(3&n.tag)&&(e=n.destroy,n.destroy=void 0,void 0!==e&&e()),n=n.next}while(n!==r)}return;case 1:case 12:case 17:return;case 5:if(null!=(r=t.stateNode)){n=t.memoizedProps;var i=null!==e?e.memoizedProps:n;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(r[Jn]=n,"input"===e&&"radio"===n.type&&null!=n.name&&te(r,n),Te(e,i),t=Te(e,n),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?De(r,u):"dangerouslySetInnerHTML"===s?me(r,u):"children"===s?ye(r,u):b(r,s,u,t)}switch(e){case"input":re(r,n);break;case"textarea":le(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,null!=(a=n.value)?oe(r,!!n.multiple,a,!1):e!==!!n.multiple&&(null!=n.defaultValue?oe(r,!!n.multiple,n.defaultValue,!0):oe(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((r=t.stateNode).hydrate&&(r.hydrate=!1,Dt(r.containerInfo)));case 13:return null!==t.memoizedState&&(Vs=Ki(),ys(t.child,!0)),void As(t);case 19:return void As(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(o(163))}function As(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new ps),t.forEach((function(t){var n=Gu.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function xs(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var ks=Math.ceil,Ls=_.ReactCurrentDispatcher,Fs=_.ReactCurrentOwner,Rs=0,Is=null,Os=null,Ps=0,Ms=0,Bs=li(0),Ns=0,Us=null,js=0,Hs=0,Gs=0,Ks=0,zs=null,Vs=0,Ws=1/0;function qs(){Ws=Ki()+500}var Zs,Ys=null,$s=!1,Xs=null,Qs=null,Js=!1,eu=null,tu=90,ru=[],nu=[],iu=null,au=0,ou=null,su=-1,uu=0,lu=0,cu=null,du=!1;function fu(){return 0!==(48&Rs)?Ki():-1!==su?su:su=Ki()}function hu(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===zi()?1:2;if(0===uu&&(uu=js),0!==$i.transition){0!==lu&&(lu=null!==zs?zs.pendingLanes:0),e=uu;var t=4186112&~lu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=zi(),0!==(4&Rs)&&98===e?e=jt(12,uu):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,r){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;Kt(e,t,r),e===Is&&(Gs|=t,4===Ns&&yu(e,Ps));var n=zi();1===t?0!==(8&Rs)&&0===(48&Rs)?Eu(e):(gu(e,r),0===Rs&&(qs(),Zi())):(0===(4&Rs)||98!==n&&99!==n||(null===iu?iu=new Set([e]):iu.add(e)),gu(e,r)),zs=e}function vu(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}function gu(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-zt(s),l=1<<u,c=a[u];if(-1===c){if(0===(l&n)||0!==(l&i)){c=t,Bt(l);var d=Mt;a[u]=10<=d?c+250:6<=d?c+5e3:-1}}else c<=t&&(e.expiredLanes|=l);s&=~l}if(n=Nt(e,e===Is?Ps:0),t=Mt,0===n)null!==r&&(r!==Bi&&Ai(r),e.callbackNode=null,e.callbackPriority=0);else{if(null!==r){if(e.callbackPriority===t)return;r!==Bi&&Ai(r)}15===t?(r=Eu.bind(null,e),null===Ui?(Ui=[r],ji=Ci(Ri,Yi)):Ui.push(r),r=Bi):14===t?r=qi(99,Eu.bind(null,e)):(r=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),r=qi(r,mu.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function mu(e){if(su=-1,lu=uu=0,0!==(48&Rs))throw Error(o(327));var t=e.callbackNode;if(Pu()&&e.callbackNode!==t)return null;var r=Nt(e,e===Is?Ps:0);if(0===r)return null;var n=r,i=Rs;Rs|=16;var a=Cu();for(Is===e&&Ps===n||(qs(),wu(e,n));;)try{ku();break}catch(u){Tu(e,u)}if(ra(),Ls.current=a,Rs=i,null!==Os?n=0:(Is=null,Ps=0,n=Ns),0!==(js&Gs))wu(e,0);else if(0!==n){if(2===n&&(Rs|=64,e.hydrate&&(e.hydrate=!1,qn(e.containerInfo)),0!==(r=Ut(e))&&(n=Au(e,r))),1===n)throw t=Us,wu(e,0),yu(e,r),gu(e,Ki()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(o(345));case 2:case 5:Ru(e);break;case 3:if(yu(e,r),(62914560&r)===r&&10<(n=Vs+500-Ki())){if(0!==Nt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){fu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Vn(Ru.bind(null,e),n);break}Ru(e);break;case 4:if(yu(e,r),(4186112&r)===r)break;for(n=e.eventTimes,i=-1;0<r;){var s=31-zt(r);a=1<<s,(s=n[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Ki()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ks(r/1960))-r)){e.timeoutHandle=Vn(Ru.bind(null,e),r);break}Ru(e);break;default:throw Error(o(329))}}return gu(e,Ki()),e.callbackNode===t?mu.bind(null,e):null}function yu(e,t){for(t&=~Ks,t&=~Gs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-zt(t),n=1<<r;e[r]=-1,t&=~n}}function Eu(e){if(0!==(48&Rs))throw Error(o(327));if(Pu(),e===Is&&0!==(e.expiredLanes&Ps)){var t=Ps,r=Au(e,t);0!==(js&Gs)&&(r=Au(e,t=Nt(e,t)))}else r=Au(e,t=Nt(e,0));if(0!==e.tag&&2===r&&(Rs|=64,e.hydrate&&(e.hydrate=!1,qn(e.containerInfo)),0!==(t=Ut(e))&&(r=Au(e,t))),1===r)throw r=Us,wu(e,0),yu(e,t),gu(e,Ki()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ru(e),gu(e,Ki()),null}function bu(e,t){var r=Rs;Rs|=1;try{return e(t)}finally{0===(Rs=r)&&(qs(),Zi())}}function _u(e,t){var r=Rs;Rs&=-2,Rs|=8;try{return e(t)}finally{0===(Rs=r)&&(qs(),Zi())}}function Du(e,t){di(Bs,Ms),Ms|=t,js|=t}function Su(){Ms=Bs.current,ci(Bs)}function wu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,Wn(r)),null!==Os)for(r=Os.return;null!==r;){var n=r;switch(n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&yi();break;case 3:Oa(),ci(pi),ci(hi),Ya();break;case 5:Ma(n);break;case 4:Oa();break;case 13:case 19:ci(Ba);break;case 10:na(n);break;case 23:case 24:Su()}r=r.return}Is=e,Os=Wu(e.current,null),Ps=Ms=js=t,Ns=0,Us=null,Ks=Gs=Hs=0}function Tu(e,t){for(;;){var r=Os;try{if(ra(),$a.current=Ro,ro){for(var n=Ja.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}ro=!1}if(Qa=0,to=eo=Ja=null,no=!1,Fs.current=null,null===r||null===r.return){Ns=1,Us=t,Os=null;break}e:{var a=e,o=r.return,s=r,u=t;if(t=Ps,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=0!==(1&Ba.current),f=o;do{var h;if(h=13===f.tag){var p=f.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var v=f.memoizedProps;h=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!d)}}if(h){var g=f.updateQueue;if(null===g){var m=new Set;m.add(l),f.updateQueue=m}else g.add(l);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=ca(-1,1);y.tag=2,da(s,y)}s.lanes|=1;break e}u=void 0,s=t;var E=a.pingCache;if(null===E?(E=a.pingCache=new ds,u=new Set,E.set(l,u)):void 0===(u=E.get(l))&&(u=new Set,E.set(l,u)),!u.has(s)){u.add(s);var b=Hu.bind(null,a,l,s);l.then(b,b)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((q(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ns&&(Ns=2),u=ls(u,s),f=o;do{switch(f.tag){case 3:a=u,f.flags|=4096,t&=-t,f.lanes|=t,fa(f,fs(0,a,t));break e;case 1:a=u;var _=f.type,D=f.stateNode;if(0===(64&f.flags)&&("function"===typeof _.getDerivedStateFromError||null!==D&&"function"===typeof D.componentDidCatch&&(null===Qs||!Qs.has(D)))){f.flags|=4096,t&=-t,f.lanes|=t,fa(f,hs(f,a,t));break e}}f=f.return}while(null!==f)}Fu(r)}catch(S){t=S,Os===r&&null!==r&&(Os=r=r.return);continue}break}}function Cu(){var e=Ls.current;return Ls.current=Ro,null===e?Ro:e}function Au(e,t){var r=Rs;Rs|=16;var n=Cu();for(Is===e&&Ps===t||wu(e,t);;)try{xu();break}catch(i){Tu(e,i)}if(ra(),Rs=r,Ls.current=n,null!==Os)throw Error(o(261));return Is=null,Ps=0,Ns}function xu(){for(;null!==Os;)Lu(Os)}function ku(){for(;null!==Os&&!xi();)Lu(Os)}function Lu(e){var t=Zs(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?Fu(e):Os=t,Fs.current=null}function Fu(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(r=ss(r,t,Ms)))return void(Os=r);if(24!==(r=t).tag&&23!==r.tag||null===r.memoizedState||0!==(1073741824&Ms)||0===(4&r.mode)){for(var n=0,i=r.child;null!==i;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(r=us(t)))return r.flags&=2047,void(Os=r);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Os=t);Os=t=e}while(null!==t);0===Ns&&(Ns=5)}function Ru(e){var t=zi();return Wi(99,Iu.bind(null,e,t)),null}function Iu(e,t){do{Pu()}while(null!==eu);if(0!==(48&Rs))throw Error(o(327));var r=e.finishedWork;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null;var n=r.lanes|r.childLanes,i=n,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var l=31-zt(a),c=1<<l;i[l]=0,s[l]=-1,u[l]=-1,a&=~c}if(null!==iu&&0===(24&n)&&iu.has(e)&&iu.delete(e),e===Is&&(Os=Is=null,Ps=0),1<r.flags?null!==r.lastEffect?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,null!==n){if(i=Rs,Rs|=32,Fs.current=null,Hn=Yt,mn(s=gn())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,a=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{u.nodeType,l.nodeType}catch(C){u=null;break e}var d=0,f=-1,h=-1,p=0,v=0,g=s,m=null;t:for(;;){for(var y;g!==u||0!==a&&3!==g.nodeType||(f=d+a),g!==l||0!==c&&3!==g.nodeType||(h=d+c),3===g.nodeType&&(d+=g.nodeValue.length),null!==(y=g.firstChild);)m=g,g=y;for(;;){if(g===s)break t;if(m===u&&++p===a&&(f=d),m===l&&++v===c&&(h=d),null!==(y=g.nextSibling))break;m=(g=m).parentNode}g=y}u=-1===f||-1===h?null:{start:f,end:h}}else u=null;u=u||{start:0,end:0}}else u=null;Gn={focusedElem:s,selectionRange:u},Yt=!1,cu=null,du=!1,Ys=n;do{try{Ou()}catch(C){if(null===Ys)throw Error(o(330));ju(Ys,C),Ys=Ys.nextEffect}}while(null!==Ys);cu=null,Ys=n;do{try{for(s=e;null!==Ys;){var E=Ys.flags;if(16&E&&ye(Ys.stateNode,""),128&E){var b=Ys.alternate;if(null!==b){var _=b.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&E){case 2:Ds(Ys),Ys.flags&=-3;break;case 6:Ds(Ys),Ys.flags&=-3,Cs(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,Cs(Ys.alternate,Ys);break;case 4:Cs(Ys.alternate,Ys);break;case 8:Ts(s,u=Ys);var D=u.alternate;bs(u),null!==D&&bs(D)}Ys=Ys.nextEffect}}catch(C){if(null===Ys)throw Error(o(330));ju(Ys,C),Ys=Ys.nextEffect}}while(null!==Ys);if(_=Gn,b=gn(),E=_.focusedElem,s=_.selectionRange,b!==E&&E&&E.ownerDocument&&vn(E.ownerDocument.documentElement,E)){null!==s&&mn(E)&&(b=s.start,void 0===(_=s.end)&&(_=b),"selectionStart"in E?(E.selectionStart=b,E.selectionEnd=Math.min(_,E.value.length)):(_=(b=E.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),u=E.textContent.length,D=Math.min(s.start,u),s=void 0===s.end?D:Math.min(s.end,u),!_.extend&&D>s&&(u=s,s=D,D=u),u=pn(E,D),a=pn(E,s),u&&a&&(1!==_.rangeCount||_.anchorNode!==u.node||_.anchorOffset!==u.offset||_.focusNode!==a.node||_.focusOffset!==a.offset)&&((b=b.createRange()).setStart(u.node,u.offset),_.removeAllRanges(),D>s?(_.addRange(b),_.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),_.addRange(b))))),b=[];for(_=E;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof E.focus&&E.focus(),E=0;E<b.length;E++)(_=b[E]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Yt=!!Hn,Gn=Hn=null,e.current=r,Ys=n;do{try{for(E=e;null!==Ys;){var S=Ys.flags;if(36&S&&ms(E,Ys.alternate,Ys),128&S){b=void 0;var w=Ys.ref;if(null!==w){var T=Ys.stateNode;Ys.tag,b=T,"function"===typeof w?w(b):w.current=b}}Ys=Ys.nextEffect}}catch(C){if(null===Ys)throw Error(o(330));ju(Ys,C),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Ni(),Rs=i}else e.current=r;if(Js)Js=!1,eu=e,tu=t;else for(Ys=n;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((S=Ys).sibling=null,S.stateNode=null),Ys=t;if(0===(n=e.pendingLanes)&&(Qs=null),1===n?e===ou?au++:(au=0,ou=e):au=0,r=r.stateNode,wi&&"function"===typeof wi.onCommitFiberRoot)try{wi.onCommitFiberRoot(Si,r,void 0,64===(64&r.current.flags))}catch(C){}if(gu(e,Ki()),$s)throw $s=!1,e=Xs,Xs=null,e;return 0!==(8&Rs)||Zi(),null}function Ou(){for(;null!==Ys;){var e=Ys.alternate;du||null===cu||(0!==(8&Ys.flags)?et(Ys,cu)&&(du=!0):13===Ys.tag&&xs(e,Ys)&&et(Ys,cu)&&(du=!0));var t=Ys.flags;0!==(256&t)&&gs(e,Ys),0===(512&t)||Js||(Js=!0,qi(97,(function(){return Pu(),null}))),Ys=Ys.nextEffect}}function Pu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Wi(e,Nu)}return!1}function Mu(e,t){ru.push(t,e),Js||(Js=!0,qi(97,(function(){return Pu(),null})))}function Bu(e,t){nu.push(t,e),Js||(Js=!0,qi(97,(function(){return Pu(),null})))}function Nu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Rs))throw Error(o(331));var t=Rs;Rs|=32;var r=nu;nu=[];for(var n=0;n<r.length;n+=2){var i=r[n],a=r[n+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(l){if(null===a)throw Error(o(330));ju(a,l)}}for(r=ru,ru=[],n=0;n<r.length;n+=2){i=r[n],a=r[n+1];try{var u=i.create;i.destroy=u()}catch(l){if(null===a)throw Error(o(330));ju(a,l)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Rs=t,Zi(),!0}function Uu(e,t,r){da(e,t=fs(0,t=ls(r,t),1)),t=fu(),null!==(e=vu(e,1))&&(Kt(e,1,t),gu(e,t))}function ju(e,t){if(3===e.tag)Uu(e,e,t);else for(var r=e.return;null!==r;){if(3===r.tag){Uu(r,e,t);break}if(1===r.tag){var n=r.stateNode;if("function"===typeof r.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Qs||!Qs.has(n))){var i=hs(r,e=ls(t,e),1);if(da(r,i),i=fu(),null!==(r=vu(r,1)))Kt(r,1,i),gu(r,i);else if("function"===typeof n.componentDidCatch&&(null===Qs||!Qs.has(n)))try{n.componentDidCatch(t,e)}catch(a){}break}}r=r.return}}function Hu(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=fu(),e.pingedLanes|=e.suspendedLanes&r,Is===e&&(Ps&r)===r&&(4===Ns||3===Ns&&(62914560&Ps)===Ps&&500>Ki()-Vs?wu(e,0):Ks|=r),gu(e,t)}function Gu(e,t){var r=e.stateNode;null!==r&&r.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===zi()?1:2:(0===uu&&(uu=js),0===(t=Ht(62914560&~uu))&&(t=4194304))),r=fu(),null!==(e=vu(e,t))&&(Kt(e,t,r),gu(e,r))}function Ku(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function zu(e,t,r,n){return new Ku(e,t,r,n)}function Vu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Wu(e,t){var r=e.alternate;return null===r?((r=zu(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function qu(e,t,r,n,i,a){var s=2;if(n=e,"function"===typeof e)Vu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case w:return Zu(r.children,i,a,t);case M:s=8,i|=16;break;case T:s=8,i|=1;break;case C:return(e=zu(12,r,t,8|i)).elementType=C,e.type=C,e.lanes=a,e;case L:return(e=zu(13,r,t,i)).type=L,e.elementType=L,e.lanes=a,e;case F:return(e=zu(19,r,t,i)).elementType=F,e.lanes=a,e;case B:return Yu(r,i,a,t);case N:return(e=zu(24,r,t,i)).elementType=N,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case x:s=9;break e;case k:s=11;break e;case R:s=14;break e;case I:s=16,n=null;break e;case O:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=zu(s,r,t,i)).elementType=e,t.type=n,t.lanes=a,t}function Zu(e,t,r,n){return(e=zu(7,e,n,t)).lanes=r,e}function Yu(e,t,r,n){return(e=zu(23,e,n,t)).elementType=B,e.lanes=r,e}function $u(e,t,r){return(e=zu(6,e,null,t)).lanes=r,e}function Xu(e,t,r){return(t=zu(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qu(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Gt(0),this.expirationTimes=Gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gt(0),this.mutableSourceEagerHydrationData=null}function Ju(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function el(e,t,r,n){var i=t.current,a=fu(),s=hu(i);e:if(r){t:{if($e(r=r._reactInternals)!==r||1!==r.tag)throw Error(o(170));var u=r;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(mi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===r.tag){var l=r.type;if(mi(l)){r=bi(r,l,u);break e}}r=u}else r=fi;return null===t.context?t.context=r:t.pendingContext=r,(t=ca(a,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),da(i,t),pu(i,s,a),s}function tl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function rl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function nl(e,t){rl(e,t),(e=e.alternate)&&rl(e,t)}function il(e,t,r){var n=null!=r&&null!=r.hydrationOptions&&r.hydrationOptions.mutableSources||null;if(r=new Qu(e,t,null!=r&&!0===r.hydrate),t=zu(3,null,null,2===t?7:1===t?3:0),r.current=t,t.stateNode=r,ua(t),e[ei]=r.current,Rn(8===e.nodeType?e.parentNode:e),n)for(e=0;e<n.length;e++){var i=(t=n[e])._getVersion;i=i(t._source),null==r.mutableSourceEagerHydrationData?r.mutableSourceEagerHydrationData=[t,i]:r.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=r}function al(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ol(e,t,r,n,i){var a=r._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tl(o);s.call(e)}}el(t,o,e,i)}else{if(a=r._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new il(e,0,t?{hydrate:!0}:void 0)}(r,n),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tl(o);u.call(e)}}_u((function(){el(t,o,e,i)}))}return tl(o)}function sl(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!al(t))throw Error(o(200));return Ju(e,t,null,r)}Zs=function(e,t,r){var n=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Bo=!0;else{if(0===(r&n)){switch(Bo=!1,t.tag){case 3:qo(t),qa();break;case 5:Pa(t);break;case 1:mi(t.type)&&_i(t);break;case 4:Ia(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var i=t.type._context;di(Qi,i._currentValue),i._currentValue=n;break;case 13:if(null!==t.memoizedState)return 0!==(r&t.child.childLanes)?Qo(e,t,r):(di(Ba,1&Ba.current),null!==(t=as(e,t,r))?t.sibling:null);di(Ba,1&Ba.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(64&e.flags)){if(n)return is(e,t,r);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),di(Ba,Ba.current),n)break;return null;case 23:case 24:return t.lanes=0,Go(e,t,r)}return as(e,t,r)}Bo=0!==(16384&e.flags)}else Bo=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=gi(t,hi.current),aa(t,r),i=oo(null,t,n,e,i,r),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(n)){var a=!0;_i(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var s=n.getDerivedStateFromProps;"function"===typeof s&&ga(t,n,s,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,_a(t,n,e,r),t=Wo(null,t,n,!0,a,r)}else t.tag=0,No(null,t,i,r),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Vu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===R)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=zo(null,t,i,e,r);break e;case 1:t=Vo(null,t,i,e,r);break e;case 11:t=Uo(null,t,i,e,r);break e;case 14:t=jo(null,t,i,Xi(i.type,e),n,r);break e}throw Error(o(306,i,""))}return t;case 0:return n=t.type,i=t.pendingProps,zo(e,t,n,i=t.elementType===n?i:Xi(n,i),r);case 1:return n=t.type,i=t.pendingProps,Vo(e,t,n,i=t.elementType===n?i:Xi(n,i),r);case 3:if(qo(t),n=t.updateQueue,null===e||null===n)throw Error(o(282));if(n=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,la(e,t),ha(t,n,null,r),(n=t.memoizedState.element)===i)qa(),t=as(e,t,r);else{if((a=(i=t.stateNode).hydrate)&&(ja=Zn(t.stateNode.containerInfo.firstChild),Ua=t,a=Ha=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Za.push(a);for(r=Aa(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|1024,r=r.sibling}else No(e,t,n,r),qa();t=t.child}return t;case 5:return Pa(t),null===e&&za(t),n=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,zn(n,i)?s=null:null!==a&&zn(n,a)&&(t.flags|=16),Ko(e,t),No(e,t,s,r),t.child;case 6:return null===e&&za(t),null;case 13:return Qo(e,t,r);case 4:return Ia(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Ca(t,null,n,r):No(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,Uo(e,t,n,i=t.elementType===n?i:Xi(n,i),r);case 7:return No(e,t,t.pendingProps,r),t.child;case 8:case 12:return No(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(di(Qi,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=cn(u,a)?0:0|("function"===typeof n._calculateChangedBits?n._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!pi.current){t=as(e,t,r);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===n&&0!==(c.observedBits&a)){1===u.tag&&((c=ca(-1,r&-r)).tag=2,da(u,c)),u.lanes|=r,null!==(c=u.alternate)&&(c.lanes|=r),ia(u.return,r),l.lanes|=r;break}c=c.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}No(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=(a=t.pendingProps).children,aa(t,r),n=n(i=oa(i,a.unstable_observedBits)),t.flags|=1,No(e,t,n,r),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),jo(e,t,i,a=Xi(i.type,a),n,r);case 15:return Ho(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Xi(n,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(n)?(e=!0,_i(t)):e=!1,aa(t,r),Ea(t,n,i),_a(t,n,i,r),Wo(null,t,n,!0,e,r);case 19:return is(e,t,r);case 23:case 24:return Go(e,t,r)}throw Error(o(156,t.tag))},il.prototype.render=function(e){el(e,this._internalRoot,null,null)},il.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;el(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,fu()),nl(e,4))},rt=function(e){13===e.tag&&(pu(e,67108864,fu()),nl(e,67108864))},nt=function(e){if(13===e.tag){var t=fu(),r=hu(e);pu(e,r,t),nl(e,r)}},it=function(e,t){return t()},Ae=function(e,t,r){switch(t){case"input":if(re(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=ai(n);if(!i)throw Error(o(90));X(n),re(n,i)}}}break;case"textarea":le(e,r);break;case"select":null!=(t=r.value)&&oe(e,!!r.multiple,t,!1)}},Ie=bu,Oe=function(e,t,r,n,i){var a=Rs;Rs|=4;try{return Wi(98,e.bind(null,t,r,n,i))}finally{0===(Rs=a)&&(qs(),Zi())}},Pe=function(){0===(49&Rs)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,gu(e,Ki())}))}Zi()}(),Pu())},Me=function(e,t){var r=Rs;Rs|=2;try{return e(t)}finally{0===(Rs=r)&&(qs(),Zi())}};var ul={Events:[ni,ii,ai,Fe,Re,Pu,{current:!1}]},ll={findFiberByHostInstance:ri,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cl={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dl.isDisabled&&dl.supportsFiber)try{Si=dl.inject(cl),wi=dl}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ul,t.createPortal=sl,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var r=Rs;if(0!==(48&r))return e(t);Rs|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Rs=r,Zi()}},t.hydrate=function(e,t,r){if(!al(t))throw Error(o(200));return ol(null,e,t,!0,r)},t.render=function(e,t,r){if(!al(t))throw Error(o(200));return ol(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!al(e))throw Error(o(40));return!!e._reactRootContainer&&(_u((function(){ol(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=bu,t.unstable_createPortal=function(e,t){return sl(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!al(r))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ol(e,t,r,!1,n)},t.version="17.0.2"},1168:function(e,t,r){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(534)},1624:function(e,t){"use strict";var r="function"===typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,c=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,m=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,E=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case d:case a:case s:case o:case h:return e;default:switch(e=e&&e.$$typeof){case l:case f:case g:case v:case u:return e;default:return t}}case i:return t}}}function D(e){return _(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=u,t.Element=n,t.ForwardRef=f,t.Fragment=a,t.Lazy=g,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=h,t.isAsyncMode=function(e){return D(e)||_(e)===c},t.isConcurrentMode=D,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return _(e)===f},t.isFragment=function(e){return _(e)===a},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===v},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===d||e===s||e===o||e===h||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===v||e.$$typeof===u||e.$$typeof===l||e.$$typeof===f||e.$$typeof===y||e.$$typeof===E||e.$$typeof===b||e.$$typeof===m)},t.typeOf=_},6214:function(e,t,r){"use strict";e.exports=r(1624)},5918:function(e,t,r){"use strict";r(1843);var n=r(7313),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var n,a={},l=null,c=null;for(n in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,n)&&!u.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:o.current}}t.jsx=l,t.jsxs=l},306:function(e,t,r){"use strict";var n=r(1843),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var l=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;i=d("react.element"),a=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),o=d("react.provider"),s=d("react.context"),u=d("react.forward_ref"),t.Suspense=d("react.suspense"),l=d("react.memo"),c=d("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function g(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||p}function m(){}function y(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(h(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=g.prototype;var E=y.prototype=new m;E.constructor=y,n(E,g.prototype),E.isPureReactComponent=!0;var b={current:null},_=Object.prototype.hasOwnProperty,D={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var n,a={},o=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,n)&&!D.hasOwnProperty(n)&&(a[n]=t[n]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(n in u=e.defaultProps)void 0===a[n]&&(a[n]=u[n]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:b.current}}function w(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,r,n,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===n?"."+C(u,0):n,Array.isArray(o)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),A(o,t,r,"",(function(e){return e}))):null!=o&&(w(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=n+C(s=e[l],l);u+=A(s,t,r,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=A(s=s.value,t,r,c=n+C(s,l++),o);else if("object"===s)throw t=""+e,Error(h(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function x(e,t,r){if(null==e)return e;var n=[],i=0;return A(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function k(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var L={current:null};function F(){var e=L.current;if(null===e)throw Error(h(321));return e}var R={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:x,forEach:function(e,t,r){x(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return x(e,(function(){t++})),t},toArray:function(e){return x(e,(function(e){return e}))||[]},only:function(e){if(!w(e))throw Error(h(143));return e}},t.Component=g,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error(h(267,e));var a=n({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!D.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=w,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return F().useCallback(e,t)},t.useContext=function(e,t){return F().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return F().useEffect(e,t)},t.useImperativeHandle=function(e,t,r){return F().useImperativeHandle(e,t,r)},t.useLayoutEffect=function(e,t){return F().useLayoutEffect(e,t)},t.useMemo=function(e,t){return F().useMemo(e,t)},t.useReducer=function(e,t,r){return F().useReducer(e,t,r)},t.useRef=function(e){return F().useRef(e)},t.useState=function(e){return F().useState(e)},t.version="17.0.2"},7313:function(e,t,r){"use strict";e.exports=r(306)},6417:function(e,t,r){"use strict";e.exports=r(5918)},8937:function(e){var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(F){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),o=new x(n||[]);return a._invoke=function(e,t,r){var n=d;return function(i,a){if(n===h)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw a;return L()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=T(o,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=c(e,t,r);if("normal"===u.type){if(n=r.done?p:f,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}(e,r,o),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(F){return{type:"throw",arg:F}}}e.wrap=l;var d="suspendedStart",f="suspendedYield",h="executing",p="completed",v={};function g(){}function m(){}function y(){}var E={};u(E,a,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(k([])));_&&_!==r&&n.call(_,a)&&(E=_);var D=y.prototype=g.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"===typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function T(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=c(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function k(e){if(e){var r=e[a];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:L}}function L(){return{value:t,done:!0}}return m.prototype=y,u(D,"constructor",y),u(y,"constructor",m),m.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(D),e},e.awrap=function(e){return{__await:e}},S(w.prototype),u(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new w(l(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(D),u(D,s,"Generator"),u(D,a,(function(){return this})),u(D,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=k,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;A(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(r){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},3095:function(e,t){"use strict";var r,n,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,c=null,d=function e(){if(null!==l)try{var r=t.unstable_now();l(!0,r),l=null}catch(n){throw setTimeout(e,0),n}};r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(d,0))},n=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,h=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,g=null,m=-1,y=5,E=0;t.unstable_shouldYield=function(){return t.unstable_now()>=E},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,_=b.port2;b.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();E=e+y;try{g(!0,e)?_.postMessage(null):(v=!1,g=null)}catch(r){throw _.postMessage(null),r}}else v=!1},r=function(e){g=e,v||(v=!0,_.postMessage(null))},n=function(e,r){m=f((function(){e(t.unstable_now())}),r)},i=function(){h(m),m=-1}}function D(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,i=e[n];if(!(void 0!==i&&0<T(i,t)))break e;e[n]=t,e[r]=i,r=n}}function S(e){return void 0===(e=e[0])?null:e}function w(e){var t=e[0];if(void 0!==t){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length;n<i;){var a=2*(n+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>T(o,r))void 0!==u&&0>T(u,o)?(e[n]=u,e[s]=r,n=s):(e[n]=o,e[a]=r,n=a);else{if(!(void 0!==u&&0>T(u,r)))break e;e[n]=u,e[s]=r,n=s}}}return t}return null}function T(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}var C=[],A=[],x=1,k=null,L=3,F=!1,R=!1,I=!1;function O(e){for(var t=S(A);null!==t;){if(null===t.callback)w(A);else{if(!(t.startTime<=e))break;w(A),t.sortIndex=t.expirationTime,D(C,t)}t=S(A)}}function P(e){if(I=!1,O(e),!R)if(null!==S(C))R=!0,r(M);else{var t=S(A);null!==t&&n(P,t.startTime-e)}}function M(e,r){R=!1,I&&(I=!1,i()),F=!0;var a=L;try{for(O(r),k=S(C);null!==k&&(!(k.expirationTime>r)||e&&!t.unstable_shouldYield());){var o=k.callback;if("function"===typeof o){k.callback=null,L=k.priorityLevel;var s=o(k.expirationTime<=r);r=t.unstable_now(),"function"===typeof s?k.callback=s:k===S(C)&&w(C),O(r)}else w(C);k=S(C)}if(null!==k)var u=!0;else{var l=S(A);null!==l&&n(P,l.startTime-r),u=!1}return u}finally{k=null,L=a,F=!1}}var B=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||F||(R=!0,r(M))},t.unstable_getCurrentPriorityLevel=function(){return L},t.unstable_getFirstCallbackNode=function(){return S(C)},t.unstable_next=function(e){switch(L){case 1:case 2:case 3:var t=3;break;default:t=L}var r=L;L=t;try{return e()}finally{L=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=L;L=e;try{return t()}finally{L=r}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:x++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,D(A,e),null===S(C)&&e===S(A)&&(I?i():I=!0,n(P,o-s))):(e.sortIndex=u,D(C,e),R||F||(R=!0,r(M))),e},t.unstable_wrapCallback=function(e){var t=L;return function(){var r=L;L=t;try{return e.apply(this,arguments)}finally{L=r}}}},2224:function(e,t,r){"use strict";e.exports=r(3095)},4796:function(e,t,r){"use strict";var n=r(319).default,i=r(4575).default,a=r(3913).default;t.Vv=void 0,t.Vv=function(e){var t,r=function(e){for(var t=0,r=[/}\('(.*)', *(\d+|\[\]), *(\d+), *'(.*)'\.split\('\|'\), *(\d+), *(.*)\)\)/,/}\('(.*)', *(\d+|\[\]), *(\d+), *'(.*)'\.split\('\|'\)/];t<r.length;t++){var n=r[t].exec(e);if(n){var i=n;i[2];try{return{payload:i[1],symtab:i[4].split("|"),radix:parseInt(i[2]),count:parseInt(i[3])}}catch(a){throw Error("Corrupted p.a.c.k.e.r. data.")}}}throw Error("Could not make sense of p.a.c.k.e.r data (unexpected code structure)")}(e),n=r.payload,i=r.symtab,a=r.radix;if(r.count!=i.length)throw Error("Malformed p.a.c.k.e.r. symtab.");try{t=new o(a)}catch(s){throw Error("Unknown p.a.c.k.e.r. encoding.")}return e=n.replace(/\b\w+\b/g,(function(e){var r=e;return(1==a?i[parseInt(r)]:i[t.unbase(r)])||r}))};var o=function(){function e(t){var r=this;if(i(this,e),this.ALPHABET={62:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",95:"' !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~'"},this.dictionary={},this.base=t,36<t&&t<62&&(this.ALPHABET[t]=this.ALPHABET[t]||this.ALPHABET[62].substr(0,t)),2<=t&&t<=36)this.unbase=function(e){return parseInt(e,t)};else{try{n(this.ALPHABET[t]).forEach((function(e,t){r.dictionary[e]=t}))}catch(a){throw Error("Unsupported base encoding.")}this.unbase=this._dictunbaser}}return a(e,[{key:"_dictunbaser",value:function(e){var t=this,r=0;return n(e).reverse().forEach((function(e,n){r+=Math.pow(t.base,n)*t.dictionary[e]})),r}}]),e}()},2480:function(){},907:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{Z:function(){return n}})},5861:function(e,t,r){"use strict";function n(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void r(l)}s.done?t(u):Promise.resolve(u).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,u,"next",e)}function u(e){n(o,i,a,s,u,"throw",e)}s(void 0)}))}}r.d(t,{Z:function(){return i}})},7762:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(181);function i(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=(0,n.Z)(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}},4942:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:function(){return n}})},1413:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(4942);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},885:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(181);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==r.return||r.return()}finally{if(s)throw i}}return a}}(e,t)||(0,n.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(907);function i(e,t){if(e){if("string"===typeof e)return(0,n.Z)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,n.Z)(e,t):void 0}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var __webpack_exports__={};!function(){"use strict";var e=__webpack_require__(7313),t=__webpack_require__(1168);function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function a(e){return"/"===e.charAt(0)}function o(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}var s=function(e,t){void 0===t&&(t="");var r,n=e&&e.split("/")||[],i=t&&t.split("/")||[],s=e&&a(e),u=t&&a(t),l=s||u;if(e&&a(e)?i=n:n.length&&(i.pop(),i=i.concat(n)),!i.length)return"/";if(i.length){var c=i[i.length-1];r="."===c||".."===c||""===c}else r=!1;for(var d=0,f=i.length;f>=0;f--){var h=i[f];"."===h?o(i,f):".."===h?(o(i,f),d++):d&&(o(i,f),d--)}if(!l)for(;d--;d)i.unshift("..");!l||""===i[0]||i[0]&&a(i[0])||i.unshift("");var p=i.join("/");return r&&"/"!==p.substr(-1)&&(p+="/"),p};function u(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var l=function e(t,r){if(t===r)return!0;if(null==t||null==r)return!1;if(Array.isArray(t))return Array.isArray(r)&&t.length===r.length&&t.every((function(t,n){return e(t,r[n])}));if("object"===typeof t||"object"===typeof r){var n=u(t),i=u(r);return n!==t||i!==r?e(n,i):Object.keys(Object.assign({},t,r)).every((function(n){return e(t[n],r[n])}))}return!1},c="Invariant failed";function d(e,t){if(!e)throw new Error(c)}function f(e){return"/"===e.charAt(0)?e:"/"+e}function h(e){return"/"===e.charAt(0)?e.substr(1):e}function p(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function v(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function g(e){var t=e.pathname,r=e.search,n=e.hash,i=t||"/";return r&&"?"!==r&&(i+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(i+="#"===n.charAt(0)?n:"#"+n),i}function m(e,t,r,n){var a;"string"===typeof e?(a=function(e){var t=e||"/",r="",n="",i=t.indexOf("#");-1!==i&&(n=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(r=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===r?"":r,hash:"#"===n?"":n}}(e),a.state=t):(void 0===(a=i({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(ln){throw ln instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):ln}return r&&(a.key=r),n?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=s(a.pathname,n.pathname)):a.pathname=n.pathname:a.pathname||(a.pathname="/"),a}function y(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,r,n,i){if(null!=e){var a="function"===typeof e?e(t,r):e;"string"===typeof a?"function"===typeof n?n(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var r=!0;function n(){r&&e.apply(void 0,arguments)}return t.push(n),function(){r=!1,t=t.filter((function(e){return e!==n}))}},notifyListeners:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];t.forEach((function(e){return e.apply(void 0,r)}))}}}var E=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(e,t){t(window.confirm(e))}var _="popstate",D="hashchange";function S(){try{return window.history.state||{}}catch(ln){return{}}}function w(e){void 0===e&&(e={}),E||d(!1);var t=window.history,r=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),n=!(-1===window.navigator.userAgent.indexOf("Trident")),a=e,o=a.forceRefresh,s=void 0!==o&&o,u=a.getUserConfirmation,l=void 0===u?b:u,c=a.keyLength,h=void 0===c?6:c,w=e.basename?v(f(e.basename)):"";function T(e){var t=e||{},r=t.key,n=t.state,i=window.location,a=i.pathname+i.search+i.hash;return w&&(a=p(a,w)),m(a,n,r)}function C(){return Math.random().toString(36).substr(2,h)}var A=y();function x(e){i(j,e),j.length=t.length,A.notifyListeners(j.location,j.action)}function k(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||R(T(e.state))}function L(){R(T(S()))}var F=!1;function R(e){if(F)F=!1,x();else{A.confirmTransitionTo(e,"POP",l,(function(t){t?x({action:"POP",location:e}):function(e){var t=j.location,r=O.indexOf(t.key);-1===r&&(r=0);var n=O.indexOf(e.key);-1===n&&(n=0);var i=r-n;i&&(F=!0,M(i))}(e)}))}}var I=T(S()),O=[I.key];function P(e){return w+g(e)}function M(e){t.go(e)}var B=0;function N(e){1===(B+=e)&&1===e?(window.addEventListener(_,k),n&&window.addEventListener(D,L)):0===B&&(window.removeEventListener(_,k),n&&window.removeEventListener(D,L))}var U=!1;var j={length:t.length,action:"POP",location:I,createHref:P,push:function(e,n){var i="PUSH",a=m(e,n,C(),j.location);A.confirmTransitionTo(a,i,l,(function(e){if(e){var n=P(a),o=a.key,u=a.state;if(r)if(t.pushState({key:o,state:u},null,n),s)window.location.href=n;else{var l=O.indexOf(j.location.key),c=O.slice(0,l+1);c.push(a.key),O=c,x({action:i,location:a})}else window.location.href=n}}))},replace:function(e,n){var i="REPLACE",a=m(e,n,C(),j.location);A.confirmTransitionTo(a,i,l,(function(e){if(e){var n=P(a),o=a.key,u=a.state;if(r)if(t.replaceState({key:o,state:u},null,n),s)window.location.replace(n);else{var l=O.indexOf(j.location.key);-1!==l&&(O[l]=a.key),x({action:i,location:a})}else window.location.replace(n)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=A.setPrompt(e);return U||(N(1),U=!0),function(){return U&&(U=!1,N(-1)),t()}},listen:function(e){var t=A.appendListener(e);return N(1),function(){N(-1),t()}}};return j}var T="hashchange",C={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+h(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:h,decodePath:f},slash:{encodePath:f,decodePath:f}};function A(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function x(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function k(e){window.location.replace(A(window.location.href)+"#"+e)}function L(e){void 0===e&&(e={}),E||d(!1);var t=window.history,r=(window.navigator.userAgent.indexOf("Firefox"),e),n=r.getUserConfirmation,a=void 0===n?b:n,o=r.hashType,s=void 0===o?"slash":o,u=e.basename?v(f(e.basename)):"",l=C[s],c=l.encodePath,h=l.decodePath;function _(){var e=h(x());return u&&(e=p(e,u)),m(e)}var D=y();function S(e){i(j,e),j.length=t.length,D.notifyListeners(j.location,j.action)}var w=!1,L=null;function F(){var e=x(),t=c(e);if(e!==t)k(t);else{var r=_(),n=j.location;if(!w&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(n,r))return;if(L===g(r))return;L=null,function(e){if(w)w=!1,S();else{var t="POP";D.confirmTransitionTo(e,t,a,(function(r){r?S({action:t,location:e}):function(e){var t=j.location,r=P.lastIndexOf(g(t));-1===r&&(r=0);var n=P.lastIndexOf(g(e));-1===n&&(n=0);var i=r-n;i&&(w=!0,M(i))}(e)}))}}(r)}}var R=x(),I=c(R);R!==I&&k(I);var O=_(),P=[g(O)];function M(e){t.go(e)}var B=0;function N(e){1===(B+=e)&&1===e?window.addEventListener(T,F):0===B&&window.removeEventListener(T,F)}var U=!1;var j={length:t.length,action:"POP",location:O,createHref:function(e){var t=document.querySelector("base"),r="";return t&&t.getAttribute("href")&&(r=A(window.location.href)),r+"#"+c(u+g(e))},push:function(e,t){var r="PUSH",n=m(e,void 0,void 0,j.location);D.confirmTransitionTo(n,r,a,(function(e){if(e){var t=g(n),i=c(u+t);if(x()!==i){L=t,function(e){window.location.hash=e}(i);var a=P.lastIndexOf(g(j.location)),o=P.slice(0,a+1);o.push(t),P=o,S({action:r,location:n})}else S()}}))},replace:function(e,t){var r="REPLACE",n=m(e,void 0,void 0,j.location);D.confirmTransitionTo(n,r,a,(function(e){if(e){var t=g(n),i=c(u+t);x()!==i&&(L=t,k(i));var a=P.indexOf(g(j.location));-1!==a&&(P[a]=t),S({action:r,location:n})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=D.setPrompt(e);return U||(N(1),U=!0),function(){return U&&(U=!1,N(-1)),t()}},listen:function(e){var t=D.appendListener(e);return N(1),function(){N(-1),t()}}};return j}function F(e,t,r){return Math.min(Math.max(e,t),r)}function R(e){void 0===e&&(e={});var t=e,r=t.getUserConfirmation,n=t.initialEntries,a=void 0===n?["/"]:n,o=t.initialIndex,s=void 0===o?0:o,u=t.keyLength,l=void 0===u?6:u,c=y();function d(e){i(b,e),b.length=b.entries.length,c.notifyListeners(b.location,b.action)}function f(){return Math.random().toString(36).substr(2,l)}var h=F(s,0,a.length-1),p=a.map((function(e){return m(e,void 0,"string"===typeof e?f():e.key||f())})),v=g;function E(e){var t=F(b.index+e,0,b.entries.length-1),n=b.entries[t];c.confirmTransitionTo(n,"POP",r,(function(e){e?d({action:"POP",location:n,index:t}):d()}))}var b={length:p.length,action:"POP",location:p[h],index:h,entries:p,createHref:v,push:function(e,t){var n="PUSH",i=m(e,t,f(),b.location);c.confirmTransitionTo(i,n,r,(function(e){if(e){var t=b.index+1,r=b.entries.slice(0);r.length>t?r.splice(t,r.length-t,i):r.push(i),d({action:n,location:i,index:t,entries:r})}}))},replace:function(e,t){var n="REPLACE",i=m(e,t,f(),b.location);c.confirmTransitionTo(i,n,r,(function(e){e&&(b.entries[b.index]=i,d({action:n,location:i}))}))},go:E,goBack:function(){E(-1)},goForward:function(){E(1)},canGo:function(e){var t=b.index+e;return t>=0&&t<b.entries.length},block:function(e){return void 0===e&&(e=!1),c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return b}var I=__webpack_require__(5192),O=__webpack_require__.n(I),P=1073741823,M="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof __webpack_require__.g?__webpack_require__.g:{};function B(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(r,n){e=r,t.forEach((function(t){return t(e,n)}))}}}var N=e.createContext||function(t,r){var i,a,o="__create-react-context-"+function(){var e="__global_unique_id__";return M[e]=(M[e]||0)+1}()+"__",s=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=B(t.props.value),t}n(t,e);var i=t.prototype;return i.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,n=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,i)?(t="function"===typeof r?r(n,i):P,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},i.render=function(){return this.props.children},t}(e.Component);s.childContextTypes=((i={})[o]=O().object.isRequired,i);var u=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).state={value:t.getValue()},t.onUpdate=function(e,r){0!==((0|t.observedBits)&r)&&t.setState({value:t.getValue()})},t}n(r,e);var i=r.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?P:t},i.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?P:e},i.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},i.getValue=function(){return this.context[o]?this.context[o].get():t},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},r}(e.Component);return u.contextTypes=((a={})[o]=O().object,a),{Provider:s,Consumer:u}},U=N,j=__webpack_require__(4883),H=__webpack_require__.n(j);__webpack_require__(6214);function G(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}__webpack_require__(7861);var K=function(e){var t=U();return t.displayName=e,t},z=K("Router-History"),V=K("Router"),W=function(t){function r(e){var r;return(r=t.call(this,e)||this).state={location:e.history.location},r._isMounted=!1,r._pendingLocation=null,e.staticContext||(r.unlisten=e.history.listen((function(e){r._isMounted?r.setState({location:e}):r._pendingLocation=e}))),r}n(r,t),r.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var i=r.prototype;return i.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},i.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},i.render=function(){return e.createElement(V.Provider,{value:{history:this.props.history,location:this.state.location,match:r.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},e.createElement(z.Provider,{children:this.props.children||null,value:this.props.history}))},r}(e.Component);e.Component;var q=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var r=t.prototype;return r.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},r.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},r.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},r.render=function(){return null},t}(e.Component);var Z={},Y=0;function $(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(Z[e])return Z[e];var t=H().compile(e);return Y<1e4&&(Z[e]=t,Y++),t}(e)(t,{pretty:!0})}function X(t){var r=t.computedMatch,n=t.to,a=t.push,o=void 0!==a&&a;return e.createElement(V.Consumer,null,(function(t){t||d(!1);var a=t.history,s=t.staticContext,u=o?a.push:a.replace,c=m(r?"string"===typeof n?$(n,r.params):i({},n,{pathname:$(n.pathname,r.params)}):n);return s?(u(c),null):e.createElement(q,{onMount:function(){u(c)},onUpdate:function(e,t){var r=m(t.to);(function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&l(e.state,t.state)})(r,i({},c,{key:r.key}))||u(c)},to:n})}))}var Q={},J=0;function ee(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var r=t,n=r.path,i=r.exact,a=void 0!==i&&i,o=r.strict,s=void 0!==o&&o,u=r.sensitive,l=void 0!==u&&u;return[].concat(n).reduce((function(t,r){if(!r&&""!==r)return null;if(t)return t;var n=function(e,t){var r=""+t.end+t.strict+t.sensitive,n=Q[r]||(Q[r]={});if(n[e])return n[e];var i=[],a={regexp:H()(e,i,t),keys:i};return J<1e4&&(n[e]=a,J++),a}(r,{end:a,strict:s,sensitive:l}),i=n.regexp,o=n.keys,u=i.exec(e);if(!u)return null;var c=u[0],d=u.slice(1),f=e===c;return a&&!f?null:{path:r,url:"/"===r&&""===c?"/":c,isExact:f,params:o.reduce((function(e,t,r){return e[t.name]=d[r],e}),{})}}),null)}var te=function(t){function r(){return t.apply(this,arguments)||this}return n(r,t),r.prototype.render=function(){var t=this;return e.createElement(V.Consumer,null,(function(r){r||d(!1);var n=t.props.location||r.location,a=i({},r,{location:n,match:t.props.computedMatch?t.props.computedMatch:t.props.path?ee(n.pathname,t.props):r.match}),o=t.props,s=o.children,u=o.component,l=o.render;return Array.isArray(s)&&function(t){return 0===e.Children.count(t)}(s)&&(s=null),e.createElement(V.Provider,{value:a},a.match?s?"function"===typeof s?s(a):s:u?e.createElement(u,a):l?l(a):null:"function"===typeof s?s(a):null)}))},r}(e.Component);function re(e){return"/"===e.charAt(0)?e:"/"+e}function ne(e,t){if(!e)return t;var r=re(e);return 0!==t.pathname.indexOf(r)?t:i({},t,{pathname:t.pathname.substr(r.length)})}function ie(e){return"string"===typeof e?e:g(e)}function ae(e){return function(){d(!1)}}function oe(){}e.Component;var se=function(t){function r(){return t.apply(this,arguments)||this}return n(r,t),r.prototype.render=function(){var t=this;return e.createElement(V.Consumer,null,(function(r){r||d(!1);var n,a,o=t.props.location||r.location;return e.Children.forEach(t.props.children,(function(t){if(null==a&&e.isValidElement(t)){n=t;var s=t.props.path||t.props.from;a=s?ee(o.pathname,i({},t.props,{path:s})):r.match}})),a?e.cloneElement(n,{location:o,computedMatch:a}):null}))},r}(e.Component);var ue=e.useContext;function le(){return ue(z)}function ce(e){var t=ue(V).location,r=ue(V).match;return e?ee(t.pathname,e):r}e.Component;var de=function(t){function r(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).history=L(e.props),e}return n(r,t),r.prototype.render=function(){return e.createElement(W,{history:this.history,children:this.props.children})},r}(e.Component);var fe=function(e,t){return"function"===typeof e?e(t):e},he=function(e,t){return"string"===typeof e?m(e,null,null,t):e},pe=function(e){return e},ve=e.forwardRef;"undefined"===typeof ve&&(ve=pe);var ge=ve((function(t,r){var n=t.innerRef,a=t.navigate,o=t.onClick,s=G(t,["innerRef","navigate","onClick"]),u=s.target,l=i({},s,{onClick:function(e){try{o&&o(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),a())}});return l.ref=pe!==ve&&r||n,e.createElement("a",l)}));var me=ve((function(t,r){var n=t.component,a=void 0===n?ge:n,o=t.replace,s=t.to,u=t.innerRef,l=G(t,["component","replace","to","innerRef"]);return e.createElement(V.Consumer,null,(function(t){t||d(!1);var n=t.history,c=he(fe(s,t.location),t.location),f=c?n.createHref(c):"",h=i({},l,{href:f,navigate:function(){var e=fe(s,t.location),r=g(t.location)===g(he(e));(o||r?n.replace:n.push)(e)}});return pe!==ve?h.ref=r||u:h.innerRef=u,e.createElement(a,h)}))})),ye=function(e){return e},Ee=e.forwardRef;"undefined"===typeof Ee&&(Ee=ye);Ee((function(t,r){var n=t["aria-current"],a=void 0===n?"page":n,o=t.activeClassName,s=void 0===o?"active":o,u=t.activeStyle,l=t.className,c=t.exact,f=t.isActive,h=t.location,p=t.sensitive,v=t.strict,g=t.style,m=t.to,y=t.innerRef,E=G(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return e.createElement(V.Consumer,null,(function(t){t||d(!1);var n=h||t.location,o=he(fe(m,n),n),b=o.pathname,_=b&&b.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),D=_?ee(n.pathname,{path:_,exact:c,sensitive:p,strict:v}):null,S=!!(f?f(D,n):D),w="function"===typeof l?l(S):l,T="function"===typeof g?g(S):g;S&&(w=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((function(e){return e})).join(" ")}(w,s),T=i({},T,u));var C=i({"aria-current":S&&a||null,className:w,style:T,to:o},E);return ye!==Ee?C.ref=r||y:C.innerRef=y,e.createElement(me,C)}))}));var be=__webpack_require__(1413);function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Se(e,t,r){return t&&De(e.prototype,t),r&&De(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function we(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ae(e,t){if(t&&("object"===Ce(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function xe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ln){return!1}}();return function(){var r,n=Te(e);if(t){var i=Te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ae(this,r)}}var ke,Le=__webpack_require__(6417);!function(e){e.SEARCH="search",e.BOOKMARK="bookmark",e.CLOCK="clock",e.EYE_SLASH="eyeSlash",e.ARROW_LEFT="arrowLeft",e.ARROW_RIGHT="arrowRight",e.CHEVRON_DOWN="chevronDown",e.CHEVRON_RIGHT="chevronRight",e.CLAPPER_BOARD="clapperBoard",e.FILM="film",e.DRAGON="dragon",e.WARNING="warning",e.MOVIE_WEB="movieWeb",e.DISCORD="discord",e.GITHUB="github"}(ke||(ke={}));var Fe={search:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path fill="currentColor" d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"/></svg>',bookmark:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 384 512">\x3c!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path fill="currentColor" d="M384 48V512l-192-112L0 512V48C0 21.5 21.5 0 48 0h288C362.5 0 384 21.5 384 48z"/></svg>',clock:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path fill="currentColor" d="M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z"/></svg>',eyeSlash:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 640 512">\x3c!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path fill="currentColor" d="M150.7 92.77C195 58.27 251.8 32 320 32C400.8 32 465.5 68.84 512.6 112.6C559.4 156 590.7 207.1 605.5 243.7C608.8 251.6 608.8 260.4 605.5 268.3C592.1 300.6 565.2 346.1 525.6 386.7L630.8 469.1C641.2 477.3 643.1 492.4 634.9 502.8C626.7 513.2 611.6 515.1 601.2 506.9L9.196 42.89C-1.236 34.71-3.065 19.63 5.112 9.196C13.29-1.236 28.37-3.065 38.81 5.112L150.7 92.77zM223.1 149.5L313.4 220.3C317.6 211.8 320 202.2 320 191.1C320 180.5 316.1 169.7 311.6 160.4C314.4 160.1 317.2 159.1 320 159.1C373 159.1 416 202.1 416 255.1C416 269.7 413.1 282.7 407.1 294.5L446.6 324.7C457.7 304.3 464 280.9 464 255.1C464 176.5 399.5 111.1 320 111.1C282.7 111.1 248.6 126.2 223.1 149.5zM320 480C239.2 480 174.5 443.2 127.4 399.4C80.62 355.1 49.34 304 34.46 268.3C31.18 260.4 31.18 251.6 34.46 243.7C44 220.8 60.29 191.2 83.09 161.5L177.4 235.8C176.5 242.4 176 249.1 176 255.1C176 335.5 240.5 400 320 400C338.7 400 356.6 396.4 373 389.9L446.2 447.5C409.9 467.1 367.8 480 320 480H320z"/></svg>',arrowLeft:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>',chevronDown:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>',chevronRight:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>',clapperBoard:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path fill="currentColor" d="M326.1 160l127.4-127.4C451.7 32.39 449.9 32 448 32h-86.06l-128 128H326.1zM166.1 160l128-128H201.9l-128 128H166.1zM497.7 56.19L393.9 160H512V96C512 80.87 506.5 67.15 497.7 56.19zM134.1 32H64C28.65 32 0 60.65 0 96v64h6.062L134.1 32zM0 416c0 35.35 28.65 64 64 64h384c35.35 0 64-28.65 64-64V192H0V416z"/></svg>',film:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path fill="currentColor" d="M463.1 32h-416C21.49 32-.0001 53.49-.0001 80v352c0 26.51 21.49 48 47.1 48h416c26.51 0 48-21.49 48-48v-352C511.1 53.49 490.5 32 463.1 32zM111.1 408c0 4.418-3.582 8-8 8H55.1c-4.418 0-8-3.582-8-8v-48c0-4.418 3.582-8 8-8h47.1c4.418 0 8 3.582 8 8L111.1 408zM111.1 280c0 4.418-3.582 8-8 8H55.1c-4.418 0-8-3.582-8-8v-48c0-4.418 3.582-8 8-8h47.1c4.418 0 8 3.582 8 8V280zM111.1 152c0 4.418-3.582 8-8 8H55.1c-4.418 0-8-3.582-8-8v-48c0-4.418 3.582-8 8-8h47.1c4.418 0 8 3.582 8 8L111.1 152zM351.1 400c0 8.836-7.164 16-16 16H175.1c-8.836 0-16-7.164-16-16v-96c0-8.838 7.164-16 16-16h160c8.836 0 16 7.162 16 16V400zM351.1 208c0 8.836-7.164 16-16 16H175.1c-8.836 0-16-7.164-16-16v-96c0-8.838 7.164-16 16-16h160c8.836 0 16 7.162 16 16V208zM463.1 408c0 4.418-3.582 8-8 8h-47.1c-4.418 0-7.1-3.582-7.1-8l0-48c0-4.418 3.582-8 8-8h47.1c4.418 0 8 3.582 8 8V408zM463.1 280c0 4.418-3.582 8-8 8h-47.1c-4.418 0-8-3.582-8-8v-48c0-4.418 3.582-8 8-8h47.1c4.418 0 8 3.582 8 8V280zM463.1 152c0 4.418-3.582 8-8 8h-47.1c-4.418 0-8-3.582-8-8l0-48c0-4.418 3.582-8 7.1-8h47.1c4.418 0 8 3.582 8 8V152z"/></svg>',dragon:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 640 512">\x3c!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path fill="currentColor" d="M18.43 255.8L192 224L100.8 292.6C90.67 302.8 97.8 320 112 320h222.7c-9.499-26.5-14.75-54.5-14.75-83.38V194.2L200.3 106.8C176.5 90.88 145 92.75 123.3 111.2l-117.5 116.4C-6.562 238 2.436 258 18.43 255.8zM575.2 289.9l-100.7-50.25c-16.25-8.125-26.5-24.75-26.5-43V160h63.99l28.12 22.62C546.1 188.6 554.2 192 562.7 192h30.1c11.1 0 23.12-6.875 28.5-17.75l14.37-28.62c5.374-10.87 4.25-23.75-2.999-33.5l-74.49-99.37C552.1 4.75 543.5 0 533.5 0H296C288.9 0 285.4 8.625 290.4 13.62L351.1 64L292.4 88.75c-5.874 3-5.874 11.37 0 14.37L351.1 128l-.0011 108.6c0 72 35.99 139.4 95.99 179.4c-195.6 6.75-344.4 41-434.1 60.88c-8.124 1.75-13.87 9-13.87 17.38C.0463 504 8.045 512 17.79 512h499.1c63.24 0 119.6-47.5 122.1-110.8C642.3 354 617.1 310.9 575.2 289.9zM489.1 66.25l45.74 11.38c-2.75 11-12.5 18.88-24.12 18.25C497.7 95.25 484.8 83.38 489.1 66.25z"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-triangle"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>',movieWeb:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20.927 20.927"><path d="M18.186,4.5V6.241H16.445V4.5H9.482V6.241H7.741V4.5H6V20.168H7.741V18.427H9.482v1.741h6.964V18.427h1.741v1.741h1.741V4.5Zm-8.7,12.186H7.741V14.945H9.482Zm0-3.482H7.741V11.464H9.482Zm0-3.482H7.741V7.982H9.482Zm8.7,6.964H16.445V14.945h1.741Zm0-3.482H16.445V11.464h1.741Zm0-3.482H16.445V7.982h1.741Z" transform="translate(10.018 -7.425) rotate(45)" fill="currentColor"/></svg>',discord:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 640 512">\x3c!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path fill="currentColor" d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"/></svg>',github:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 496 512">\x3c!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>'};function Re(e){return(0,Le.jsx)("span",{dangerouslySetInnerHTML:{__html:Fe[e.icon]},className:e.className})}function Ie(e){return(0,Le.jsx)("div",{className:e.className||void 0,onClick:e.onClick,children:(0,Le.jsx)("div",{className:"bg-denim-300 flex h-12 w-12 items-center justify-center rounded-full border-2 border-transparent transition-[color,transform,border-color] duration-75 ".concat(e.clickable?"hover:bg-denim-400 m-2 cursor-pointer hover:scale-110 hover:text-white active:scale-125":""," ").concat(e.active?"text-bink-600 border-bink-600 bg-bink-100":""),children:(0,Le.jsx)(Re,{icon:e.icon})})})}function Oe(e){var t=!!e.url,r=!!e.to,n=(0,Le.jsx)("span",{className:"text-bink-600 hover:text-bink-700 cursor-pointer font-bold",children:e.children});return t?(0,Le.jsx)("a",{target:e.newTab?"_blank":void 0,rel:"noreferrer",href:e.url,children:n}):r?(0,Le.jsx)(me,{to:e.to,children:n}):(0,Le.jsx)("span",{onClick:function(){return e.onClick&&e.onClick()},children:n})}function Pe(e){return(0,Le.jsx)("h1",{className:"text-4xl font-bold text-white",children:e.children})}var Me=__webpack_require__(1538),Be=function(e){we(r,e);var t=xe(r);function r(e){var n;return _e(this,r),(n=t.call(this,e)).state={hasError:!1},n}return Se(r,[{key:"componentDidCatch",value:function(e,t){if(console.error("Render error caught",e,t),e instanceof Error){var r=e;this.setState((function(e){return(0,be.Z)((0,be.Z)({},e),{},{hasError:!0,error:{name:r.name,description:r.message,path:t.componentStack.split("\n")[1]}})}))}}},{key:"render",value:function(){return this.state.hasError?(0,Le.jsxs)("div",{className:"flex min-h-screen w-full flex-col items-center justify-center px-4 py-12",children:[(0,Le.jsxs)("div",{className:"flex flex-col items-center justify-start text-center",children:[(0,Le.jsx)(Ie,{icon:ke.WARNING,className:"mb-6 text-red-400"}),(0,Le.jsx)(Pe,{children:"Whoops, it broke"}),(0,Le.jsxs)("p",{className:"my-6 max-w-lg",children:["The app encountered an error and wasn't able to recover, please report it to the"," ",(0,Le.jsx)(Oe,{url:Me.Hj,newTab:!0,children:"Discord server"})," ","or on"," ",(0,Le.jsx)(Oe,{url:Me.$t,newTab:!0,children:"GitHub"}),"."]})]}),this.state.error?(0,Le.jsxs)("div",{className:"w-4xl mt-12 max-w-full rounded bg-denim-300 px-6 py-4",children:[(0,Le.jsxs)("p",{className:"mb-1 break-words font-bold text-white",children:[this.state.error.name," - ",this.state.error.description]}),(0,Le.jsx)("p",{className:"break-words",children:this.state.error.path})]}):null]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),r}(e.Component),Ne=__webpack_require__(5861),Ue=__webpack_require__(7757),je=__webpack_require__.n(Ue),He=__webpack_require__(7762),Ge=__webpack_require__(3325);function Ke(e){var t=new URLSearchParams;return t.append("search",e.searchQuery),fetch(Me.Fx+function(e,t){return"https://theflix.to/".concat(e,"/trending?").concat(t)}(e.type===Ge._.MOVIE?"movies":"tv-shows",t)).then((function(e){return e.text()}))}function ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=Array.from((new DOMParser).parseFromString(e,"text/html").querySelectorAll('script[id="__NEXT_DATA__"]'))[0],n=JSON.parse(r.innerHTML);return n.props.pageProps.mainList.docs.filter((function(e){return e.available})).slice(0,t)}var Ve=function(e,t){return e.mediaType===Ge._.MOVIE?"https://theflix.to/movie/".concat(e.mediaId,"?").concat(t):e.mediaType===Ge._.SERIES?"https://theflix.to/tv-show/".concat(e.mediaId,"/season-").concat(e.seasonId,"/episode-").concat(e.episodeId):""};function We(e){return qe.apply(this,arguments)}function qe(){return(qe=(0,Ne.Z)(je().mark((function e(t){var r,n,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new URLSearchParams).append("movieInfo",t.mediaId),e.next=4,fetch(Me.Fx+Ve(t,r)).then((function(e){return e.text()}));case 4:if(n=e.sent,i=Array.from((new DOMParser).parseFromString(n,"text/html").querySelectorAll('script[id="__NEXT_DATA__"]'))[0],t.mediaType!==Ge._.MOVIE){e.next=8;break}return e.abrupt("return",JSON.parse(i.innerHTML).props.pageProps.movie);case 8:return e.abrupt("return",JSON.parse(i.innerHTML).props.pageProps.selectedTv);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ze={id:"theflix",enabled:!1,type:[Ge._.MOVIE,Ge._.SERIES],displayName:"theflix",getMediaFromPortable:function(e){return(0,Ne.Z)(je().mark((function t(){var r;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,We(e);case 2:return r=t.sent,t.abrupt("return",(0,be.Z)((0,be.Z)({},e),{},{year:new Date(r.releaseDate).getFullYear().toString(),title:r.name}));case 4:case"end":return t.stop()}}),t)})))()},searchForMedia:function(e){return(0,Ne.Z)(je().mark((function t(){var r,n,i,a,o,s;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ke(e);case 2:return r=t.sent,t.next=5,ze(r,10);case 5:n=t.sent,i=[],a=(0,He.Z)(n);try{for(a.s();!(o=a.n()).done;)s=o.value,i.push({mediaId:"".concat((u=s).id,"-").concat(u.name.replace(/[^a-z0-9]+|\s+/gim," ").trim().replace(/\s+/g,"-").toLowerCase()),title:u.name,year:new Date(u.releaseDate).getFullYear().toString(),seasonCount:u.numberOfSeasons,episodeId:u.lastReleasedEpisode?u.lastReleasedEpisode.episodeNumber.toString():null,seasonId:u.lastReleasedEpisode?u.lastReleasedEpisode.seasonNumber.toString():null})}catch(l){a.e(l)}finally{a.f()}return t.abrupt("return",i);case 10:case"end":return t.stop()}var u}),t)})))()},getStream:function(e){return(0,Ne.Z)(je().mark((function t(){var r,n,i,a;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="",e.mediaType===Ge._.MOVIE?r="".concat(Me.Fx,"https://theflix.to/movie/").concat(e.mediaId,"?movieInfo=").concat(e.mediaId):e.mediaType===Ge._.SERIES&&(r="".concat(Me.Fx,"https://theflix.to/tv-show/").concat(e.mediaId,"/season-").concat(e.seasonId,"/episode-").concat(e.episodeId)),t.next=4,fetch(r).then((function(e){return e.text()}));case 4:if(n=t.sent,(i=Array.from((new DOMParser).parseFromString(n,"text/html").querySelectorAll("script")).find((function(e){var t;return null===(t=e.textContent)||void 0===t?void 0:t.includes("theflixvd.b-cdn")})))&&i.textContent){t.next=8;break}throw new Error("Could not find stream");case 8:return a=JSON.parse(i.textContent),t.abrupt("return",{url:a.props.pageProps.videoUrl,type:"mp4",captions:[]});case 10:case"end":return t.stop()}}),t)})))()},getSeasonDataFromMedia:function(e){return(0,Ne.Z)(je().mark((function t(){var r,n,i,a;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(Me.Fx,"https://theflix.to/tv-show/").concat(e.mediaId,"/season-").concat(e.seasonId,"/episode-").concat(e.episodeId),t.next=3,fetch(r).then((function(e){return e.text()}));case 3:return n=t.sent,i=Array.from((new DOMParser).parseFromString(n,"text/html").querySelectorAll('script[id="__NEXT_DATA__"]'))[0],a=(a=(a=JSON.parse(i.innerHTML).props.pageProps.selectedTv.seasons).filter((function(e){return null!=e.releaseDate}))).map((function(e){var t=e.episodes.filter((function(e){return null!=e.releaseDate}));return(0,be.Z)((0,be.Z)({},e),{},{episodes:t})})),t.abrupt("return",{seasons:a.map((function(e){return{sort:0===e.seasonNumber?999:e.seasonNumber,id:e.seasonNumber.toString(),type:0===e.seasonNumber?"special":"season",title:e.name,episodes:e.episodes.map((function(e){return{title:e.name,sort:e.episodeNumber,id:e.episodeNumber.toString(),episodeNumber:e.episodeNumber}}))}}))});case 9:case"end":return t.stop()}}),t)})))()}},Ye=__webpack_require__(778),$e=function(){function e(){_e(this,e),this.INTERVAL_MS=12e4,this._interval=null,this._compare=null,this._storage=[]}return Se(e,[{key:"initialize",value:function(){var e=this;if(this._interval)throw new Error("cache is already initialized");this._interval=setInterval((function(){var t=new Date;e._storage.filter((function(e){return!(e.expiry<t)}))}),this.INTERVAL_MS)}},{key:"destroy",value:function(){this._interval&&clearInterval(this._interval),this.clear()}},{key:"setCompare",value:function(e){this._compare=e}},{key:"has",value:function(e){return!!this.get(e)}},{key:"get",value:function(e){var t=this;if(!this._compare)throw new Error("Compare function not set");var r=this._storage.find((function(r){return t._compare&&t._compare(r.key,e)}));if(r)return r.value}},{key:"set",value:function(e,t,r){var n=this;if(!this._compare)throw new Error("Compare function not set");var i=this._storage.find((function(t){return n._compare&&n._compare(t.key,e)})),a=new Date((new Date).getTime()+1e3*r);if(i)return i.key=e,i.value=t,void(i.expiry=a);this._storage.push({key:e,value:t,expiry:a})}},{key:"remove",value:function(e){var t=this;if(!this._compare)throw new Error("Compare function not set");this._storage.filter((function(r){return!t._compare||!t._compare(r.key,e)}))}},{key:"clear",value:function(){this._storage=[]}}]),e}(),Xe=new $e;Xe.setCompare((function(e,t){return e.mediaId===t.mediaId&&e.providerId===t.providerId})),Xe.initialize();var Qe=Xe;function Je(e){return(0,be.Z)((0,be.Z)({},e),{},{getMediaFromPortable:function(t){return(0,Ne.Z)(je().mark((function r(){var n,i;return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n=Qe.get(t))){r.next=5;break}return n.seasonId=t.seasonId,n.episodeId=t.episodeId,r.abrupt("return",n);case 5:return r.t0=be.Z,r.t1=be.Z,r.t2={},r.next=10,e.getMediaFromPortable(t);case 10:return r.t3=r.sent,r.t4=(0,r.t1)(r.t2,r.t3),r.t5={},r.t6={providerId:e.id,mediaType:t.mediaType},i=(0,r.t0)(r.t4,r.t5,r.t6),Qe.set(t,i,3600),r.abrupt("return",i);case 17:case"end":return r.stop()}}),r)})))()},searchForMedia:function(t){return(0,Ne.Z)(je().mark((function r(){return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.searchForMedia(t);case 2:return r.abrupt("return",r.sent.map((function(r){return(0,be.Z)((0,be.Z)({},r),{},{providerId:e.id,mediaType:t.type})})));case 3:case"end":return r.stop()}}),r)})))()}})}var et=__webpack_require__(4796),tt=__webpack_require__(1692),rt=__webpack_require__.n(tt),nt={id:"gomostream",enabled:!0,type:[Ge._.MOVIE],displayName:"gomostream",getMediaFromPortable:function(e){return(0,Ne.Z)(je().mark((function t(){var r,n;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new URLSearchParams({apikey:Me.ft,i:e.mediaId,type:e.mediaType}),t.next=3,fetch("".concat(Me.Fx,"http://www.omdbapi.com/?").concat(encodeURIComponent(r.toString()))).then((function(e){return e.json()}));case 3:return n=t.sent,t.abrupt("return",(0,be.Z)((0,be.Z)({},e),{},{title:n.Title,year:n.Year}));case 5:case"end":return t.stop()}}),t)})))()},searchForMedia:function(e){return(0,Ne.Z)(je().mark((function t(){var r,n,i,a;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.searchQuery.toLowerCase(),n=new URLSearchParams({apikey:Me.ft,s:r,type:e.type}),t.next=4,fetch("".concat(Me.Fx,"http://www.omdbapi.com/?").concat(encodeURIComponent(n.toString()))).then((function(e){return e.json()}));case 4:return i=t.sent,a=(i.Search||[]).map((function(e){return{title:e.Title,year:e.Year,mediaId:e.imdbID}})),t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))()},getStream:function(e){return(0,Ne.Z)(je().mark((function t(){var r,n,i,a,o,s,u,l,c,d,f,h,p,v,g,m,y,E,b;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.mediaType===Ge._.SERIES?"show":e.mediaType,t.next=3,fetch("".concat(Me.Fx,"https://gomo.to/").concat(a,"/").concat(e.mediaId)).then((function(e){return e.text()}));case 3:if("Movie not available."!==(o=t.sent)&&"Episode not available."!==o){t.next=6;break}throw new Error(o);case 6:return s=(null===(r=o.match(/var tc = '(.+)';/))||void 0===r?void 0:r[1])||"",u=(null===(n=o.match(/"_token": "(.+)",/))||void 0===n?void 0:n[1])||"",(l=new FormData).append("tokenCode",s),l.append("_token",u),t.next=13,fetch("".concat(Me.Fx,"https://gomo.to/decoding_v3.php"),{method:"POST",body:l,headers:{"x-token":"".concat(s.slice(5,13).split("").reverse().join(""),"13574199")}}).then((function(e){return e.json()}));case 13:return c=t.sent,d=c.filter((function(e){return e.includes("gomo.to")})),f=d[1],t.next=18,fetch("".concat(Me.Fx).concat(f)).then((function(e){return e.text()}));case 18:if(h=t.sent,"File was deleted"!==(p=(new DOMParser).parseFromString(h,"text/html")).body.innerText){t.next=22;break}throw new Error("File was deleted");case 22:if(v=null===(i=Array.from(p.querySelectorAll("script")).find((function(e){return e.innerHTML.includes("eval(function(p,a,c,k,e,d")})))||void 0===i?void 0:i.innerHTML,v){t.next=25;break}throw new Error("Could not get packed data");case 25:if(g=(0,et.Vv)(v),m=/sources:(\[.*?\])/.exec(g)){t.next=29;break}throw new Error("Could not get rawSources");case 29:if(y=rt().parse(m[1]),E=y[0].file,"mp4"===(b=E.split(".").at(-1))||"m3u8"===b){t.next=34;break}throw new Error("Unsupported stream type");case 34:return t.abrupt("return",{url:E,type:b,captions:[]});case 35:case"end":return t.stop()}}),t)})))()}},it=__webpack_require__(3897),at=[Je(Ze),Je(Ye.M),Je(nt),Je(it.L)],ot=at.filter((function(e){return e.enabled}));function st(e){return ot.filter((function(t){return t.type.includes(e)}))}function ut(e){return ot.find((function(t){return t.id===e}))}function lt(e){var t=at.find((function(t){return t.id===e}));return t?{exists:!0,type:t.type,enabled:t.enabled,id:e,provider:t}:{exists:!1,type:[],enabled:!1,id:e}}var ct=__webpack_require__(4942),dt=__webpack_require__(907);var ft=__webpack_require__(181);function ht(e){return function(e){if(Array.isArray(e))return(0,dt.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,ft.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e){return Array.isArray?Array.isArray(e):"[object Array]"===_t(e)}function vt(e){return"string"===typeof e}function gt(e){return"number"===typeof e}function mt(e){return!0===e||!1===e||function(e){return yt(e)&&null!==e}(e)&&"[object Boolean]"==_t(e)}function yt(e){return"object"===typeof e}function Et(e){return void 0!==e&&null!==e}function bt(e){return!e.trim().length}function _t(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var Dt=function(e){return"Invalid value for key ".concat(e)},St=function(e){return"Pattern length exceeds max of ".concat(e,".")},wt=Object.prototype.hasOwnProperty,Tt=function(){function e(t){var r=this;_e(this,e),this._keys=[],this._keyMap={};var n=0;t.forEach((function(e){var t=Ct(e);n+=t.weight,r._keys.push(t),r._keyMap[t.id]=t,n+=t.weight})),this._keys.forEach((function(e){e.weight/=n}))}return Se(e,[{key:"get",value:function(e){return this._keyMap[e]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),e}();function Ct(e){var t=null,r=null,n=null,i=1,a=null;if(vt(e)||pt(e))n=e,t=At(e),r=xt(e);else{if(!wt.call(e,"name"))throw new Error(function(e){return"Missing ".concat(e," property in key")}("name"));var o=e.name;if(n=o,wt.call(e,"weight")&&(i=e.weight)<=0)throw new Error(function(e){return"Property 'weight' in key '".concat(e,"' must be a positive integer")}(o));t=At(o),r=xt(o),a=e.getFn}return{path:t,id:r,weight:i,src:n,getFn:a}}function At(e){return pt(e)?e:e.split(".")}function xt(e){return pt(e)?e.join("."):e}var kt={useExtendedSearch:!1,getFn:function(e,t){var r=[],n=!1;return function e(t,i,a){if(Et(t))if(i[a]){var o=t[i[a]];if(!Et(o))return;if(a===i.length-1&&(vt(o)||gt(o)||mt(o)))r.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(o));else if(pt(o)){n=!0;for(var s=0,u=o.length;s<u;s+=1)e(o[s],i,a+1)}else i.length&&e(o,i,a+1)}else r.push(t)}(e,vt(t)?t.split("."):t,0),n?r:r[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},Lt=(0,be.Z)((0,be.Z)((0,be.Z)((0,be.Z)({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(e,t){return e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1}}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),kt),Ft=/[^ ]+/g;function Rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=new Map,n=Math.pow(10,t);return{get:function(t){var i=t.match(Ft).length;if(r.has(i))return r.get(i);var a=1/Math.pow(i,.5*e),o=parseFloat(Math.round(a*n)/n);return r.set(i,o),o},clear:function(){r.clear()}}}var It=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.getFn,n=void 0===r?Lt.getFn:r,i=t.fieldNormWeight,a=void 0===i?Lt.fieldNormWeight:i;_e(this,e),this.norm=Rt(a,3),this.getFn=n,this.isCreated=!1,this.setIndexRecords()}return Se(e,[{key:"setSources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}},{key:"setIndexRecords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}},{key:"setKeys",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=t,this._keysMap={},t.forEach((function(t,r){e._keysMap[t.id]=r}))}},{key:"create",value:function(){var e=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,vt(this.docs[0])?this.docs.forEach((function(t,r){e._addString(t,r)})):this.docs.forEach((function(t,r){e._addObject(t,r)})),this.norm.clear())}},{key:"add",value:function(e){var t=this.size();vt(e)?this._addString(e,t):this._addObject(e,t)}},{key:"removeAt",value:function(e){this.records.splice(e,1);for(var t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}},{key:"getValueForItemAtKeyId",value:function(e,t){return e[this._keysMap[t]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(e,t){if(Et(e)&&!bt(e)){var r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}}},{key:"_addObject",value:function(e,t){var r=this,n={i:t,$:{}};this.keys.forEach((function(t,i){var a=t.getFn?t.getFn(e):r.getFn(e,t.path);if(Et(a))if(pt(a))!function(){for(var e=[],t=[{nestedArrIndex:-1,value:a}];t.length;){var o=t.pop(),s=o.nestedArrIndex,u=o.value;if(Et(u))if(vt(u)&&!bt(u)){var l={v:u,i:s,n:r.norm.get(u)};e.push(l)}else pt(u)&&u.forEach((function(e,r){t.push({nestedArrIndex:r,value:e})}))}n.$[i]=e}();else if(!bt(a)){var o={v:a,n:r.norm.get(a)};n.$[i]=o}})),this.records.push(n)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),e}();function Ot(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.getFn,i=void 0===n?Lt.getFn:n,a=r.fieldNormWeight,o=void 0===a?Lt.fieldNormWeight:a,s=new It({getFn:i,fieldNormWeight:o});return s.setKeys(e.map(Ct)),s.setSources(t),s.create(),s}function Pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.errors,n=void 0===r?0:r,i=t.currentLocation,a=void 0===i?0:i,o=t.expectedLocation,s=void 0===o?0:o,u=t.distance,l=void 0===u?Lt.distance:u,c=t.ignoreLocation,d=void 0===c?Lt.ignoreLocation:c,f=n/e.length;if(d)return f;var h=Math.abs(s-a);return l?f+h/l:h?1:f}function Mt(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt.minMatchCharLength,r=[],n=-1,i=-1,a=0,o=e.length;a<o;a+=1){var s=e[a];s&&-1===n?n=a:s||-1===n||((i=a-1)-n+1>=t&&r.push([n,i]),n=-1)}return e[a-1]&&a-n>=t&&r.push([n,a-1]),r}var Bt=32;function Nt(e){for(var t={},r=0,n=e.length;r<n;r+=1){var i=e.charAt(r);t[i]=(t[i]||0)|1<<n-r-1}return t}var Ut=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.location,a=void 0===i?Lt.location:i,o=n.threshold,s=void 0===o?Lt.threshold:o,u=n.distance,l=void 0===u?Lt.distance:u,c=n.includeMatches,d=void 0===c?Lt.includeMatches:c,f=n.findAllMatches,h=void 0===f?Lt.findAllMatches:f,p=n.minMatchCharLength,v=void 0===p?Lt.minMatchCharLength:p,g=n.isCaseSensitive,m=void 0===g?Lt.isCaseSensitive:g,y=n.ignoreLocation,E=void 0===y?Lt.ignoreLocation:y;if(_e(this,e),this.options={location:a,threshold:s,distance:l,includeMatches:d,findAllMatches:h,minMatchCharLength:v,isCaseSensitive:m,ignoreLocation:E},this.pattern=m?t:t.toLowerCase(),this.chunks=[],this.pattern.length){var b=function(e,t){r.chunks.push({pattern:e,alphabet:Nt(e),startIndex:t})},_=this.pattern.length;if(_>Bt){for(var D=0,S=_%Bt,w=_-S;D<w;)b(this.pattern.substr(D,Bt),D),D+=Bt;if(S){var T=_-Bt;b(this.pattern.substr(T),T)}}else b(this.pattern,0)}}return Se(e,[{key:"searchIn",value:function(e){var t=this.options,r=t.isCaseSensitive,n=t.includeMatches;if(r||(e=e.toLowerCase()),this.pattern===e){var i={isMatch:!0,score:0};return n&&(i.indices=[[0,e.length-1]]),i}var a=this.options,o=a.location,s=a.distance,u=a.threshold,l=a.findAllMatches,c=a.minMatchCharLength,d=a.ignoreLocation,f=[],h=0,p=!1;this.chunks.forEach((function(t){var r=t.pattern,i=t.alphabet,a=t.startIndex,v=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.location,a=void 0===i?Lt.location:i,o=n.distance,s=void 0===o?Lt.distance:o,u=n.threshold,l=void 0===u?Lt.threshold:u,c=n.findAllMatches,d=void 0===c?Lt.findAllMatches:c,f=n.minMatchCharLength,h=void 0===f?Lt.minMatchCharLength:f,p=n.includeMatches,v=void 0===p?Lt.includeMatches:p,g=n.ignoreLocation,m=void 0===g?Lt.ignoreLocation:g;if(t.length>Bt)throw new Error(St(Bt));for(var y,E=t.length,b=e.length,_=Math.max(0,Math.min(a,b)),D=l,S=_,w=h>1||v,T=w?Array(b):[];(y=e.indexOf(t,S))>-1;){var C=Pt(t,{currentLocation:y,expectedLocation:_,distance:s,ignoreLocation:m});if(D=Math.min(C,D),S=y+E,w)for(var A=0;A<E;)T[y+A]=1,A+=1}S=-1;for(var x=[],k=1,L=E+b,F=1<<E-1,R=0;R<E;R+=1){for(var I=0,O=L;I<O;){Pt(t,{errors:R,currentLocation:_+O,expectedLocation:_,distance:s,ignoreLocation:m})<=D?I=O:L=O,O=Math.floor((L-I)/2+I)}L=O;var P=Math.max(1,_-O+1),M=d?b:Math.min(_+O,b)+E,B=Array(M+2);B[M+1]=(1<<R)-1;for(var N=M;N>=P;N-=1){var U=N-1,j=r[e.charAt(U)];if(w&&(T[U]=+!!j),B[N]=(B[N+1]<<1|1)&j,R&&(B[N]|=(x[N+1]|x[N])<<1|1|x[N+1]),B[N]&F&&(k=Pt(t,{errors:R,currentLocation:U,expectedLocation:_,distance:s,ignoreLocation:m}))<=D){if(D=k,(S=U)<=_)break;P=Math.max(1,2*_-S)}}if(Pt(t,{errors:R+1,currentLocation:_,expectedLocation:_,distance:s,ignoreLocation:m})>D)break;x=B}var H={isMatch:S>=0,score:Math.max(.001,k)};if(w){var G=Mt(T,h);G.length?v&&(H.indices=G):H.isMatch=!1}return H}(e,r,i,{location:o+a,distance:s,threshold:u,findAllMatches:l,minMatchCharLength:c,includeMatches:n,ignoreLocation:d}),g=v.isMatch,m=v.score,y=v.indices;g&&(p=!0),h+=m,g&&y&&(f=[].concat(ht(f),ht(y)))}));var v={isMatch:p,score:p?h/this.chunks.length:1};return p&&n&&(v.indices=f),v}}]),e}(),jt=function(){function e(t){_e(this,e),this.pattern=t}return Se(e,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(e){return Ht(e,this.multiRegex)}},{key:"isSingleMatch",value:function(e){return Ht(e,this.singleRegex)}}]),e}();function Ht(e,t){var r=e.match(t);return r?r[1]:null}var Gt=function(e){we(r,e);var t=xe(r);function r(e){return _e(this,r),t.call(this,e)}return Se(r,[{key:"search",value:function(e){var t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),r}(jt),Kt=function(e){we(r,e);var t=xe(r);function r(e){return _e(this,r),t.call(this,e)}return Se(r,[{key:"search",value:function(e){var t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),r}(jt),zt=function(e){we(r,e);var t=xe(r);function r(e){return _e(this,r),t.call(this,e)}return Se(r,[{key:"search",value:function(e){var t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),r}(jt),Vt=function(e){we(r,e);var t=xe(r);function r(e){return _e(this,r),t.call(this,e)}return Se(r,[{key:"search",value:function(e){var t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),r}(jt),Wt=function(e){we(r,e);var t=xe(r);function r(e){return _e(this,r),t.call(this,e)}return Se(r,[{key:"search",value:function(e){var t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),r}(jt),qt=function(e){we(r,e);var t=xe(r);function r(e){return _e(this,r),t.call(this,e)}return Se(r,[{key:"search",value:function(e){var t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),r}(jt),Zt=function(e){we(r,e);var t=xe(r);function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.location,o=void 0===a?Lt.location:a,s=i.threshold,u=void 0===s?Lt.threshold:s,l=i.distance,c=void 0===l?Lt.distance:l,d=i.includeMatches,f=void 0===d?Lt.includeMatches:d,h=i.findAllMatches,p=void 0===h?Lt.findAllMatches:h,v=i.minMatchCharLength,g=void 0===v?Lt.minMatchCharLength:v,m=i.isCaseSensitive,y=void 0===m?Lt.isCaseSensitive:m,E=i.ignoreLocation,b=void 0===E?Lt.ignoreLocation:E;return _e(this,r),(n=t.call(this,e))._bitapSearch=new Ut(e,{location:o,threshold:u,distance:c,includeMatches:f,findAllMatches:p,minMatchCharLength:g,isCaseSensitive:y,ignoreLocation:b}),n}return Se(r,[{key:"search",value:function(e){return this._bitapSearch.searchIn(e)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),r}(jt),Yt=function(e){we(r,e);var t=xe(r);function r(e){return _e(this,r),t.call(this,e)}return Se(r,[{key:"search",value:function(e){for(var t,r=0,n=[],i=this.pattern.length;(t=e.indexOf(this.pattern,r))>-1;)r=t+i,n.push([t,r-1]);var a=!!n.length;return{isMatch:a,score:a?0:1,indices:n}}}],[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),r}(jt),$t=[Gt,Yt,zt,Vt,qt,Wt,Kt,Zt],Xt=$t.length,Qt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;function Jt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map((function(e){for(var r=e.trim().split(Qt).filter((function(e){return e&&!!e.trim()})),n=[],i=0,a=r.length;i<a;i+=1){for(var o=r[i],s=!1,u=-1;!s&&++u<Xt;){var l=$t[u],c=l.isMultiMatch(o);c&&(n.push(new l(c,t)),s=!0)}if(!s)for(u=-1;++u<Xt;){var d=$t[u],f=d.isSingleMatch(o);if(f){n.push(new d(f,t));break}}}return n}))}var er=new Set([Zt.type,Yt.type]),tr=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.isCaseSensitive,i=void 0===n?Lt.isCaseSensitive:n,a=r.includeMatches,o=void 0===a?Lt.includeMatches:a,s=r.minMatchCharLength,u=void 0===s?Lt.minMatchCharLength:s,l=r.ignoreLocation,c=void 0===l?Lt.ignoreLocation:l,d=r.findAllMatches,f=void 0===d?Lt.findAllMatches:d,h=r.location,p=void 0===h?Lt.location:h,v=r.threshold,g=void 0===v?Lt.threshold:v,m=r.distance,y=void 0===m?Lt.distance:m;_e(this,e),this.query=null,this.options={isCaseSensitive:i,includeMatches:o,minMatchCharLength:u,findAllMatches:f,ignoreLocation:c,location:p,threshold:g,distance:y},this.pattern=i?t:t.toLowerCase(),this.query=Jt(this.pattern,this.options)}return Se(e,[{key:"searchIn",value:function(e){var t=this.query;if(!t)return{isMatch:!1,score:1};var r=this.options,n=r.includeMatches;e=r.isCaseSensitive?e:e.toLowerCase();for(var i=0,a=[],o=0,s=0,u=t.length;s<u;s+=1){var l=t[s];a.length=0,i=0;for(var c=0,d=l.length;c<d;c+=1){var f=l[c],h=f.search(e),p=h.isMatch,v=h.indices,g=h.score;if(!p){o=0,i=0,a.length=0;break}if(i+=1,o+=g,n){var m=f.constructor.type;er.has(m)?a=[].concat(ht(a),ht(v)):a.push(v)}}if(i){var y={isMatch:!0,score:o/i};return n&&(y.indices=a),y}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(e,t){return t.useExtendedSearch}}]),e}(),rr=[];function nr(e,t){for(var r=0,n=rr.length;r<n;r+=1){var i=rr[r];if(i.condition(e,t))return new i(e,t)}return new Ut(e,t)}var ir="$and",ar="$or",or="$path",sr="$val",ur=function(e){return!(!e[ir]&&!e[ar])},lr=function(e){return!!e[or]},cr=function(e){return!pt(e)&&yt(e)&&!ur(e)},dr=function(e){return(0,ct.Z)({},ir,Object.keys(e).map((function(t){return(0,ct.Z)({},t,e[t])})))};function fr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.auto,i=void 0===n||n,a=function e(r){var n=Object.keys(r),a=lr(r);if(!a&&n.length>1&&!ur(r))return e(dr(r));if(cr(r)){var o=a?r[or]:n[0],s=a?r[sr]:r[o];if(!vt(s))throw new Error(Dt(o));var u={keyId:xt(o),pattern:s};return i&&(u.searcher=nr(s,t)),u}var l={children:[],operator:n[0]};return n.forEach((function(t){var n=r[t];pt(n)&&n.forEach((function(t){l.children.push(e(t))}))})),l};return ur(e)||(e=dr(e)),a(e)}function hr(e,t){var r=t.ignoreFieldNorm,n=void 0===r?Lt.ignoreFieldNorm:r;e.forEach((function(e){var t=1;e.matches.forEach((function(e){var r=e.key,i=e.norm,a=e.score,o=r?r.weight:null;t*=Math.pow(0===a&&o?Number.EPSILON:a,(o||1)*(n?1:i))})),e.score=t}))}function pr(e,t){var r=e.matches;t.matches=[],Et(r)&&r.forEach((function(e){if(Et(e.indices)&&e.indices.length){var r={indices:e.indices,value:e.value};e.key&&(r.key=e.key.src),e.idx>-1&&(r.refIndex=e.idx),t.matches.push(r)}}))}function vr(e,t){t.score=e.score}function gr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.includeMatches,i=void 0===n?Lt.includeMatches:n,a=r.includeScore,o=void 0===a?Lt.includeScore:a,s=[];return i&&s.push(pr),o&&s.push(vr),e.map((function(e){var r=e.idx,n={item:t[r],refIndex:r};return s.length&&s.forEach((function(t){t(e,n)})),n}))}var mr=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;_e(this,e),this.options=(0,be.Z)((0,be.Z)({},Lt),r),this.options.useExtendedSearch,this._keyStore=new Tt(this.options.keys),this.setCollection(t,n)}return Se(e,[{key:"setCollection",value:function(e,t){if(this._docs=e,t&&!(t instanceof It))throw new Error("Incorrect 'index' type");this._myIndex=t||Ot(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}},{key:"add",value:function(e){Et(e)&&(this._docs.push(e),this._myIndex.add(e))}},{key:"remove",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!1},t=[],r=0,n=this._docs.length;r<n;r+=1){var i=this._docs[r];e(i,r)&&(this.removeAt(r),r-=1,n-=1,t.push(i))}return t}},{key:"removeAt",value:function(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.limit,n=void 0===r?-1:r,i=this.options,a=i.includeMatches,o=i.includeScore,s=i.shouldSort,u=i.sortFn,l=i.ignoreFieldNorm,c=vt(e)?vt(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return hr(c,{ignoreFieldNorm:l}),s&&c.sort(u),gt(n)&&n>-1&&(c=c.slice(0,n)),gr(c,this._docs,{includeMatches:a,includeScore:o})}},{key:"_searchStringList",value:function(e){var t=nr(e,this.options),r=this._myIndex.records,n=[];return r.forEach((function(e){var r=e.v,i=e.i,a=e.n;if(Et(r)){var o=t.searchIn(r),s=o.isMatch,u=o.score,l=o.indices;s&&n.push({item:r,idx:i,matches:[{score:u,value:r,norm:a,indices:l}]})}})),n}},{key:"_searchLogical",value:function(e){var t=this,r=fr(e,this.options),n=function e(r,n,i){if(!r.children){var a=r.keyId,o=r.searcher,s=t._findMatches({key:t._keyStore.get(a),value:t._myIndex.getValueForItemAtKeyId(n,a),searcher:o});return s&&s.length?[{idx:i,item:n,matches:s}]:[]}for(var u=[],l=0,c=r.children.length;l<c;l+=1){var d=e(r.children[l],n,i);if(d.length)u.push.apply(u,ht(d));else if(r.operator===ir)return[]}return u},i=this._myIndex.records,a={},o=[];return i.forEach((function(e){var t=e.$,i=e.i;if(Et(t)){var s=n(r,t,i);s.length&&(a[i]||(a[i]={idx:i,item:t,matches:[]},o.push(a[i])),s.forEach((function(e){var t,r=e.matches;(t=a[i].matches).push.apply(t,ht(r))})))}})),o}},{key:"_searchObjectList",value:function(e){var t=this,r=nr(e,this.options),n=this._myIndex,i=n.keys,a=n.records,o=[];return a.forEach((function(e){var n=e.$,a=e.i;if(Et(n)){var s=[];i.forEach((function(e,i){s.push.apply(s,ht(t._findMatches({key:e,value:n[i],searcher:r})))})),s.length&&o.push({idx:a,item:n,matches:s})}})),o}},{key:"_findMatches",value:function(e){var t=e.key,r=e.value,n=e.searcher;if(!Et(r))return[];var i=[];if(pt(r))r.forEach((function(e){var r=e.v,a=e.i,o=e.n;if(Et(r)){var s=n.searchIn(r),u=s.isMatch,l=s.score,c=s.indices;u&&i.push({score:l,key:t,value:r,idx:a,norm:o,indices:c})}}));else{var a=r.v,o=r.n,s=n.searchIn(a),u=s.isMatch,l=s.score,c=s.indices;u&&i.push({score:l,key:t,value:a,norm:o,indices:c})}return i}}]),e}();mr.version="6.6.0",mr.createIndex=Ot,mr.parseIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getFn,n=void 0===r?Lt.getFn:r,i=t.fieldNormWeight,a=void 0===i?Lt.fieldNormWeight:i,o=e.keys,s=e.records,u=new It({getFn:n,fieldNormWeight:a});return u.setKeys(o),u.setIndexRecords(s),u},mr.config=Lt,mr.parseQuery=fr,function(){rr.push.apply(rr,arguments)}(tr);var yr=new $e;function Er(e){return br.apply(this,arguments)}function br(){return br=(0,Ne.Z)(je().mark((function e(t){var r,n,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=st(t.type).map(function(){var e=(0,Ne.Z)(je().mark((function e(r){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.searchForMedia(t);case 3:return e.t0=e.sent,e.t1=r.id,e.abrupt("return",{media:e.t0,success:!0,id:e.t1});case 8:return e.prev=8,e.t2=e.catch(0),console.error("Failed running provider ".concat(r.id),e.t2,t),e.abrupt("return",{media:[],success:!1,id:r.id});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(r);case 3:return n=e.sent,i=n.map((function(e){return{success:e.success,id:e.id}})),a={results:n.flatMap((function(e){return e.media})),providers:i,stats:{total:i.length,failed:i.filter((function(e){return!e.success})).length,succeeded:i.filter((function(e){return e.success})).length}},0===a.stats.failed&&yr.set(t,a,3600),a.results.forEach((function(e){Qe.set(Sr(e),e,3600)})),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))),br.apply(this,arguments)}function _r(e,t){var r=(0,be.Z)({},t),n=new mr(r.results,{threshold:.3,keys:["title"],fieldNormWeight:.5});return r.results=n.search(e.searchQuery).map((function(e){return e.item})),r}function Dr(){return(Dr=(0,Ne.Z)(je().mark((function e(t){var r,n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=(0,be.Z)({},t)).searchQuery=r.searchQuery.toLowerCase().trim(),n=yr.get(r)){e.next=7;break}return e.next=6,Er(r);case 6:n=e.sent;case 7:if((n=_r(r,n)).stats.total!==n.stats.failed){e.next=10;break}throw new Error("All Scrapers failed");case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sr(e){return{mediaId:e.mediaId,providerId:e.providerId,mediaType:e.mediaType,episodeId:e.episodeId,seasonId:e.seasonId}}function wr(){return(wr=(0,Ne.Z)(je().mark((function e(t){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ut(t.providerId),e.abrupt("return",null===r||void 0===r?void 0:r.getMediaFromPortable(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tr(){return(Tr=(0,Ne.Z)(je().mark((function e(t){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ut(t.providerId)){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.abrupt("return",r.getStream(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}yr.setCompare((function(e,t){return e.searchQuery===t.searchQuery&&e.type===t.type})),yr.initialize();var Cr=__webpack_require__(885);function Ar(){return{_data:{versionList:[],maxVersion:0,versions:{},storageString:void 0,instanceHelpers:{},staticHelpers:{}},setKey:function(e){return this._data.storageString=e,this},addVersion:function(e){var t=e.version,r=e.migrate,n=e.create;if(t<0)throw new Error("Cannot add version below 0 in store");if(t>0&&!r)throw new Error("Missing migration on version ".concat(t," (needed for any version above 0)"));return t>this._data.maxVersion&&(this._data.maxVersion=t),this._data.versionList.push(t),this._data.versions[t.toString()]={version:t,update:r?function(e){var n=r(e);return n["--version"]=t,n}:void 0,init:n?function(){var e=n();return e["--version"]=t,e}:void 0},this},registerHelper:function(e){var t=e.name,r=e.helper,n=e.type;if(n||(n="instance"),!t||t.constructor!==String)throw new Error("helper name is not a string");if(!r||r.constructor!==Function)throw new Error("helper function is not a function");if(!["instance","static"].includes(n))throw new Error("helper type must be either 'instance' or 'static'");return"instance"===n?this._data.instanceHelpers[t]=r:"static"===n&&(this._data.staticHelpers[t]=r),this},build:function(){var e=this._data.versionList.sort((function(e,t){return e-t}));if(e.forEach((function(e,t,r){if(0!==t&&e!==r[t-1]+1)throw new Error("Version list of store is not incremental")})),0!==e[0])throw new Error("Version 0 doesn't exist in version list of store");if(!this._data.versions[this._data.maxVersion.toString()].init)throw new Error("Missing create function on version ".concat(this._data.maxVersion," (needed for latest version of store)"));if(!this._data.storageString)throw new Error("storage key not set in store");return function(e){var t={versions:e.versions,currentVersion:e.maxVersion,id:e.storageString};return t.get=function(){var t=this,r=this,n=localStorage.getItem(this.id);if(n)try{if(!(n=JSON.parse(n)).constructor)throw console.error("Storage item for store ".concat(this.id," has not constructor")),new Error("storage item has no constructor");if(n.constructor!==Object)throw console.error("Storage item for store ".concat(this.id," is not an object")),new Error("storage item is not an object")}catch(i){console.error("Failed to parse storage item for store ".concat(this.id)),n=null}return n||(n=this.versions[this.currentVersion.toString()].init()),(n=this.update(n)).save=function(e){var t=e||n;localStorage.setItem(r.id,JSON.stringify(t))},Object.entries(e.instanceHelpers).forEach((function(e){var r=(0,Cr.Z)(e,2),i=r[0],a=r[1];if(void 0!==n[i])throw new Error("helper name: ".concat(i," on instance of store ").concat(t.id," is reserved"));n[i]=a.bind(n)})),n}.bind(t),t.update=function(e){var t=e;if(!t)throw new Error("object to update is not an object");for(void 0===t["--version"]&&(t["--version"]=0);t["--version"]!==this.currentVersion;){var r=t["--version"]||0;if(r=r.constructor!==Number||r<0?-42:(r+1).toString(),!this.versions[r]){console.error("Version not found for storage item in store ".concat(this.id,", resetting")),t=null;break}t=this.versions[r].update(t)}return null===t?(console.error("Storage item for store ".concat(this.id," has been reset due to faulty updates")),this.versions[this.currentVersion.toString()].init()):t}.bind(t),Object.entries(e.staticHelpers).forEach((function(e){var r=(0,Cr.Z)(e,2),n=r[0],i=r[1];if(void 0!==t[n])throw new Error("helper name: ".concat(n," on store ").concat(t.id," is reserved"));t[n]=i.bind({})})),t}(this._data)}}}var xr=Ar().setKey("mw-bookmarks").addVersion({version:0,create:function(){return{bookmarks:[]}}}).build(),kr=(0,e.createContext)({setItemBookmark:function(){},getFilteredBookmarks:function(){return[]},bookmarkStore:{bookmarks:[]}});function Lr(e,t){var r=e.findIndex((function(e){return e.mediaId===t.mediaId&&e.providerId===t.providerId&&e.episodeId===t.episodeId&&e.seasonId===t.seasonId}));return r}function Fr(t){var r=xr.get(),n=(0,e.useState)(r),i=(0,Cr.Z)(n,2),a=i[0],o=i[1],s=(0,e.useCallback)((function(e){o((function(t){var n=JSON.parse(JSON.stringify(t)),i=e;return e.constructor===Function&&(i=e(n)),r.save(i),i}))}),[r,o]),u=(0,e.useMemo)((function(){return{setItemBookmark:function(e,t){s((function(r){if(t){if(-1===Lr(r.bookmarks,e)){var n={mediaId:e.mediaId,mediaType:e.mediaType,providerId:e.providerId,title:e.title,year:e.year,episodeId:e.episodeId,seasonId:e.seasonId};r.bookmarks.push(n)}}else{var i=Lr(r.bookmarks,e);-1!==i&&r.bookmarks.splice(i)}return r}))},getFilteredBookmarks:function(){return a.bookmarks.filter((function(e){var t;return null===(t=lt(e.providerId))||void 0===t?void 0:t.enabled}))},bookmarkStore:a}}),[a,s]);return(0,Le.jsx)(kr.Provider,{value:u,children:t.children})}function Rr(){return(0,e.useContext)(kr)}function Ir(e,t){return-1!==Lr(e,t)}var Or=Ar().setKey("video-progress").addVersion({version:0}).addVersion({version:1,migrate:function(e){var t={items:[]};return e&&e.constructor===Object?(Object.keys(e).forEach((function(r){"--version"!==r&&"save"!==r&&(e[r].movie&&e[r].movie.constructor===Object&&Object.keys(e[r].movie).forEach((function(n){try{t.items.push({mediaId:n.includes("player.php")?n.split("player.php%3Fimdb%3D")[1]:n,mediaType:Ge._.MOVIE,providerId:r,title:e[r].movie[n].full.meta.title,year:e[r].movie[n].full.meta.year,progress:e[r].movie[n].full.currentlyAt,percentage:Math.round(e[r].movie[n].full.currentlyAt/e[r].movie[n].full.totalDuration*100)})}catch(i){console.error("Failed to migrate movie: ".concat(r,"/").concat(n),e[r].movie[n])}})),e[r].show&&e[r].show.constructor===Object&&Object.keys(e[r].show).forEach((function(n){e[r].show[n].constructor===Object&&Object.keys(e[r].show[n]).forEach((function(i){try{t.items.push({mediaId:n,mediaType:Ge._.SERIES,providerId:r,title:e[r].show[n][i].meta.title,year:e[r].show[n][i].meta.year,percentage:Math.round(e[r].show[n][i].currentlyAt/e[r].show[n][i].totalDuration*100),progress:e[r].show[n][i].currentlyAt,episodeId:e[r].show[n][i].show.episode,seasonId:e[r].show[n][i].show.season})}catch(a){console.error("Failed to migrate series: ".concat(r,"/").concat(n,"/").concat(i),e[r].show[n][i])}}))})))})),t):t},create:function(){return{items:[]}}}).build();function Pr(e,t){return e.find((function(e){return e.mediaId===t.mediaId&&e.providerId===t.providerId&&e.episodeId===t.episodeId&&e.seasonId===t.seasonId}))}var Mr=(0,e.createContext)({updateProgress:function(){},getFilteredWatched:function(){return[]},watched:{items:[]}});function Br(t){var r=Or.get(),n=(0,e.useState)(r),i=(0,Cr.Z)(n,2),a=i[0],o=i[1],s=(0,e.useCallback)((function(e){o((function(t){var n=e;return e.constructor===Function&&(n=e(t)),r.save(n),n}))}),[o,r]),u=(0,e.useMemo)((function(){return{updateProgress:function(e,t,r){s((function(n){var i=Pr(n.items,e);return i||(i={mediaId:e.mediaId,mediaType:e.mediaType,providerId:e.providerId,title:e.title,year:e.year,percentage:0,progress:0,episodeId:e.episodeId,seasonId:e.seasonId},n.items.push(i)),i.progress=t,i.percentage=Math.round(t/r*100),n}))},getFilteredWatched:function(){var e=a.items.filter((function(e){var t;return null===(t=lt(e.providerId))||void 0===t?void 0:t.enabled})),t={},r={};return e=e.filter((function(e){if([Ge._.ANIME,Ge._.SERIES].includes(e.mediaType)){var n="".concat(e.mediaType,"-").concat(e.mediaId),i=[e.episodeId?parseInt(e.episodeId,10):-1,e.seasonId?parseInt(e.seasonId,10):-1],a=t[n];return a||(a=i,t[n]=i,r[n]=e),(i[0]>a[0]||i[0]===a[0]&&i[1]>a[1])&&(t[n]=i,r[n]=e),!1}return!0})),[].concat(ht(e),ht(Object.values(r)))},watched:a}}),[a,s]);return(0,Le.jsx)(Mr.Provider,{value:u,children:t.children})}function Nr(){return(0,e.useContext)(Mr)}function Ur(e){return(0,Le.jsxs)("div",{className:"bg-bink-100 text-bink-600 flex items-center space-x-2 rounded-full bg-opacity-50 px-4 py-2 ".concat(e.clickable?"hover:bg-bink-200 hover:text-bink-700 transition-[transform,background-color] hover:scale-105 active:scale-95":""),children:[(0,Le.jsx)(Re,{className:"text-xl",icon:ke.MOVIE_WEB}),(0,Le.jsx)("span",{className:"font-semibold text-white",children:"movie-web"})]})}function jr(e){return(0,Le.jsxs)("div",{className:"absolute left-0 right-0 top-0 flex items-center justify-between py-5 px-7",children:[(0,Le.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Le.jsx)("div",{className:"mr-6",children:(0,Le.jsx)(me,{to:"/",children:(0,Le.jsx)(Ur,{clickable:!0})})}),e.children]}),(0,Le.jsxs)("div",{className:"flex",children:[(0,Le.jsx)("a",{href:Me.Hj,target:"_blank",rel:"noreferrer",className:"text-2xl text-white",children:(0,Le.jsx)(Ie,{icon:ke.DISCORD,clickable:!0})}),(0,Le.jsx)("a",{href:Me.$t,target:"_blank",rel:"noreferrer",className:"text-2xl text-white",children:(0,Le.jsx)(Ie,{icon:ke.GITHUB,clickable:!0})})]})]})}function Hr(e){var t=e.direction||"right",r=!!e.url,n=!!e.to,i=(0,Le.jsxs)("span",{className:"text-bink-600 hover:text-bink-700 group inline-flex cursor-pointer items-center space-x-1 font-bold active:scale-95",children:["left"===t?(0,Le.jsx)("span",{className:"text-xl transition-transform group-hover:-translate-x-1",children:(0,Le.jsx)(Re,{icon:ke.ARROW_LEFT})}):null,(0,Le.jsx)("span",{className:"flex-1",children:e.linkText}),"right"===t?(0,Le.jsx)("span",{className:"text-xl transition-transform group-hover:translate-x-1",children:(0,Le.jsx)(Re,{icon:ke.ARROW_RIGHT})}):null]});return r?(0,Le.jsx)("a",{href:e.url,children:i}):n?(0,Le.jsx)(me,{to:e.to,children:i}):(0,Le.jsx)("span",{onClick:function(){return e.onClick&&e.onClick()},children:i})}function Gr(e){return(0,Le.jsxs)("div",{className:"h-screen flex-1",children:[(0,Le.jsx)(jr,{}),(0,Le.jsx)("div",{className:"flex h-full flex-col items-center justify-center p-5 text-center",children:e.children})]})}function Kr(){return(0,Le.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center p-5 text-center",children:[(0,Le.jsx)(Ie,{icon:ke.EYE_SLASH,className:"text-bink-600 mb-6 text-xl"}),(0,Le.jsx)(Pe,{children:"Couldn't find that media"}),(0,Le.jsx)("p",{className:"mt-5 mb-12 max-w-sm",children:"We couldn't find the media you requested. Either it's been removed or you tampered with the URL"}),(0,Le.jsx)(Hr,{to:"/",linkText:"Back to home"})]})}function zr(){return(0,Le.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center p-5 text-center",children:[(0,Le.jsx)(Ie,{icon:ke.EYE_SLASH,className:"text-bink-600 mb-6 text-xl"}),(0,Le.jsx)(Pe,{children:"This provider has been disabled"}),(0,Le.jsx)("p",{className:"mt-5 mb-12 max-w-sm",children:"We had issues with the provider or it was too unstable to use, so we had to disable it."}),(0,Le.jsx)(Hr,{to:"/",linkText:"Back to home"})]})}function Vr(){return(0,Le.jsxs)(Gr,{children:[(0,Le.jsx)(Ie,{icon:ke.EYE_SLASH,className:"text-bink-600 mb-6 text-xl"}),(0,Le.jsx)(Pe,{children:"Couldn't find that page"}),(0,Le.jsx)("p",{className:"mt-5 mb-12 max-w-sm",children:"We looked everywhere: under the bins, in the closet, behind the proxy but ultimately couldn't find the page you are looking for."}),(0,Le.jsx)(Hr,{to:"/",linkText:"Back to home"})]})}function Wr(e){return(0,Le.jsx)("div",{className:"bg-denim-200 rounded-xl p-12 ".concat(e.className),children:e.children})}function qr(e,t){if(null==e)return{};var r,n,i=G(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Zr(){var e=[],t=[],r={enqueue:function(e){t.push(e)},addEventListener:function(e,t,n,i){return e.addEventListener(t,n,i),r.add((function(){return e.removeEventListener(t,n,i)}))},requestAnimationFrame:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=requestAnimationFrame.apply(void 0,arguments);return r.add((function(){return cancelAnimationFrame(e)}))})),nextFrame:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.requestAnimationFrame((function(){return r.requestAnimationFrame.apply(r,t)}))},setTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=setTimeout.apply(void 0,arguments);return r.add((function(){return clearTimeout(e)}))})),add:function(t){return e.push(t),function(){var r=e.indexOf(t);if(r>=0){var n=e.splice(r,1);(0,(0,Cr.Z)(n,1)[0])()}}},dispose:function(){var t,r=(0,He.Z)(e.splice(0));try{for(r.s();!(t=r.n()).done;){(0,t.value)()}}catch(n){r.e(n)}finally{r.f()}},workQueue:function(){return(0,Ne.Z)(Ue.mark((function e(){var r,n,i;return Ue.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,He.Z)(t.splice(0)),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=9;break}return i=n.value,e.next=7,i();case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.e(e.t0);case 14:return e.prev=14,r.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))()}};return r}function Yr(){var t=(0,e.useState)(Zr),r=(0,Cr.Z)(t,1)[0];return(0,e.useEffect)((function(){return function(){return r.dispose()}}),[r]),r}Mr.displayName="WatchedContext";var $r,Xr="undefined"!=typeof window?e.useLayoutEffect:e.useEffect,Qr={serverHandoffComplete:!1};function Jr(){var t=(0,e.useState)(Qr.serverHandoffComplete),r=(0,Cr.Z)(t,2),n=r[0],i=r[1];return(0,e.useEffect)((function(){!0!==n&&i(!0)}),[n]),(0,e.useEffect)((function(){!1===Qr.serverHandoffComplete&&(Qr.serverHandoffComplete=!0)}),[]),n}var en=0;function tn(){return++en}var rn=null!=($r=e.useId)?$r:function(){var t=Jr(),r=e.useState(t?tn:null),n=(0,Cr.Z)(r,2),i=n[0],a=n[1];return Xr((function(){null===i&&a(tn())}),[i]),null!=i?""+i:void 0};function nn(t){var r=(0,e.useRef)(t);return Xr((function(){r.current=t}),[t]),r}function an(t,r){var n=(0,e.useState)(t),i=(0,Cr.Z)(n,2),a=i[0],o=i[1],s=nn(t);return Xr((function(){return o(s.current)}),[s,o].concat(ht(r))),a}var on=Symbol();function sn(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=(0,e.useRef)(r);(0,e.useEffect)((function(){i.current=r}),[r]);var a=(0,e.useCallback)((function(e){var t,r=(0,He.Z)(i.current);try{for(r.s();!(t=r.n()).done;){var n=t.value;null!=n&&("function"==typeof n?n(e):n.current=e)}}catch(a){r.e(a)}finally{r.f()}}),[i]);return r.every((function(e){return null==e||(null==e?void 0:e[on])}))?void 0:a}function un(e,t){if(e in t){for(var r=t[e],n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return"function"==typeof r?r.apply(void 0,i):r}var o=new Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(t).map((function(e){return'"'.concat(e,'"')})).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(o,un),o}var ln,cn,dn=["static"],fn=["unmount"],hn=["as","children","refName"],pn=((cn=pn||{})[cn.None=0]="None",cn[cn.RenderStrategy=1]="RenderStrategy",cn[cn.Static=2]="Static",cn),vn=((ln=vn||{})[ln.Unmount=0]="Unmount",ln[ln.Hidden=1]="Hidden",ln);function gn(e){var t=e.ourProps,r=e.theirProps,n=e.slot,i=e.defaultTag,a=e.features,o=e.visible,s=void 0===o||o,u=e.name,l=yn(r,t);if(s)return mn(l,n,i,u);var c=null!=a?a:0;if(2&c){var d=l.static,f=void 0!==d&&d,h=qr(l,dn);if(f)return mn(h,n,i,u)}if(1&c){var p,v=l.unmount,g=void 0===v||v,m=qr(l,fn);return un(g?0:1,(p={},(0,ct.Z)(p,0,(function(){return null})),(0,ct.Z)(p,1,(function(){return mn((0,be.Z)((0,be.Z)({},m),{},{hidden:!0,style:{display:"none"}}),n,i,u)})),p))}return mn(l,n,i,u)}function mn(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=_n(t,["unmount","static"]),o=a.as,s=void 0===o?n:o,u=a.children,l=a.refName,c=void 0===l?"ref":l,d=qr(a,hn),f=void 0!==t.ref?(0,ct.Z)({},c,t.ref):{},h="function"==typeof u?u(r):u;if(d.className&&"function"==typeof d.className&&(d.className=d.className(r)),s===e.Fragment&&Object.keys(bn(d)).length>0){if(!(0,e.isValidElement)(h)||Array.isArray(h)&&h.length>1)throw new Error(['Passing props on "Fragment"!',"","The current component <".concat(i,' /> is rendering a "Fragment".'),"However we need to passthrough the following props:",Object.keys(d).map((function(e){return"  - ".concat(e)})).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((function(e){return"  - ".concat(e)})).join("\n")].join("\n"));return(0,e.cloneElement)(h,Object.assign({},yn(h.props,bn(_n(d,["ref"]))),f))}return(0,e.createElement)(s,Object.assign({},_n(d,["ref"]),s!==e.Fragment&&f),h)}function yn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return{};if(1===t.length)return t[0];for(var n={},i={},a=0,o=t;a<o.length;a++){var s=o[a];for(var u in s)u.startsWith("on")&&"function"==typeof s[u]?(null!=i[u]||(i[u]=[]),i[u].push(s[u])):n[u]=s[u]}if(n.disabled||n["aria-disabled"])return Object.assign(n,Object.fromEntries(Object.keys(i).map((function(e){return[e,void 0]}))));var l=function(e){Object.assign(n,(0,ct.Z)({},e,(function(t){var r,n=i[e],a=(0,He.Z)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(t.defaultPrevented)return;o(t)}}catch(s){a.e(s)}finally{a.f()}})))};for(var c in i)l(c);return n}function En(t){var r;return Object.assign((0,e.forwardRef)(t),{displayName:null!=(r=t.displayName)?r:t.name})}function bn(e){var t=Object.assign({},e);for(var r in t)void 0===t[r]&&delete t[r];return t}function _n(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.assign({},e),i=(0,He.Z)(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;a in n&&delete n[a]}}catch(o){i.e(o)}finally{i.f()}return n}var Dn=function(e){return e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e}(Dn||{});var Sn=function(e){return e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e}(Sn||{});function wn(e,t){var r=t.resolveItems();if(r.length<=0)return null;var n=t.resolveActiveIndex(),i=null!=n?n:-1,a=function(){switch(e.focus){case 0:return r.findIndex((function(e){return!t.resolveDisabled(e)}));case 1:var n=r.slice().reverse().findIndex((function(e,r,n){return!(-1!==i&&n.length-r-1>=i)&&!t.resolveDisabled(e)}));return-1===n?n:r.length-1-n;case 2:return r.findIndex((function(e,r){return!(r<=i)&&!t.resolveDisabled(e)}));case 3:var a=r.slice().reverse().findIndex((function(e){return!t.resolveDisabled(e)}));return-1===a?a:r.length-1-a;case 4:return r.findIndex((function(r){return t.resolveId(r)===e.id}));case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}}();return-1===a?n:a}function Tn(e){for(var t=e.parentElement,r=null;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(r=t),t=t.parentElement;var n=""===(null==t?void 0:t.getAttribute("disabled"));return(!n||!function(e){if(!e)return!1;for(var t=e.previousElementSibling;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(r))&&n}function Cn(e){return"undefined"==typeof window?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}var An,xn=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((function(e){return"".concat(e,":not([tabindex='-1'])")})).join(","),kn=function(e){return e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e}(kn||{}),Ln=function(e){return e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e}(Ln||{}),Fn=((An=Fn||{})[An.Previous=-1]="Previous",An[An.Next=1]="Next",An);var Rn=function(e){return e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e}(Rn||{});["textarea","input"].join(",");function In(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return e.slice().sort((function(e,r){var n=t(e),i=t(r);if(null===n||null===i)return 0;var a=n.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}var On=(0,e.createContext)(null);On.displayName="OpenClosedContext";var Pn=function(e){return e[e.Open=0]="Open",e[e.Closed=1]="Closed",e}(Pn||{});function Mn(){return(0,e.useContext)(On)}function Bn(t){var r=t.value,n=t.children;return e.createElement(On.Provider,{value:r},n)}function Nn(e){var t;if(e.type)return e.type;var r=null!=(t=e.as)?t:"button";return"string"==typeof r&&"button"===r.toLowerCase()?"button":void 0}function Un(t,r){var n=(0,e.useState)((function(){return Nn(t)})),i=(0,Cr.Z)(n,2),a=i[0],o=i[1];return Xr((function(){o(Nn(t))}),[t.type,t.as]),Xr((function(){a||!r.current||r.current instanceof HTMLButtonElement&&!r.current.hasAttribute("type")&&o("button")}),[a,r]),a}function jn(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((function(e){return setTimeout((function(){throw e}))}))}function Hn(t,r,n){var i=nn(r);(0,e.useEffect)((function(){function e(e){i.current(e)}return window.addEventListener(t,e,n),function(){return window.removeEventListener(t,e,n)}}),[t,n])}var Gn=function(e){return e[e.None=1]="None",e[e.IgnoreScrollbars=2]="IgnoreScrollbars",e}(Gn||{});function Kn(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=(0,e.useRef)(!1),a=nn((function(e){if(!i.current){i.current=!0,jn((function(){i.current=!1}));var a=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(t),o=e.target;if(o.ownerDocument.documentElement.contains(o)){if(2===(2&n)){var s=o.ownerDocument.documentElement;if(e.clientX>s.clientWidth-20||e.clientX<20||e.clientY>s.clientHeight-20||e.clientY<20)return}var u,l=(0,He.Z)(a);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(null!==c){var d=c instanceof HTMLElement?c:c.current;if(null!=d&&d.contains(o))return}}}catch(f){l.e(f)}finally{l.f()}return r(e,o)}}}));Hn("pointerdown",(function(){return a.current.apply(a,arguments)})),Hn("mousedown",(function(){return a.current.apply(a,arguments)}))}var zn=En((function(e,t){return gn({ourProps:{ref:t,style:{position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",display:"none"}},theirProps:e,slot:{},defaultTag:"div",name:"VisuallyHidden"})}));function Vn(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=0,i=Object.entries(e);n<i.length;n++){var a=(0,Cr.Z)(i[n],2),o=a[0],s=a[1];qn(r,Wn(t,o),s)}return r}function Wn(e,t){return e?e+"["+t+"]":t}function qn(e,t,r){if(Array.isArray(r)){var n,i=(0,He.Z)(r.entries());try{for(i.s();!(n=i.n()).done;){var a=(0,Cr.Z)(n.value,2),o=a[0],s=a[1];qn(e,Wn(t,o.toString()),s)}}catch(u){i.e(u)}finally{i.f()}}else r instanceof Date?e.push([t,r.toISOString()]):"boolean"==typeof r?e.push([t,r?"1":"0"]):"string"==typeof r?e.push([t,r]):"number"==typeof r?e.push([t,"".concat(r)]):null==r?e.push([t,""]):Vn(r,t,e)}var Zn,Yn,$n=["value","name","onChange","disabled","horizontal","multiple"],Xn=["disabled","value"],Qn=function(e){return e[e.Open=0]="Open",e[e.Closed=1]="Closed",e}(Qn||{}),Jn=function(e){return e[e.Single=0]="Single",e[e.Multi=1]="Multi",e}(Jn||{}),ei=function(e){return e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e}(ei||{}),ti=((Yn=ti||{})[Yn.OpenListbox=0]="OpenListbox",Yn[Yn.CloseListbox=1]="CloseListbox",Yn[Yn.SetDisabled=2]="SetDisabled",Yn[Yn.SetOrientation=3]="SetOrientation",Yn[Yn.GoToOption=4]="GoToOption",Yn[Yn.Search=5]="Search",Yn[Yn.ClearSearch=6]="ClearSearch",Yn[Yn.RegisterOption=7]="RegisterOption",Yn[Yn.UnregisterOption=8]="UnregisterOption",Yn);function ri(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},r=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,n=In(t(e.options.slice()),(function(e){return e.dataRef.current.domRef.current})),i=r?n.indexOf(r):null;return-1===i&&(i=null),{options:n,activeOptionIndex:i}}var ni=(Zn={},(0,ct.Z)(Zn,1,(function(e){return e.disabled||1===e.listboxState?e:(0,be.Z)((0,be.Z)({},e),{},{activeOptionIndex:null,listboxState:1})})),(0,ct.Z)(Zn,0,(function(e){if(e.disabled||0===e.listboxState)return e;var t=e.activeOptionIndex,r=e.propsRef.current,n=r.value,i=r.mode,a=e.options.findIndex((function(e){var t,r=e.dataRef.current.value;return un(i,(t={},(0,ct.Z)(t,1,(function(){return n.includes(r)})),(0,ct.Z)(t,0,(function(){return n===r})),t))}));return-1!==a&&(t=a),(0,be.Z)((0,be.Z)({},e),{},{listboxState:0,activeOptionIndex:t})})),(0,ct.Z)(Zn,2,(function(e,t){return e.disabled===t.disabled?e:(0,be.Z)((0,be.Z)({},e),{},{disabled:t.disabled})})),(0,ct.Z)(Zn,3,(function(e,t){return e.orientation===t.orientation?e:(0,be.Z)((0,be.Z)({},e),{},{orientation:t.orientation})})),(0,ct.Z)(Zn,4,(function(e,t){var r;if(e.disabled||1===e.listboxState)return e;var n=ri(e),i=wn(t,{resolveItems:function(){return n.options},resolveActiveIndex:function(){return n.activeOptionIndex},resolveId:function(e){return e.id},resolveDisabled:function(e){return e.dataRef.current.disabled}});return(0,be.Z)((0,be.Z)((0,be.Z)({},e),n),{},{searchQuery:"",activeOptionIndex:i,activationTrigger:null!=(r=t.trigger)?r:1})})),(0,ct.Z)(Zn,5,(function(e,t){if(e.disabled||1===e.listboxState)return e;var r=""!==e.searchQuery?0:1,n=e.searchQuery+t.value.toLowerCase(),i=(null!==e.activeOptionIndex?e.options.slice(e.activeOptionIndex+r).concat(e.options.slice(0,e.activeOptionIndex+r)):e.options).find((function(e){var t;return!e.dataRef.current.disabled&&(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(n))})),a=i?e.options.indexOf(i):-1;return-1===a||a===e.activeOptionIndex?(0,be.Z)((0,be.Z)({},e),{},{searchQuery:n}):(0,be.Z)((0,be.Z)({},e),{},{searchQuery:n,activeOptionIndex:a,activationTrigger:1})})),(0,ct.Z)(Zn,6,(function(e){return e.disabled||1===e.listboxState||""===e.searchQuery?e:(0,be.Z)((0,be.Z)({},e),{},{searchQuery:""})})),(0,ct.Z)(Zn,7,(function(e,t){var r={id:t.id,dataRef:t.dataRef},n=ri(e,(function(e){return[].concat(ht(e),[r])}));if(null===e.activeOptionIndex){var i,a=e.propsRef.current,o=a.value,s=a.mode,u=t.dataRef.current.value;un(s,(i={},(0,ct.Z)(i,1,(function(){return o.includes(u)})),(0,ct.Z)(i,0,(function(){return o===u})),i))&&(n.activeOptionIndex=n.options.indexOf(r))}return(0,be.Z)((0,be.Z)({},e),n)})),(0,ct.Z)(Zn,8,(function(e,t){var r=ri(e,(function(e){var r=e.findIndex((function(e){return e.id===t.id}));return-1!==r&&e.splice(r,1),e}));return(0,be.Z)((0,be.Z)((0,be.Z)({},e),r),{},{activationTrigger:1})})),Zn),ii=(0,e.createContext)(null);function ai(t){var r=(0,e.useContext)(ii);if(null===r){var n=new Error("<".concat(t," /> is missing a parent <Listbox /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(n,ai),n}return r}function oi(e,t){return un(t.type,ni,e,t)}ii.displayName="ListboxContext";var si=e.Fragment,ui=En((function(t,r){var n,i=t.value,a=t.name,o=t.onChange,s=t.disabled,u=void 0!==s&&s,l=t.horizontal,c=void 0!==l&&l,d=t.multiple,f=void 0!==d&&d,h=qr(t,$n),p=c?"horizontal":"vertical",v=sn(r),g=(0,e.useReducer)(oi,{listboxState:1,propsRef:{current:{value:i,onChange:o,mode:f?1:0}},labelRef:(0,e.createRef)(),buttonRef:(0,e.createRef)(),optionsRef:(0,e.createRef)(),disabled:u,orientation:p,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1}),m=(0,Cr.Z)(g,2),y=m[0],E=y.listboxState,b=y.propsRef,_=y.optionsRef,D=y.buttonRef,S=m[1];b.current.value=i,b.current.mode=f?1:0,Xr((function(){b.current.onChange=function(e){var t;return un(b.current.mode,(t={},(0,ct.Z)(t,0,(function(){return o(e)})),(0,ct.Z)(t,1,(function(){var t=b.current.value.slice(),r=t.indexOf(e);return-1===r?t.push(e):t.splice(r,1),o(t)})),t))}}),[o,b]),Xr((function(){return S({type:2,disabled:u})}),[u]),Xr((function(){return S({type:3,orientation:p})}),[p]),Kn([D,_],(function(e,t){var r;0===E&&(S({type:1}),function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e!==(null==(r=Cn(e))?void 0:r.body)&&un(n,(t={},(0,ct.Z)(t,0,(function(){return e.matches(xn)})),(0,ct.Z)(t,1,(function(){for(var t=e;null!==t;){if(t.matches(xn))return!0;t=t.parentElement}return!1})),t))}(t,Rn.Loose)||(e.preventDefault(),null==(r=D.current)||r.focus()))}));var w=(0,e.useMemo)((function(){return{open:0===E,disabled:u}}),[E,u]),T={ref:v};return e.createElement(ii.Provider,{value:g},e.createElement(Bn,{value:un(E,(n={},(0,ct.Z)(n,0,Pn.Open),(0,ct.Z)(n,1,Pn.Closed),n))},null!=a&&null!=i&&Vn((0,ct.Z)({},a,i)).map((function(t){var r=(0,Cr.Z)(t,2),n=r[0],i=r[1];return e.createElement(zn,(0,be.Z)({},bn({key:n,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:n,value:i})))})),gn({ourProps:T,theirProps:h,slot:w,defaultTag:si,name:"Listbox"})))})),li=En((function(t,r){var n,i=ai("Listbox.Button"),a=(0,Cr.Z)(i,2),o=a[0],s=a[1],u=sn(o.buttonRef,r),l="headlessui-listbox-button-".concat(rn()),c=Yr(),d=(0,e.useCallback)((function(e){switch(e.key){case Dn.Space:case Dn.Enter:case Dn.ArrowDown:e.preventDefault(),s({type:0}),c.nextFrame((function(){o.propsRef.current.value||s({type:4,focus:Sn.First})}));break;case Dn.ArrowUp:e.preventDefault(),s({type:0}),c.nextFrame((function(){o.propsRef.current.value||s({type:4,focus:Sn.Last})}))}}),[s,o,c]),f=(0,e.useCallback)((function(e){if(e.key===Dn.Space)e.preventDefault()}),[]),h=(0,e.useCallback)((function(e){if(Tn(e.currentTarget))return e.preventDefault();0===o.listboxState?(s({type:1}),c.nextFrame((function(){var e;return null==(e=o.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),s({type:0}))}),[s,c,o]),p=an((function(){if(o.labelRef.current)return[o.labelRef.current.id,l].join(" ")}),[o.labelRef.current,l]),v=(0,e.useMemo)((function(){return{open:0===o.listboxState,disabled:o.disabled}}),[o]),g=t;return gn({ourProps:{ref:u,id:l,type:Un(t,o.buttonRef),"aria-haspopup":!0,"aria-controls":null==(n=o.optionsRef.current)?void 0:n.id,"aria-expanded":o.disabled?void 0:0===o.listboxState,"aria-labelledby":p,disabled:o.disabled,onKeyDown:d,onKeyUp:f,onClick:h},theirProps:g,slot:v,defaultTag:"button",name:"Listbox.Button"})})),ci=En((function(t,r){var n=ai("Listbox.Label"),i=(0,Cr.Z)(n,1)[0],a="headlessui-listbox-label-".concat(rn());return gn({ourProps:{ref:sn(i.labelRef,r),id:a,onClick:(0,e.useCallback)((function(){var e;return null==(e=i.buttonRef.current)?void 0:e.focus({preventScroll:!0})}),[i.buttonRef])},theirProps:t,slot:(0,e.useMemo)((function(){return{open:0===i.listboxState,disabled:i.disabled}}),[i]),defaultTag:"label",name:"Listbox.Label"})})),di=pn.RenderStrategy|pn.Static,fi=En((function(t,r){var n,i=ai("Listbox.Options"),a=(0,Cr.Z)(i,2),o=a[0],s=a[1],u=sn(o.optionsRef,r),l="headlessui-listbox-options-".concat(rn()),c=Yr(),d=Yr(),f=Mn(),h=null!==f?f===Pn.Open:0===o.listboxState;(0,e.useEffect)((function(){var e,t=o.optionsRef.current;!t||0===o.listboxState&&t!==(null==(e=Cn(t))?void 0:e.activeElement)&&t.focus({preventScroll:!0})}),[o.listboxState,o.optionsRef]);var p=(0,e.useCallback)((function(e){switch(d.dispose(),e.key){case Dn.Space:if(""!==o.searchQuery)return e.preventDefault(),e.stopPropagation(),s({type:5,value:e.key});case Dn.Enter:if(e.preventDefault(),e.stopPropagation(),null!==o.activeOptionIndex){var t=o.options[o.activeOptionIndex].dataRef;o.propsRef.current.onChange(t.current.value)}0===o.propsRef.current.mode&&(s({type:1}),Zr().nextFrame((function(){var e;return null==(e=o.buttonRef.current)?void 0:e.focus({preventScroll:!0})})));break;case un(o.orientation,{vertical:Dn.ArrowDown,horizontal:Dn.ArrowRight}):return e.preventDefault(),e.stopPropagation(),s({type:4,focus:Sn.Next});case un(o.orientation,{vertical:Dn.ArrowUp,horizontal:Dn.ArrowLeft}):return e.preventDefault(),e.stopPropagation(),s({type:4,focus:Sn.Previous});case Dn.Home:case Dn.PageUp:return e.preventDefault(),e.stopPropagation(),s({type:4,focus:Sn.First});case Dn.End:case Dn.PageDown:return e.preventDefault(),e.stopPropagation(),s({type:4,focus:Sn.Last});case Dn.Escape:return e.preventDefault(),e.stopPropagation(),s({type:1}),c.nextFrame((function(){var e;return null==(e=o.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));case Dn.Tab:e.preventDefault(),e.stopPropagation();break;default:1===e.key.length&&(s({type:5,value:e.key}),d.setTimeout((function(){return s({type:6})}),350))}}),[c,s,d,o]),v=an((function(){var e,t,r;return null!=(r=null==(e=o.labelRef.current)?void 0:e.id)?r:null==(t=o.buttonRef.current)?void 0:t.id}),[o.labelRef.current,o.buttonRef.current]),g=(0,e.useMemo)((function(){return{open:0===o.listboxState}}),[o]),m=t;return gn({ourProps:{"aria-activedescendant":null===o.activeOptionIndex||null==(n=o.options[o.activeOptionIndex])?void 0:n.id,"aria-multiselectable":1===o.propsRef.current.mode||void 0,"aria-labelledby":v,"aria-orientation":o.orientation,id:l,onKeyDown:p,role:"listbox",tabIndex:0,ref:u},theirProps:m,slot:g,defaultTag:"ul",features:di,visible:h,name:"Listbox.Options"})})),hi=En((function(t,r){var n,i=t.disabled,a=void 0!==i&&i,o=t.value,s=qr(t,Xn),u=ai("Listbox.Option"),l=(0,Cr.Z)(u,2),c=l[0],d=l[1],f="headlessui-listbox-option-".concat(rn()),h=null!==c.activeOptionIndex&&c.options[c.activeOptionIndex].id===f,p=un(c.propsRef.current.mode,(n={},(0,ct.Z)(n,1,(function(){return c.propsRef.current.value.includes(o)})),(0,ct.Z)(n,0,(function(){return c.propsRef.current.value===o})),n)),v=(0,e.useRef)(null),g=sn(r,v);Xr((function(){if(0===c.listboxState&&h&&0!==c.activationTrigger){var e=Zr();return e.requestAnimationFrame((function(){var e,t;null==(t=null==(e=v.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}}),[v,h,c.listboxState,c.activationTrigger,c.activeOptionIndex]);var m=(0,e.useRef)({disabled:a,value:o,domRef:v});Xr((function(){m.current.disabled=a}),[m,a]),Xr((function(){m.current.value=o}),[m,o]),Xr((function(){var e,t;m.current.textValue=null==(t=null==(e=v.current)?void 0:e.textContent)?void 0:t.toLowerCase()}),[m,v]);var y=(0,e.useCallback)((function(){return c.propsRef.current.onChange(o)}),[c.propsRef,o]);Xr((function(){return d({type:7,id:f,dataRef:m}),function(){return d({type:8,id:f})}}),[m,f]);var E=(0,e.useCallback)((function(e){if(a)return e.preventDefault();y(),0===c.propsRef.current.mode&&(d({type:1}),Zr().nextFrame((function(){var e;return null==(e=c.buttonRef.current)?void 0:e.focus({preventScroll:!0})})))}),[d,c.buttonRef,a,y]),b=(0,e.useCallback)((function(){if(a)return d({type:4,focus:Sn.Nothing});d({type:4,focus:Sn.Specific,id:f})}),[a,f,d]),_=(0,e.useCallback)((function(){a||h||d({type:4,focus:Sn.Specific,id:f,trigger:0})}),[a,h,f,d]),D=(0,e.useCallback)((function(){a||!h||d({type:4,focus:Sn.Nothing})}),[a,h,d]),S=(0,e.useMemo)((function(){return{active:h,selected:p,disabled:a}}),[h,p,a]);return gn({ourProps:{id:f,ref:g,role:"option",tabIndex:!0===a?void 0:-1,"aria-disabled":!0===a||void 0,"aria-selected":!0===p||void 0,disabled:void 0,onClick:E,onFocus:b,onPointerMove:_,onMouseMove:_,onPointerLeave:D,onMouseLeave:D},theirProps:s,slot:S,defaultTag:"li",name:"Listbox.Option"})})),pi=Object.assign(ui,{Button:li,Label:ci,Options:fi,Option:hi});function vi(){var t=(0,e.useRef)(!1);return Xr((function(){return t.current=!0,function(){t.current=!1}}),[]),t}function gi(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];e&&n.length>0&&(t=e.classList).add.apply(t,n)}function mi(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];e&&n.length>0&&(t=e.classList).remove.apply(t,n)}var yi=function(e){return e.Ended="ended",e.Cancelled="cancelled",e}(yi||{});function Ei(e,t,r,n){var i=r?"enter":"leave",a=Zr(),o=void 0!==n?function(e){var t={called:!1};return function(){if(!t.called)return t.called=!0,e.apply(void 0,arguments)}}(n):function(){},s=un(i,{enter:function(){return t.enter},leave:function(){return t.leave}}),u=un(i,{enter:function(){return t.enterTo},leave:function(){return t.leaveTo}}),l=un(i,{enter:function(){return t.enterFrom},leave:function(){return t.leaveFrom}});return mi.apply(void 0,[e].concat(ht(t.enter),ht(t.enterTo),ht(t.enterFrom),ht(t.leave),ht(t.leaveFrom),ht(t.leaveTo),ht(t.entered))),gi.apply(void 0,[e].concat(ht(s),ht(l))),a.nextFrame((function(){mi.apply(void 0,[e].concat(ht(l))),gi.apply(void 0,[e].concat(ht(u))),function(e,t){var r=Zr();if(!e)return r.dispose;var n=getComputedStyle(e),i=[n.transitionDuration,n.transitionDelay].map((function(e){var t=e.split(",").filter(Boolean).map((function(e){return e.includes("ms")?parseFloat(e):1e3*parseFloat(e)})).sort((function(e,t){return t-e})),r=(0,Cr.Z)(t,1)[0];return void 0===r?0:r})),a=(0,Cr.Z)(i,2);if(a[0]+a[1]!==0){var o=[];o.push(r.addEventListener(e,"transitionrun",(function(){o.splice(0).forEach((function(e){return e()})),o.push(r.addEventListener(e,"transitionend",(function(){t("ended"),o.splice(0).forEach((function(e){return e()}))}),{once:!0}),r.addEventListener(e,"transitioncancel",(function(){t("cancelled"),o.splice(0).forEach((function(e){return e()}))}),{once:!0}))}),{once:!0}))}else t("ended");r.add((function(){return t("cancelled")})),r.dispose}(e,(function(r){return"ended"===r&&(mi.apply(void 0,[e].concat(ht(s))),gi.apply(void 0,[e].concat(ht(t.entered)))),o(r)}))})),a.dispose}function bi(e){var t=e.container,r=e.direction,n=e.classes,i=e.events,a=e.onStart,o=e.onStop,s=vi(),u=Yr(),l=nn(r),c=nn((function(){return un(l.current,{enter:function(){return i.current.beforeEnter()},leave:function(){return i.current.beforeLeave()},idle:function(){}})})),d=nn((function(){return un(l.current,{enter:function(){return i.current.afterEnter()},leave:function(){return i.current.afterLeave()},idle:function(){}})}));Xr((function(){var e=Zr();u.add(e.dispose);var r=t.current;if(r&&"idle"!==l.current&&s.current)return e.dispose(),c.current(),a.current(l.current),e.add(Ei(r,n.current,"enter"===l.current,(function(t){var r;e.dispose(),un(t,(r={},(0,ct.Z)(r,yi.Ended,(function(){d.current(),o.current(l.current)})),(0,ct.Z)(r,yi.Cancelled,(function(){})),r))}))),e.dispose}),[r])}var _i=["beforeEnter","afterEnter","beforeLeave","afterLeave","enter","enterFrom","enterTo","entered","leave","leaveFrom","leaveTo"],Di=["show","appear","unmount"];function Si(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(" ").filter((function(e){return e.trim().length>1}))}var wi=(0,e.createContext)(null);wi.displayName="TransitionContext";var Ti=function(e){return e.Visible="visible",e.Hidden="hidden",e}(Ti||{});var Ci=(0,e.createContext)(null);function Ai(e){return"children"in e?Ai(e.children):e.current.filter((function(e){return"visible"===e.state})).length>0}function xi(t){var r=nn(t),n=(0,e.useRef)([]),i=vi(),a=nn((function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vn.Hidden,o=n.current.findIndex((function(t){return t.id===e}));-1!==o&&(un(a,(t={},(0,ct.Z)(t,vn.Unmount,(function(){n.current.splice(o,1)})),(0,ct.Z)(t,vn.Hidden,(function(){n.current[o].state="hidden"})),t)),jn((function(){var e;!Ai(n)&&i.current&&(null==(e=r.current)||e.call(r))})))})),o=nn((function(e){var t=n.current.find((function(t){return t.id===e}));return t?"visible"!==t.state&&(t.state="visible"):n.current.push({id:e,state:"visible"}),function(){return a.current(e,vn.Unmount)}}));return(0,e.useMemo)((function(){return{children:n,register:o,unregister:a}}),[o,a,n])}function ki(){}Ci.displayName="NestingContext";var Li=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Fi(e){var t,r,n={},i=(0,He.Z)(Li);try{for(i.s();!(r=i.n()).done;){var a=r.value;n[a]=null!=(t=e[a])?t:ki}}catch(o){i.e(o)}finally{i.f()}return n}var Ri=pn.RenderStrategy,Ii=En((function(t,r){var n,i=t.beforeEnter,a=t.afterEnter,o=t.beforeLeave,s=t.afterLeave,u=t.enter,l=t.enterFrom,c=t.enterTo,d=t.entered,f=t.leave,h=t.leaveFrom,p=t.leaveTo,v=qr(t,_i),g=(0,e.useRef)(null),m=sn(g,r),y=(0,e.useState)("visible"),E=(0,Cr.Z)(y,2),b=E[0],_=E[1],D=v.unmount?vn.Unmount:vn.Hidden,S=function(){var t=(0,e.useContext)(wi);if(null===t)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}(),w=S.show,T=S.appear,C=S.initial,A=function(){var t=(0,e.useContext)(Ci);if(null===t)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}(),x=A.register,k=A.unregister,L=(0,e.useRef)(null),F=rn(),R=(0,e.useRef)(!1),I=xi((function(){R.current||(_("hidden"),k.current(F))}));(0,e.useEffect)((function(){if(F)return x.current(F)}),[x,F]),(0,e.useEffect)((function(){if(D===vn.Hidden&&F){var e;if(w&&"visible"!==b)return void _("visible");un(b,(e={},(0,ct.Z)(e,"hidden",(function(){return k.current(F)})),(0,ct.Z)(e,"visible",(function(){return x.current(F)})),e))}}),[b,F,x,k,w,D]);var O=nn({enter:Si(u),enterFrom:Si(l),enterTo:Si(c),entered:Si(d),leave:Si(f),leaveFrom:Si(h),leaveTo:Si(p)}),P=function(t){var r=(0,e.useRef)(Fi(t));return(0,e.useEffect)((function(){r.current=Fi(t)}),[t]),r}({beforeEnter:i,afterEnter:a,beforeLeave:o,afterLeave:s}),M=Jr();(0,e.useEffect)((function(){if(M&&"visible"===b&&null===g.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}),[g,b,M]);var B=C&&!T,N=!M||B||L.current===w?"idle":w?"enter":"leave";bi({container:g,classes:O,events:P,direction:N,onStart:nn((function(){})),onStop:nn((function(e){"leave"===e&&!Ai(I)&&(_("hidden"),k.current(F))}))}),(0,e.useEffect)((function(){!B||(D===vn.Hidden?L.current=null:L.current=w)}),[w,B,b]);var U=v,j={ref:m};return e.createElement(Ci.Provider,{value:I},e.createElement(Bn,{value:un(b,(n={},(0,ct.Z)(n,"visible",Pn.Open),(0,ct.Z)(n,"hidden",Pn.Closed),n))},gn({ourProps:j,theirProps:U,defaultTag:"div",features:Ri,visible:"visible"===b,name:"Transition.Child"})))})),Oi=En((function(t,r){var n,i=t.show,a=t.appear,o=void 0!==a&&a,s=t.unmount,u=qr(t,Di),l=sn(r);Jr();var c=Mn();if(void 0===i&&null!==c&&(i=un(c,(n={},(0,ct.Z)(n,Pn.Open,!0),(0,ct.Z)(n,Pn.Closed,!1),n))),![!0,!1].includes(i))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");var d=(0,e.useState)(i?"visible":"hidden"),f=(0,Cr.Z)(d,2),h=f[0],p=f[1],v=xi((function(){p("hidden")})),g=(0,e.useState)(!0),m=(0,Cr.Z)(g,2),y=m[0],E=m[1],b=(0,e.useRef)([i]);Xr((function(){!1!==y&&b.current[b.current.length-1]!==i&&(b.current.push(i),E(!1))}),[b,i]);var _=(0,e.useMemo)((function(){return{show:i,appear:o,initial:y}}),[i,o,y]);(0,e.useEffect)((function(){i?p("visible"):Ai(v)||p("hidden")}),[i,v]);var D={unmount:s};return e.createElement(Ci.Provider,{value:v},e.createElement(wi.Provider,{value:_},gn({ourProps:(0,be.Z)((0,be.Z)({},D),{},{as:e.Fragment,children:e.createElement(Ii,(0,be.Z)((0,be.Z)({ref:l},D),u))}),theirProps:{},defaultTag:e.Fragment,features:Ri,visible:"visible"===h,name:"Transition"})))}));var Pi=Object.assign(Oi,{Child:function(t){var r=null!==(0,e.useContext)(wi),n=null!==Mn();return e.createElement(e.Fragment,null,!r&&n?e.createElement(Oi,(0,be.Z)({},t)):e.createElement(Ii,(0,be.Z)({},t)))},Root:Oi}),Mi=e.forwardRef((function(t){return(0,Le.jsx)("div",{className:"relative my-4 max-w-[18rem]",children:(0,Le.jsx)(pi,{value:t.selectedItem,onChange:t.setSelectedItem,children:function(r){var n=r.open;return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)(pi.Button,{className:"bg-denim-500 focus-visible:ring-bink-500 focus-visible:ring-offset-bink-300 relative w-full cursor-default rounded-lg py-2 pl-3 pr-10 text-left text-white shadow-md focus:outline-none focus-visible:border-indigo-500  focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-offset-2 sm:text-sm",children:[(0,Le.jsx)("span",{className:"block truncate",children:t.selectedItem.name}),(0,Le.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,Le.jsx)(Re,{icon:ke.CHEVRON_DOWN,className:"transform transition-transform ".concat(n?"rotate-180":"")})})]}),(0,Le.jsx)(Pi,{as:e.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Le.jsx)(pi.Options,{className:"bg-denim-500 scrollbar-thin scrollbar-track-denim-400 scrollbar-thumb-denim-200 absolute bottom-11 left-0 right-0 z-10 mt-1 max-h-60 overflow-auto rounded-md py-1 text-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:bottom-10 sm:text-sm",children:t.options.map((function(e){return(0,Le.jsx)(pi.Option,{className:function(e){var t=e.active;return"relative cursor-default select-none py-2 pl-10 pr-4 ".concat(t?"bg-denim-400 text-bink-700":"text-white")},value:e,children:e.name},e.id)}))})})]})}})})}));function Bi(e){return(0,Le.jsxs)("div",{onClick:e.onClick,className:"bg-denim-500 hover:bg-denim-400 transition-[background-color, transform, box-shadow] relative mr-3 mb-3 inline-flex h-10 w-10 cursor-pointer select-none items-center justify-center overflow-hidden rounded font-bold text-white active:scale-110 ".concat(e.active?"shadow-bink-500 shadow-[inset_0_0_0_2px]":""),children:[(0,Le.jsx)("div",{className:"bg-bink-500 absolute bottom-0 top-0 left-0 bg-opacity-50",style:{width:"".concat(e.progress||0,"%")}}),(0,Le.jsx)("span",{className:"relative",children:e.episodeNumber})]})}function Ni(e){var t,r,n=Pr(Nr().watched.items,e.media),i=function(e){if(void 0===e.seasonId||void 0===e.episodeId||void 0===e.seriesData)return null;var t=e.seriesData.seasons.find((function(t){return t.id===e.seasonId}));if(!t)return null;var r=null===t||void 0===t?void 0:t.episodes.find((function(t){return t.id===e.episodeId}));return r?{season:t,episode:r}:null}(e.media),a=n&&n.percentage||0;return(0,Le.jsx)(Bi,{progress:a,episodeNumber:null!==(t=null===i||void 0===i||null===(r=i.episode)||void 0===r?void 0:r.sort)&&void 0!==t?t:1,active:e.active,onClick:e.onClick})}function Ui(t){var r=(0,e.useState)(!1),n=(0,Cr.Z)(r,2),i=n[0],a=n[1],o=(0,e.useState)(!1),s=(0,Cr.Z)(o,2),u=s[0],l=s[1],c=(0,e.useState)(void 0),d=(0,Cr.Z)(c,2),f=d[0],h=d[1],p=(0,e.useRef)(!0),v=(0,e.useMemo)((function(){return t}),[]);e.useEffect((function(){return p.current=!0,function(){p.current=!1}}),[]);var g=(0,e.useMemo)((function(){return(0,Ne.Z)(je().mark((function e(){var t,r,n,i=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),n=0;n<t;n++)r[n]=i[n];return a(!0),l(!1),h(void 0),e.abrupt("return",new Promise((function(e){v.apply(void 0,r).then((function(t){return p.current?(l(!0),e(t),null):e(void 0)})).catch((function(t){p&&(h(t),l(!1)),e(void 0)}))})).finally((function(){return p.current&&a(!1)})));case 5:case"end":return e.stop()}}),e)})))}),[v]);return[g,i,f,u]}function ji(e){return encodeURIComponent(btoa(JSON.stringify(e)))}function Hi(){var t=function(){var e=ue(V).match;return e?e.params:{}}().media,r=(0,e.useState)(void 0),n=(0,Cr.Z)(r,2),i=n[0],a=n[1];return(0,e.useEffect)((function(){try{a(function(e){return JSON.parse(atob(decodeURIComponent(e)))}(t))}catch(e){console.error("Failed to deserialize portable media",e),a(void 0)}}),[t,a]),i}var Gi=new $e;function Ki(){return Ki=(0,Ne.Z)(je().mark((function e(t){var r,n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ut(t.providerId)){e.next=3;break}return e.abrupt("return",{seasons:[]});case 3:if(r.type.includes(Ge._.SERIES)||r.type.includes(Ge._.ANIME)){e.next=5;break}return e.abrupt("return",{seasons:[]});case 5:if(!Gi.has(t)){e.next=7;break}return e.abrupt("return",Gi.get(t));case 7:return e.next=9,r.getSeasonDataFromMedia(t);case 9:return(n=e.sent).seasons.sort((function(e,t){return e.sort-t.sort})),n.seasons.forEach((function(e){return e.episodes.sort((function(e,t){return e.sort-t.sort}))})),Gi.set(t,n,3600),e.abrupt("return",n);case 14:case"end":return e.stop()}}),e)}))),Ki.apply(this,arguments)}function zi(e){return(0,Le.jsxs)("div",{children:[(0,Le.jsx)("div",{children:(0,Le.jsx)("div",{className:"bg-denim-400 mb-3 mt-5  h-10 w-56 rounded opacity-50"})}),e.error?(0,Le.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Le.jsx)(Ie,{icon:ke.WARNING,className:"text-red-400"}),(0,Le.jsx)("p",{children:"Failed to load seasons and episodes"})]}):(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("div",{className:"bg-denim-400 mr-3 mb-3 inline-block h-10 w-10 rounded opacity-50"}),(0,Le.jsx)("div",{className:"bg-denim-400 mr-3 mb-3 inline-block h-10 w-10 rounded opacity-50"}),(0,Le.jsx)("div",{className:"bg-denim-400 mr-3 mb-3 inline-block h-10 w-10 rounded opacity-50"})]})]})}function Vi(t){var r,n=Ui((function(e){return function(e){return Ki.apply(this,arguments)}(e)})),i=(0,Cr.Z)(n,4),a=i[0],o=i[1],s=i[2],u=i[3],l=le(),c=(0,e.useState)({seasons:[]}),d=(0,Cr.Z)(c,2),f=d[0],h=d[1],p=t.media.seasonId,v=t.media.episodeId;function g(e,r){var n=(0,be.Z)({},t.media);n.episodeId=r,n.seasonId=e,l.replace("/media/".concat(n.mediaType,"/").concat(ji(Sr(n))))}(0,e.useEffect)((function(){(0,Ne.Z)(je().mark((function e(){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t.media);case 2:r=e.sent,h(r);case 4:case"end":return e.stop()}}),e)})))()}),[a,t.media]);var m=function(e){return{id:e.id,name:e.title||"Season ".concat(e.sort)}},y=f.seasons.map(m),E=f.seasons.find((function(e){return e.id===p})),b=E?m(E):null;return(0,Le.jsxs)(Le.Fragment,{children:[o?(0,Le.jsx)(zi,{}):null,s?(0,Le.jsx)(zi,{error:!0}):null,u&&f.seasons.length?(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mi,{selectedItem:b,options:y,setSelectedItem:function(e){var t;return g(e.id,null===(t=f.seasons.find((function(t){return t.id===e.id})))||void 0===t?void 0:t.episodes[0].id)}}),null===(r=f.seasons.find((function(e){return e.id===p})))||void 0===r?void 0:r.episodes.map((function(e){return(0,Le.jsx)(Ni,{media:(0,be.Z)((0,be.Z)({},t.media),{},{seriesData:f,episodeId:e.id,seasonId:p}),active:e.id===v,onClick:function(){return g(p,e.id)}},e.id)}))]}):null]})}function Wi(e){return(0,Le.jsx)("div",{className:e.className,children:(0,Le.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,Le.jsxs)("div",{className:"flex h-12 items-center justify-center",children:[(0,Le.jsx)("div",{className:"animate-loading-pin bg-denim-300 mx-1 h-2 w-2 rounded-full"}),(0,Le.jsx)("div",{className:"animate-loading-pin bg-denim-300 mx-1 h-2 w-2 rounded-full [animation-delay:150ms]"}),(0,Le.jsx)("div",{className:"animate-loading-pin bg-denim-300 mx-1 h-2 w-2 rounded-full [animation-delay:300ms]"}),(0,Le.jsx)("div",{className:"animate-loading-pin bg-denim-300 mx-1 h-2 w-2 rounded-full [animation-delay:450ms]"})]}),e.text&&e.text.length?(0,Le.jsx)("p",{className:"mt-3 max-w-xs text-sm opacity-75",children:e.text}):null]})})}Gi.setCompare((function(e,t){return e.mediaId===t.mediaId&&e.providerId===t.providerId})),Gi.initialize();var qi=__webpack_require__(2342),Zi=__webpack_require__.n(qi);function Yi(e){return(0,Le.jsx)("div",{className:"bg-denim-200 flex aspect-video w-full items-center justify-center rounded-xl",children:e.error?(0,Le.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Le.jsx)(Ie,{icon:ke.WARNING,className:"text-red-400"}),(0,Le.jsx)("p",{className:"mt-5 text-white",children:"Couldn't get your stream"})]}):(0,Le.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Le.jsx)(Wi,{}),(0,Le.jsx)("p",{className:"mt-3 text-white",children:"Getting your stream..."})]})})}function $i(t){var r=(0,e.useRef)(null),n=(0,e.useState)(!1),i=(0,Cr.Z)(n,2),a=i[0],o=i[1],s=(0,e.useState)(!0),u=(0,Cr.Z)(s,2),l=u[0],c=u[1],d=!l&&!a,f="m3u8"===t.source.type;(0,e.useEffect)((function(){if(c(!0),o(!1),f){if(!r.current)return;if(!Zi().isSupported())return c(!1),void o(!0);var e=new(Zi());if(r.current.canPlayType("application/vnd.apple.mpegurl"))return void(r.current.src=t.source.url);e.attachMedia(r.current),e.loadSource(t.source.url),e.on(Zi().Events.ERROR,(function(e,t){o(!0),console.error(t)}))}}),[t.source.url,r,f]);var h=null;return a?h=(0,Le.jsx)(Yi,{error:!0}):l&&(h=(0,Le.jsx)(Yi,{})),(0,Le.jsxs)(Le.Fragment,{children:[h,(0,Le.jsxs)("video",{className:"bg-denim-500 w-full rounded-xl ".concat(d?"":"hidden"),ref:r,onProgress:function(e){return t.onProgress&&t.onProgress(e.nativeEvent)},onLoadedData:function(e){c(!1),t.startAt&&(e.target.currentTime=t.startAt)},onError:function(e){console.error("failed to playback stream",e),o(!0)},controls:!0,autoPlay:!0,children:[f?null:(0,Le.jsx)("source",{src:t.source.url,type:"video/mp4"}),t.captions.map((function(e){return(0,Le.jsx)("track",{kind:"captions",label:e.label,src:e.url},e.id)}))]})]})}function Xi(e){return(0,Le.jsx)("p",{className:"text-denim-700 font-semibold ".concat(e.className||""),children:e.content.map((function(e,t){return(0,Le.jsxs)("span",{children:[0!==t?(0,Le.jsx)("span",{className:"mx-[0.6em] text-[1em]",children:"\u25cf"}):null,e]},e)}))})}function Qi(e){var t=e.portable?lt(e.portable.providerId):void 0;return t&&t.exists?t.enabled?e.children||null:(0,Le.jsx)(zr,{}):(0,Le.jsx)(Kr,{})}function Ji(e){var t,r=Nr(),n=null===(t=Pr(r.watched.items,e.media))||void 0===t?void 0:t.progress;return(0,Le.jsx)($i,{source:e.stream,captions:e.stream.captions,onProgress:function(t){return function(t){if(e.media){var n=t.currentTarget;n.currentTime<=30||r.updateProgress(e.media,n.currentTime,n.duration)}}(t)},startAt:n})}function ea(e){var t=Rr(),r=t.setItemBookmark,n=Ir((0,t.getFilteredBookmarks)(),e.media);return(0,Le.jsxs)(Wr,{className:"mt-5",children:[(0,Le.jsxs)("div",{className:"flex",children:[(0,Le.jsxs)("div",{className:"flex-1",children:[(0,Le.jsx)(Pe,{children:e.media.title}),(0,Le.jsx)(Xi,{className:"mt-3 text-sm",content:[e.provider.displayName,e.media.mediaType,e.media.year]})]}),(0,Le.jsx)("div",{children:(0,Le.jsx)(Ie,{icon:ke.BOOKMARK,active:n,onClick:function(){return r(e.media,!n)},clickable:!0})})]}),e.media.mediaType!==Ge._.MOVIE?(0,Le.jsx)(Vi,{media:e.media}):null]})}function ta(e){return(0,Le.jsx)(Wr,{className:"mt-5",children:(0,Le.jsx)("div",{className:"flex",children:(0,Le.jsxs)("div",{className:"flex-1",children:[(0,Le.jsx)("div",{className:"bg-denim-500 mb-2 h-4 w-48 rounded-full"}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("span",{className:"bg-denim-400 mr-4 inline-block h-2 w-12 rounded-full"}),(0,Le.jsx)("span",{className:"bg-denim-400 mr-4 inline-block h-2 w-12 rounded-full"})]}),e.error?(0,Le.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Le.jsx)(Ie,{icon:ke.WARNING,className:"text-red-400"}),(0,Le.jsx)("p",{children:"Your url may be invalid"})]}):(0,Le.jsx)(zi,{})]})})})}function ra(t){var r=t.portable,n=(0,e.useState)(),i=(0,Cr.Z)(n,2),a=i[0],o=i[1],s=(0,e.useState)(),u=(0,Cr.Z)(s,2),l=u[0],c=u[1],d=Ui((function(e){return function(e){return wr.apply(this,arguments)}(e)})),f=(0,Cr.Z)(d,3),h=f[0],p=f[1],v=f[2],g=Ui((function(e){return function(e){return Tr.apply(this,arguments)}(e)})),m=(0,Cr.Z)(g,3),y=m[0],E=m[1],b=m[2];(0,e.useEffect)((function(){(0,Ne.Z)(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return e.t0=c,e.next=4,h(r);case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})))()}),[r,c,h]),(0,e.useEffect)((function(){(0,Ne.Z)(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return e.t0=o,e.next=4,y(r);case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})))()}),[r,o,y]);var _=null;E?_=(0,Le.jsx)(Yi,{}):b?_=(0,Le.jsx)(Yi,{error:!0}):l&&a&&(_=(0,Le.jsx)(Ji,{media:l,stream:a}));var D=null;return p?D=(0,Le.jsx)(ta,{}):v?D=(0,Le.jsx)(ta,{error:!0}):r&&l&&(D=(0,Le.jsx)(ea,{provider:ut(r.providerId),media:l})),(0,Le.jsxs)(Le.Fragment,{children:[_,D]})}function na(){var e=Hi(),t=le();return(0,Le.jsxs)("div",{className:"flex min-h-screen w-full",children:[(0,Le.jsx)(jr,{children:(0,Le.jsx)(Hr,{onClick:function(){return"POP"!==t.action?t.goBack():t.push("/")},direction:"left",linkText:"Go back"})}),(0,Le.jsx)(Qi,{portable:e,children:(0,Le.jsx)("div",{className:"container mx-auto mt-40 mb-16 max-w-[1100px]",children:(0,Le.jsx)(ra,{portable:e})})})]})}function ia(e){var t=e.media,r=e.linkable,n=e.watchedPercentage,i=e.series,a=ut(t.providerId);return a?(0,Le.jsxs)("article",{className:"bg-denim-300 group relative mb-4 flex overflow-hidden rounded py-4 px-5 ".concat(r?"hover:bg-denim-400":""),children:[n>0?(0,Le.jsx)("div",{className:"absolute top-0 left-0 right-0 bottom-0",children:(0,Le.jsx)("div",{className:"bg-bink-300 relative h-full bg-opacity-30",style:{width:"".concat(n,"%")},children:(0,Le.jsx)("div",{className:"from-bink-400 absolute right-0 top-0 bottom-0 ml-auto w-40 bg-gradient-to-l to-transparent opacity-40"})})}):null,(0,Le.jsxs)("div",{className:"relative flex flex-1",children:[(0,Le.jsxs)("div",{className:"flex-1",children:[(0,Le.jsxs)("h1",{className:"mb-1 font-bold text-white",children:[t.title,i&&t.seasonId&&t.episodeId?(0,Le.jsxs)("span",{className:"text-denim-700 ml-2 text-xs",children:["S",t.seasonId," E",t.episodeId]}):null]}),(0,Le.jsx)(Xi,{className:"text-xs",content:[a.displayName,t.mediaType,t.year]})]}),(0,Le.jsx)("div",{className:"flex translate-x-3 items-center justify-end text-xl text-white opacity-0 transition-[opacity,transform] ".concat(r?"group-hover:translate-x-0 group-hover:opacity-100":""),children:(0,Le.jsx)(Re,{icon:ke.CHEVRON_RIGHT})})]})]}):null}function aa(e){var t="movie";e.media.mediaType===Ge._.SERIES&&(t="series");var r=(0,Le.jsx)(ia,(0,be.Z)({},e));return e.linkable?(0,Le.jsx)(me,{to:"/media/".concat(t,"/").concat(ji(Sr(e.media))),children:r}):(0,Le.jsx)("span",{children:r})}function oa(e){var t=Pr(Nr().watched.items,e.media),r=t&&t.percentage||0;return(0,Le.jsx)(aa,{watchedPercentage:r,media:e.media,series:e.series&&void 0!==e.media.episodeId,linkable:!0})}function sa(t){var r=t.onClick||function(){},n=t.onBackdropHide||function(){},i=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=(0,e.useState)(t),n=(0,Cr.Z)(r,2),i=n[0],a=n[1],o=(0,e.useState)(i),s=(0,Cr.Z)(o,2),u=s[0],l=s[1];(0,e.useEffect)((function(){i&&l(!0)}),[i]);var c=function(){i||l(!1)},d={animation:"".concat(i?"fadeIn":"fadeOut"," .3s")};return[u,a,{style:d,onAnimationEnd:c}]}(),a=(0,Cr.Z)(i,3),o=a[0],s=a[1],u=a[2];return(0,e.useEffect)((function(){s(!!t.active)}),[t.active,s]),(0,e.useEffect)((function(){o||n()}),[o]),o?(0,Le.jsx)("div",(0,be.Z)((0,be.Z)({className:"fixed top-0 left-0 right-0 z-[999] h-screen bg-black bg-opacity-50 opacity-100 transition-opacity ".concat(o?"":"opacity-0")},u),{},{onClick:function(e){return r(e.nativeEvent)}})):null}function ua(e){var t=e.onClick,r=e.children,n=e.className;return(0,Le.jsx)("button",{onClick:t,className:n,type:"button",children:r})}function la(e){var t=e.option,r=e.onClick,n=e.tabIndex;return(0,Le.jsxs)("div",{className:"text-denim-700 flex h-10 cursor-pointer items-center space-x-2 px-4 py-2 text-left transition-colors hover:text-white",onClick:r,tabIndex:n,children:[(0,Le.jsx)(Re,{icon:t.icon}),(0,Le.jsx)("input",{type:"radio",className:"hidden",id:t.id}),(0,Le.jsx)("label",{htmlFor:t.id,className:"cursor-pointer ",children:(0,Le.jsx)("div",{className:"item",children:t.name})})]})}var ca=e.forwardRef((function(t,r){var n=function(){var t=(0,e.useState)(!1),r=(0,Cr.Z)(t,2),n=r[0],i=r[1],a=(0,e.useState)(!1),o=(0,Cr.Z)(a,2),s=o[0],u=o[1];return[function(e){i(e),e&&u(!0)},{active:n,onBackdropHide:function(){u(!1)}},{style:s?{zIndex:"1000",position:"relative"}:{}}]}(),i=(0,Cr.Z)(n,3),a=i[0],o=i[1],s=i[2],u=(0,e.useState)(t.selectedItem),l=(0,Cr.Z)(u,2),c=l[0],d=l[1];(0,e.useEffect)((function(){var e;return t.open?d(t.selectedItem):e=setTimeout((function(){d(t.selectedItem)}),200),function(){e&&clearTimeout(e)}}),[t.open]);var f=t.options.find((function(e){return e.id===t.selectedItem}))||{id:"movie",name:"movie",icon:ke.ARROW_LEFT};(0,e.useEffect)((function(){a(t.open)}),[t.open]);return(0,Le.jsxs)("div",{className:"w-full min-w-[140px] sm:w-auto",children:[(0,Le.jsxs)("div",(0,be.Z)((0,be.Z)({ref:r,className:"relative w-full sm:w-auto"},s),{},{children:[(0,Le.jsxs)(ua,(0,be.Z)((0,be.Z)({},t),{},{className:"sm:justify-left bg-bink-200 hover:bg-bink-300 relative z-20 flex h-10 w-full items-center justify-center space-x-2 rounded-[20px] px-4 py-2 text-white",children:[(0,Le.jsx)(Re,{icon:f.icon}),(0,Le.jsx)("span",{className:"flex-1",children:f.name}),(0,Le.jsx)(Re,{icon:ke.CHEVRON_DOWN,className:"transition-transform ".concat(t.open?"rotate-180":"")})]})),(0,Le.jsx)("div",{className:"bg-denim-300 absolute top-0 z-10 w-full rounded-[20px] pt-[40px] transition-all duration-200 ".concat(t.open?"block max-h-60 opacity-100":"invisible max-h-0 opacity-0"),children:t.options.filter((function(e){return e.id!==c})).map((function(e){return(0,Le.jsx)(la,{option:e,onClick:function(r){return function(e,r){e.stopPropagation(),t.setSelectedItem(r.id),t.setOpen(!1)}(r,e)},tabIndex:t.open?0:void 0},e.id)}))})]})),(0,Le.jsx)(sa,(0,be.Z)({onClick:function(){return t.setOpen(!1)}},o))]})}));function da(e){var t=e.onChange,r=e.onUnFocus,n=e.value,i=e.label,a=e.className,o=e.placeholder,s=(0,Le.jsx)("input",{type:"text",className:a,placeholder:o,onChange:function(e){return t&&t(e.target.value)},value:n,onBlur:function(){return r&&r()}});return i?(0,Le.jsxs)("label",{children:[(0,Le.jsx)("span",{children:i}),s]}):s}function fa(t){var r=(0,e.useState)(!1),n=(0,Cr.Z)(r,2),i=n[0],a=n[1];return(0,Le.jsxs)("div",{className:"flex flex-col items-center gap-4 rounded-[28px] bg-denim-300 px-4 py-4 transition-colors focus-within:bg-denim-400 hover:bg-denim-400 sm:flex-row sm:py-2 sm:pl-8  sm:pr-2",children:[(0,Le.jsx)(da,{onUnFocus:t.onUnFocus,onChange:function(e){return r=e,void t.onChange((0,be.Z)((0,be.Z)({},t.value),{},{searchQuery:r}),!1);var r},value:t.value.searchQuery,className:"w-full flex-1 bg-transparent text-white placeholder-denim-700 focus:outline-none",placeholder:t.placeholder}),(0,Le.jsx)(ca,{icon:ke.SEARCH,open:i,setOpen:function(e){return a(e)},selectedItem:t.value.type,setSelectedItem:function(e){return r=e,void t.onChange((0,be.Z)((0,be.Z)({},t.value),{},{type:r}),!0);var r},options:[{id:Ge._.MOVIE,name:"Movie",icon:ke.FILM},{id:Ge._.SERIES,name:"Series",icon:ke.CLAPPER_BOARD}],onClick:function(){return a((function(e){return!e}))},children:t.buttonText||"Search"})]})}function ha(e){return(0,Le.jsx)("div",{className:"max-w-[600px] mx-auto px-2 sm:px-0 ".concat(e.classNames||""),children:e.children})}function pa(e){return(0,Le.jsxs)("div",{className:"mt-12 ".concat(e.className),children:[(0,Le.jsxs)("div",{className:"mb-4 flex items-end",children:[(0,Le.jsxs)("p",{className:"text-denim-700 flex flex-1 items-center font-bold uppercase",children:[e.icon?(0,Le.jsx)("span",{className:"mr-2 text-xl",children:(0,Le.jsx)(Re,{icon:e.icon})}):null,e.title]}),e.linkText?(0,Le.jsx)(Hr,{linkText:e.linkText,direction:"left",onClick:e.onClick}):null]}),e.children]})}function va(e){return(0,Le.jsx)("p",{className:"font-bold text-bink-600",children:e.children})}function ga(){return(0,Le.jsx)(Wi,{className:"my-24",text:"Fetching your favourite shows..."})}function ma(e){var t=e.fails===e.total,r=t?ke.WARNING:ke.EYE_SLASH;return(0,Le.jsxs)("div",{className:"my-24 flex flex-col items-center justify-center space-y-3 text-center",children:[(0,Le.jsx)(Ie,{icon:r,className:"text-xl ".concat(t?"text-red-400":"text-bink-600")}),t?null:(0,Le.jsxs)("div",{children:[e.fails>0?(0,Le.jsxs)("p",{className:"text-red-400",children:[e.fails,"/",e.total," providers failed!"]}):null,e.resultsSize>0?(0,Le.jsx)("p",{children:"That's all we have!"}):(0,Le.jsx)("p",{children:"We couldn't find anything!"})]}),t?(0,Le.jsx)("div",{children:(0,Le.jsx)("p",{children:"All providers have failed!"})}):null]})}function ya(t){var r=t.searchQuery,n=t.clear,i=(0,e.useState)(),a=(0,Cr.Z)(i,2),o=a[0],s=a[1],u=Ui((function(e){return function(e){return Dr.apply(this,arguments)}(e)})),l=(0,Cr.Z)(u,4),c=l[0],d=l[1],f=l[2],h=l[3];return(0,e.useEffect)((function(){function e(){return(e=(0,Ne.Z)(je().mark((function e(t){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:s(r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}""!==r.searchQuery&&function(t){e.apply(this,arguments)}(r)}),[r,c]),(0,Le.jsxs)("div",{children:[h&&null!==o&&void 0!==o&&o.results.length?(0,Le.jsx)(pa,{title:"Search results",icon:ke.SEARCH,linkText:"Back to home",onClick:function(){return n()},children:o.results.map((function(e){return(0,Le.jsx)(oa,{media:e},[e.mediaId,e.providerId].join("|"))}))}):null,h&&o?(0,Le.jsx)(ma,{resultsSize:o.results.length,fails:o.stats.failed,total:o.stats.total}):null,f?(0,Le.jsx)(ma,{resultsSize:0,fails:1,total:1}):null,d?(0,Le.jsx)(ga,{}):null]})}function Ea(){var e=Rr().getFilteredBookmarks,t=Nr().getFilteredWatched,r=e(),n=t().filter((function(e){return!Ir(r,e)}));return 0===n.length&&0===r.length?null:(0,Le.jsxs)("div",{className:"mb-16 mt-32",children:[r.length>0?(0,Le.jsx)(pa,{title:"Bookmarks",icon:ke.BOOKMARK,children:r.map((function(e){return(0,Le.jsx)(oa,{media:e},[e.mediaId,e.providerId].join("|"))}))}):null,n.length>0?(0,Le.jsx)(pa,{title:"Continue Watching",icon:ke.CLOCK,children:n.map((function(e){return(0,Le.jsx)(oa,{media:e,series:!0},[e.mediaId,e.providerId].join("|"))}))}):null]})}function ba(){var t=(0,e.useState)(!1),r=(0,Cr.Z)(t,2),n=r[0],i=r[1],a=(0,e.useState)(!1),o=(0,Cr.Z)(a,2),s=o[0],u=o[1],l=function(){var t=le(),r=(0,e.useRef)(!0),n=ce(),i=n.path,a=n.params,o=(0,e.useState)({searchQuery:"",type:Ge._.MOVIE}),s=(0,Cr.Z)(o,2),u=s[0],l=s[1];return e.useEffect((function(){if(!1!==r.current){r.current=!1;var e=Object.values(Ge._).find((function(e){return a.type===e}))||Ge._.MOVIE,t=a.query||"";l({type:e,searchQuery:t})}}),[l,a,r]),[u,function(e,r){var n=(0,be.Z)({},u);Object.assign(n,e),l(n),r&&t.replace($(i,{query:0===n.searchQuery.length?void 0:e.searchQuery,type:n.type}))},function(){t.replace($(i,{query:0===u.searchQuery.length?void 0:u.searchQuery,type:u.type}))}]}(),c=(0,Cr.Z)(l,3),d=c[0],f=c[1],h=c[2],p=function(t,r){var n=(0,e.useState)(t),i=(0,Cr.Z)(n,2),a=i[0],o=i[1];return(0,e.useEffect)((function(){var e=setTimeout((function(){o(t)}),r);return function(){clearTimeout(e)}}),[t,r]),a}(d,2e3);(0,e.useEffect)((function(){i(""!==d.searchQuery),u(""!==d.searchQuery)}),[d]),(0,e.useEffect)((function(){u(!1)}),[p]);var v=(0,e.useMemo)((function(){return s?(0,Le.jsx)(ga,{}):n?(0,Le.jsx)(ya,{searchQuery:p,clear:function(){return f({searchQuery:""},!0)}}):(0,Le.jsx)(Ea,{})}),[s,n,p,f]);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(jr,{}),(0,Le.jsxs)(ha,{children:[(0,Le.jsxs)("div",{className:"mt-44 space-y-16 text-center",children:[(0,Le.jsxs)("div",{className:"space-y-4",children:[(0,Le.jsx)(va,{children:"Because watching legally is boring"}),(0,Le.jsx)(Pe,{children:"What movie do you want to watch?"})]}),(0,Le.jsx)(fa,{onChange:f,value:d,onUnFocus:h,placeholder:"What movie do you want to watch?"})]}),v]})]})}var _a=function(){return(0,Le.jsx)(Br,{children:(0,Le.jsx)(Fr,{children:(0,Le.jsxs)(se,{children:[(0,Le.jsx)(te,{exact:!0,path:"/",children:(0,Le.jsx)(X,{to:"/search/".concat(Ge._.MOVIE)})}),(0,Le.jsx)(te,{exact:!0,path:"/media/movie/:media",component:na}),(0,Le.jsx)(te,{exact:!0,path:"/media/series/:media",component:na}),(0,Le.jsx)(te,{exact:!0,path:"/search/:type/:query?",component:ba}),(0,Le.jsx)(te,{path:"*",component:Vr})]})})})};t.render((0,Le.jsx)(e.StrictMode,{children:(0,Le.jsx)(Be,{children:(0,Le.jsx)(de,{children:(0,Le.jsx)(_a,{})})})}),document.getElementById("root"))}()})();